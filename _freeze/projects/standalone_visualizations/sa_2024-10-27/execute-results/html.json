{
  "hash": "e600bc3742c7f7f5f0ff12c97a3f8f48",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The Rise and Fall of Bob's Burgers Ratings Across Seasons\"\nsubtitle: \"An exploration of how episode and season ratings fluctuate over the course of 14 seasons.\"\nauthor: \"Steven Ponce\"\ndate: \"2024-10-27\"\ncategories: [\"Bob's Burgers\", \"{ bobsburgersR }\", \"#Standalone\", ]\nimage: \"thumbnails/sa_2024-10-27.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\neditor_options: \n  \n  chunk_output_type: inline\nexecute: \n  \n  error: false\n  message: false\n  warning: false\n  eval: true\nshare:\n  permalink: \"https://stevenponce.netlify.app/data_visualizations.png\"\n  linkedin: true\n  twitter: true\n  email: true\n---\n\n\n\n![Line chart and heatmap showing IMDb ratings for Bob's Burgers across seasons and episodes.](sa_2024-10-27){#fig-1}\n\n### <mark> __Steps to Create this Graphic__ </mark>\n\n#### 1. Load Packages & Setup \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n  tidyverse,         # Easily Install and Load the 'Tidyverse'\n  ggtext,            # Improved Text Rendering Support for 'ggplot2'\n  showtext,          # Using Fonts More Easily in R Graphs\n  janitor,           # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,             # Compact and Flexible Summaries of Data\n  scales,            # Scale Functions for Visualization\n  glue,              # Interpreted String Literals\n  colorspace,        # A Toolbox for Manipulating and Assessing Colors and Palettes\n  patchwork,         # The Composer of Plots\n  bobsburgersR       # Bob's Burgers Datasets for Data Visualization\n)  \n\n### |- resolution ----\nshowtext_opts(dpi = 320, regular.wt = 300, bold.wt = 800)\n```\n:::\n\n\n\n#### 2. Read in the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbobsburgersR::imdb_wikipedia_data\n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(imdb_wikipedia_data)\nskim(imdb_wikipedia_data)\n```\n:::\n\n\n\n#### 4. Tidy Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |- heatmap data ----\nheatmap_data <- imdb_wikipedia_data |>\n  mutate(\n    season = factor(season),\n    episode = factor(episode, levels = rev(unique(episode))),\n  ) |>\n  filter(!is.na(rating))\n\n### |- heatmap data ----\nlinechart_data <- imdb_wikipedia_data |>\n  group_by(season) |>\n  summarize(\n    median_rating = median(rating, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  mutate(season = factor(season))\n```\n:::\n\n\n\n\n#### 5. Visualization Parameters \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |- plot aesthetics ----\nbkg_col      <- \"#f5f5f2\"    \ntitle_col    <- \"gray20\"           \nsubtitle_col <- \"gray20\"     \ncaption_col  <- \"gray30\"   \ntext_col     <- \"gray20\"    \ncol_palette  <- c(\"#F9F6FB\", \"#F0DDF1\", \"#D6B9E3\", \"#B78FCA\", \"#9D5CAA\", \"#684671\")\n\n### |-  titles and caption ----\n\n# icons\ntt <- str_glue(\"Source: {{bobsburgersR}}\")\nli <- str_glue(\"<span style='font-family:fa6-brands'>&#xf08c;</span>\")\ngh <- str_glue(\"<span style='font-family:fa6-brands'>&#xf09b;</span>\")\n\n# text\ntitle_text    <- str_glue(\"The Rise and Fall of Bob's Burgers Ratings Across Seasons\")\nsubtitle_text <- str_glue(\"An exploration of how episode and season ratings fluctuate over the course of 14 seasons.\")\ncaption_text  <- str_glue(\"{li} stevenponce &bull; {gh} poncest &bull; #rstats #ggplot2 &bull; {tt}\")\n\n### |-  fonts ----\nfont_add(\"fa6-brands\", here::here(\"fonts/6.4.2/Font Awesome 6 Brands-Regular-400.otf\"))\nfont_add_google(\"Oswald\", regular.wt = 400, family = \"title\")\nfont_add_google(\"Merriweather Sans\", regular.wt = 400, family = \"subtitle\")\nfont_add_google(\"Merriweather Sans\", regular.wt = 400, family = \"text\")\nfont_add_google(\"Noto Sans\", regular.wt = 400, family = \"caption\")\nshowtext_auto(enable = TRUE)\n\n### |-  plot theme ----\ntheme_set(theme_minimal(base_size = 14, base_family = \"text\"))                \n\ntheme_update(\n  plot.title.position   = \"plot\",\n  plot.caption.position = \"plot\",\n  legend.position       = 'plot',\n  plot.background       = element_rect(fill = bkg_col, color = bkg_col),\n  panel.background      = element_rect(fill = bkg_col, color = bkg_col),\n  plot.margin           = margin(t = 10, r = 20, b = 10, l = 20),\n  axis.title.x          = element_text(margin = margin(10, 0, 0, 0), size = rel(1.1), \n                                       color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n  axis.title.y          = element_text(margin = margin(0, 10, 0, 0), size = rel(1.1), \n                                       color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n  axis.text             = element_text(size = rel(0.8), color = text_col, family = \"text\"),\n  panel.grid.major.y    = element_line(color = \"#d3d3d3\", linewidth = 0.5), \n  panel.grid.major.x    = element_blank(), \n  panel.grid.minor      = element_blank()\n)  \n```\n:::\n\n\n\n\n#### 6. Plot \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  line chart ----\nline_chart <- linechart_data |>\n  ggplot(aes(x = season, y = median_rating, group = 1)) +\n\n  # Geoms\n  geom_step(color = \"#6a1b9a\", linewidth = 1.5) +\n  geom_point(color = \"#8e24aa\", size = 4, shape = 20) +\n  geom_text(aes(label = format(round(median_rating, 1), nsmall = 1)),\n    hjust = -0.2, vjust = -0.8, size = 4.5, color = \"#6a1b9a\", fontface = \"bold\"\n  ) +\n\n  # Scales\n  scale_x_discrete() +\n  scale_y_continuous(\n    labels = scales::label_number(accuracy = 0.1),\n    expand = expansion(mult = c(0, 0.05))\n  ) +\n  coord_cartesian(clip = \"off\") +\n\n  # Labs\n  labs(\n    x = NULL,\n    y = \"Median IMDb Rating\",\n  ) +\n\n  # Theme\n  theme(\n    axis.text.x = element_blank()\n  )\n\n\n### |-  heatmap plot ----\nheatmap_plot <- heatmap_data |>\n  ggplot(aes(x = season, y = episode, fill = rating)) +\n\n  # Geoms\n  geom_tile(linewidth = 0.25, color = \"grey20\") +\n  geom_text(aes(label = round(rating, 1)),\n    color = \"black\",\n    size = 3,\n    fontface = \"bold\"\n  ) +\n\n  # Scales\n  scale_x_discrete(position = \"top\") +\n  scale_y_discrete() +\n  scale_fill_stepsn(\n    colors = col_palette,\n    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10),\n    transform = \"identity\",\n    guide = guide_colorsteps(\n      barheight = unit(20, \"lines\"),\n      barwidth = unit(.75, \"lines\")\n    )\n  ) +\n  coord_cartesian(clip = \"off\") +\n\n  # Labs\n  labs(\n    x = \"Season\",\n    y = \"Episode\",\n  ) +\n\n  # Theme\n  theme(\n    legend.position    = \"right\",\n    legend.title       = element_text(size = 10, face = \"bold\"),\n    legend.text        = element_text(size = 8),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid         = element_blank(),\n  )\n\n\n### |-  combined plots ----  \ncombined_plot <- (line_chart / heatmap_plot) +\n  patchwork::plot_layout(\n    heights = c(0.5, 1.25),\n  ) +\n\n  # Labs\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text\n  ) &\n\n  # Theme\n  theme(\n    plot.margin  = margin(10, 20, 10, 20),\n    plot.title   = element_markdown(\n      size       = rel(1.5),\n      family     = \"title\",\n      face       = \"bold\",\n      color      = title_col,\n      lineheight = 1.1,\n      margin     = margin(t = 10, b = 5)\n    ),\n    plot.subtitle = element_markdown(\n      size       = rel(0.85),\n      family     = \"subtitle\",\n      color      = subtitle_col,\n      lineheight = 1.1,\n      margin     = margin(t = 5, b = 15)\n    ),\n    plot.caption = element_markdown(\n      size       = rel(0.65),\n      family     = \"caption\",\n      color      = caption_col,\n      lineheight = 1.1,\n      hjust      = 0.5,\n      halign     = 0.5,\n      margin     = margin(t = 5, b = 5)\n    )\n  )\n```\n:::\n\n\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \n\n# Save the plot as PNG\nggsave(\n  filename = here::here(\"projects/standalone_visualizations/sa_2024-10-27.png\"), \n  plot = combined_plot,\n  width = 8, height = 12, units = \"in\", dpi = 320\n)\n\n### |-  plot thumbnail----  \nmagick::image_read(here::here(\"projects/standalone_visualizations/sa_2024-10-27.png\")) |> \n  magick::image_resize(geometry = \"400\") |> \n  magick::image_write(here::here(\"projects/standalone_visualizations/thumbnails/sa_2024-10-27.png\"))\n```\n:::\n\n\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] bobsburgersR_0.0.0.9000 patchwork_1.2.0         colorspace_2.1-1       \n [4] glue_1.8.0              scales_1.3.0            skimr_2.1.5            \n [7] janitor_2.2.0           showtext_0.9-7          showtextdb_3.0         \n[10] sysfonts_0.8.9          ggtext_0.1.2            lubridate_1.9.3        \n[13] forcats_1.0.0           stringr_1.5.1           dplyr_1.1.4            \n[16] purrr_1.0.2             readr_2.1.5             tidyr_1.3.1            \n[19] tibble_3.2.1            ggplot2_3.5.1           tidyverse_2.0.0        \n[22] pacman_0.5.1           \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.5      xfun_0.47         htmlwidgets_1.6.4 tzdb_0.4.0       \n [5] vctrs_0.6.5       tools_4.4.0       generics_0.1.3    curl_5.2.2       \n [9] fansi_1.0.6       pkgconfig_2.0.3   lifecycle_1.0.4   compiler_4.4.0   \n[13] farver_2.1.2      textshaping_0.4.0 munsell_0.5.1     repr_1.1.7       \n[17] snakecase_0.11.1  htmltools_0.5.8.1 yaml_2.3.10       pillar_1.9.0     \n[21] magick_2.8.4      commonmark_1.9.1  tidyselect_1.2.1  digest_0.6.37    \n[25] stringi_1.8.4     labeling_0.4.3    rprojroot_2.0.4   fastmap_1.2.0    \n[29] grid_4.4.0        here_1.0.1        cli_3.6.3         magrittr_2.0.3   \n[33] base64enc_0.1-3   utf8_1.2.4        withr_3.0.1       timechange_0.3.0 \n[37] rmarkdown_2.28    ragg_1.3.2        hms_1.1.3         evaluate_0.24.0  \n[41] knitr_1.48        markdown_1.13     rlang_1.1.4       gridtext_0.1.5   \n[45] Rcpp_1.0.13       xml2_1.3.6        renv_1.0.3        rstudioapi_0.16.0\n[49] jsonlite_1.8.8    R6_2.5.1          systemfonts_1.1.0\n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n\n##### Expand for GitHub Repo\n \n[Access the GitHub repository here](https://github.com/poncest/personal-website/)\n:::",
    "supporting": [
      "sa_2024-10-27_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}