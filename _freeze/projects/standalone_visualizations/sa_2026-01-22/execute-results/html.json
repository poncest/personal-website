{
  "hash": "a423b93bd9e5180cd11b9def90d9350b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Bob's Burgers: The Fart Report\"\nsubtitle: \"328 fart mentions across 16 seasons of transcript data (yes, we counted!)\"\ndescription: \"A playful analysis of flatulence in Bob's Burgers using transcript data from the bobsburgersR package. Exploring the fart lexicon, fastest-to-fart episodes, and the show's fartiest moments.\"\ndate: \"2026-01-22\"\nauthor:\n  - name: \"Steven Ponce\"\n    url: \"https://stevenponce.netlify.app\"\ncitation:    \n    url: \"https://stevenponce.netlify.app/projects/standalone_visualizations/sa_2026-01-22.html\"\ncategories: [\"Bob's Burgers\", \"Standalone\", \"Data Visualization\", \"R Programming\", \"2026\"]\ntags: [\n  \"bobsburgersR\",\n  \"ggplot2\",\n  \"patchwork\",\n  \"text analysis\",\n  \"pop culture\",\n  \"TV transcripts\",\n  \"humor\"\n]\nimage: \"thumbnails/sa_2026-01-22.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                    \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n![Three-panel data visualization titled 'Bob's Burgers: The Fart Report' analyzing 328 fart mentions across 16 seasons. The top panel shows 'The Fart Lexicon' with vertical bars: 'fart' dominates at 53%, followed by 'farts' (26%), 'farting' (11%), 'farted' (9%), and 'farty' (2%). Bottom left shows 'Fastest to Fart' episodes, with S3E8 and S3E16 achieving the first fart by Line 1. Bottom right shows 'The Fartiest Episodes' with S6E10 'Lice Things Are Lice' leading at 18 mentions, highlighted in gold. Color palette uses mustard yellow, teal, and red.](sa_2026-01-22){#fig-1}\n\n### [**Steps to Create this Graphic**]{.mark}\n\n#### [1. Load Packages & Setup]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n  tidyverse,         # Easily Install and Load the 'Tidyverse'\n  ggtext,            # Improved Text Rendering Support for 'ggplot2'\n  showtext,          # Using Fonts More Easily in R Graphs\n  janitor,           # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,             # Compact and Flexible Summaries of Data\n  scales,            # Scale Functions for Visualization\n  glue,              # Interpreted String Literals\n  patchwork,         # The Composer of Plots\n  bobsburgersR       # Bob's Burgers Datasets for Data Visualization\n)  \n})\n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  = 14,\n  height = 10,\n  units  = \"in\",\n  dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### [2. Read in the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n\ntranscript_data <- bobsburgersR::transcript_data\n```\n````\n:::\n\n\n#### [3. Examine the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(transcript_data)\nskim_without_charts(transcript_data)\n```\n````\n:::\n\n\n#### [4. Tidy Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy-fixed\n#| warning: false\n\n# Data Prep: Extract Fart Mentions\nfart_data <- transcript_data |>\n  filter(str_detect(raw_text, regex(\"\\\\bfart(ing|ed|s|y)?\\\\b\", ignore_case = TRUE))) |>\n  mutate(\n    type = if_else(is.na(dialogue), \"Sound Effect\", \"Spoken\"),\n    dialogue_clean = coalesce(dialogue, raw_text)\n  )\n\n# Key stats\ntotal_farts <- nrow(fart_data)\ntotal_seasons <- max(transcript_data$season, na.rm = TRUE)\n\n# Helper Function \nmake_ep_label <- function(season, episode, title, width = 28) {\n  paste0(\"S\", season, \"E\", episode, \": \", str_trunc(title, width))\n}\n\n# P1 Data: The Fart Lexicon\nfart_lexicon <- fart_data |>\n  filter(type == \"Spoken\") |>\n  mutate(\n    variant = case_when(\n      str_detect(tolower(dialogue_clean), \"\\\\bfarting\\\\b\") ~ \"farting\",\n      str_detect(tolower(dialogue_clean), \"\\\\bfarted\\\\b\") ~ \"farted\",\n      str_detect(tolower(dialogue_clean), \"\\\\bfarts\\\\b\") ~ \"farts\",\n      str_detect(tolower(dialogue_clean), \"\\\\bfarty\\\\b\") ~ \"farty\",\n      TRUE ~ \"fart\"\n    )\n  ) |>\n  count(variant, sort = TRUE) |>\n  mutate(\n    pct = n / sum(n),\n    variant = fct_reorder(variant, n)\n  )\n\n# P2 Data: Fastest to Fart\nfastest_to_fart <- fart_data |>\n  group_by(season, episode, title) |>\n  summarise(first_fart_line = min(line, na.rm = TRUE), .groups = \"drop\") |>\n  arrange(first_fart_line) |>\n  slice_head(n = 10) |>\n  mutate(\n    label = make_ep_label(season, episode, title),\n    label = fct_reorder(label, -first_fart_line)\n  )\n\n# P3 Data: The Fartiest Episodes \nfartiest_episodes <- fart_data |>\n  count(season, episode, title, name = \"fart_count\") |>\n  arrange(desc(fart_count)) |>\n  slice_head(n = 15) |>\n  mutate(\n    label = make_ep_label(season, episode, title),\n    label = fct_reorder(label, fart_count),\n    is_champion = row_number() == 1\n  )\n```\n````\n:::\n\n\n#### [5. Visualization Parameters]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = list(\n    mustard    = \"#E8A838\",\n    burger_red = \"#C44536\",\n    teal       = \"#3D8B8B\",\n    black      = \"#2C3E50\",\n    gray       = \"#7F8C8D\",\n    light_gray = \"#BDC3C7\",\n    champion_gold = \"#D4AF37\"\n  )\n)\n\n### |- titles and caption ----\ntitle_text <- \"Bob's Burgers: The Fart Report\"\n\nsubtitle_text <- str_glue(\n  \"{comma(total_farts)} fart mentions across {total_seasons} seasons of transcript data (yes, we counted!)\"\n)\n\ncaption_text <- create_standalone_caption(                       \n  source_text = \"{ bobsburgersR } v0.2.0 (transcripts)\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(\n      face = \"bold\", family = fonts$title, size = rel(1.4),        \n      color = colors$title, margin = margin(b = 10), hjust = 0\n    ),\n    plot.subtitle = element_text(\n      face = \"italic\", family = fonts$subtitle, lineheight = 1.2,\n      color = colors$subtitle, size = rel(0.85), margin = margin(b = 20), hjust = 0    \n    ),\n    \n    # Grid\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\", linewidth = 0.25),\n    \n    # Axes\n    axis.title = element_text(size = rel(0.8), color = \"gray30\"),\n    axis.text = element_text(color = \"gray30\"),\n    axis.text.y = element_text(size = rel(0.85)),\n    axis.ticks = element_blank(),\n    \n    # Facets\n    strip.background = element_rect(fill = \"gray95\", color = NA),\n    strip.text = element_text(\n      face = \"bold\",\n      color = \"gray20\",\n      size = rel(0.9),\n      margin = margin(t = 6, b = 4)\n    ),\n    panel.spacing = unit(1.5, \"lines\"),\n    \n    # Legend elements\n    legend.position = \"plot\",\n    legend.title = element_text(\n      family = fonts$subtitle,\n      color = colors$text, size = rel(0.8), face = \"bold\"\n    ),\n    legend.text = element_text(\n      family = fonts$tsubtitle,\n      color = colors$text, size = rel(0.7)\n    ),\n    legend.margin = margin(t = 15),\n    \n    # Plot margin\n    plot.margin = margin(10, 20, 10, 20),\n    \n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### [6. Plot]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n# P1: The Fart Lexicon \np1 <- ggplot(fart_lexicon, aes(x = variant, y = n)) +\n  geom_col(width = 0.6, fill = colors$palette$mustard) +\n  geom_text(\n    aes(label = glue(\"{n}\\n({percent(pct, 1)})\")),\n    vjust = -0.3,\n    size = 3.5,\n    fontface = \"bold\",\n    color = colors$palette$black,\n    lineheight = 0.9\n  ) +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.3))) +\n  labs(\n    title = \"The Fart Lexicon\",\n    subtitle = \"How the Belchers conjugate 'fart'\",\n    x = NULL,\n    y = NULL\n  ) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.major.y = element_line(color = \"#EEEEEE\"),\n    axis.text.x = element_text(size = 10, face = \"bold\"),\n    axis.text.y = element_blank()\n  )\n\n# P2: Fastest to Fart \np2 <- ggplot(fastest_to_fart, aes(x = label, y = first_fart_line)) +\n  geom_col(width = 0.7, fill = colors$palette$teal) +\n  geom_text(\n    aes(label = glue(\"Line {first_fart_line}\")),\n    hjust = -0.1,\n    size = 3,\n    color = colors$palette$black\n  ) +\n  coord_flip() +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.25))) +\n  labs(\n    title = \"Fastest to Fart\",\n    subtitle = \"Episodes that waste no time\",\n    x = NULL,\n    y = \"Line number of first fart\"\n  ) +\n  theme(\n    panel.grid.major.y = element_blank(),\n    axis.text.y = element_text(size = rel(0.85)),\n    axis.title.x = element_text(margin = margin(t = 8)),\n    plot.margin = margin(8, 14, 6, 10)\n  )\n\n\n# P3: The Fartiest Episodes \np3 <- ggplot(fartiest_episodes, aes(x = label, y = fart_count)) +\n  geom_col(\n    aes(fill = is_champion),\n    width = 0.7,\n    show.legend = FALSE\n  ) +\n  geom_text(\n    aes(\n      label = if_else(is_champion, glue(\"{fart_count} â˜…\"), as.character(fart_count)),\n      fontface = if_else(is_champion, \"bold\", \"plain\")\n    ),\n    hjust = -0.3,\n    size = 3.5,\n    color = colors$palette$black\n  ) +\n  coord_flip() +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.18))) +\n  scale_fill_manual(\n    values = c(\"FALSE\" = colors$palette$burger_red,\n               \"TRUE\" = colors$palette$champion_gold)\n  ) +\n  labs(\n    title = \"The Fartiest Episodes\",\n    subtitle = \"Episodes with the most fart references\",\n    x = NULL,\n    y = \"Fart mentions\"\n  ) +\n  theme(\n    panel.grid.major.y = element_blank(),\n    axis.text.y = element_text(size = rel(0.85)),\n    axis.title.x = element_text(margin = margin(t = 8)),\n    plot.margin = margin(8, 14, 6, 10)\n  )\n\n# Combine: Final Layout\ncombined_plot <- p1 / (p2 | p3) +\n  plot_layout(heights = c(0.8, 2))\n\ncombined_plot <- combined_plot +\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n  theme = theme(\n    plot.title = element_text(\n      size = rel(2.14),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      lineheight = 1.15,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_text(\n      size = rel(1.0),\n      family = fonts$subtitle,\n      color = colors$subtitle,\n      lineheight = 1.5,\n      margin = margin(t = 5, b = 15)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.65),\n      family = fonts$subtitle,\n      color = colors$caption,\n      hjust = 0,\n      lineheight = 1.4,\n      margin = margin(t = 20, b = 5)\n    ),\n    plot.margin = margin(12, 18, 10, 18)\n  )\n)\n```\n````\n:::\n\n\n#### [7. Save]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot_patchwork(\n  plot = combined_plot, \n  type = \"standalone\", \n  year = 2026,\n  width  = 14,\n  height = 10,\n  )\n```\n````\n:::\n\n\n#### [8. Session Info]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1         bobsburgersR_0.2.0 patchwork_1.3.0    glue_1.8.0        \n [5] scales_1.3.0       skimr_2.1.5        janitor_2.2.0      showtext_0.9-7    \n [9] showtextdb_3.0     sysfonts_0.8.9     ggtext_0.1.2       lubridate_1.9.3   \n[13] forcats_1.0.0      stringr_1.5.1      dplyr_1.1.4        purrr_1.0.2       \n[17] readr_2.1.5        tidyr_1.3.1        tibble_3.2.1       ggplot2_3.5.1     \n[21] tidyverse_2.0.0    pacman_0.5.1      \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       xfun_0.49          htmlwidgets_1.6.4  tzdb_0.5.0        \n [5] yulab.utils_0.1.8  vctrs_0.6.5        tools_4.4.0        generics_0.1.3    \n [9] curl_6.0.0         gifski_1.32.0-1    fansi_1.0.6        pkgconfig_2.0.3   \n[13] ggplotify_0.1.2    lifecycle_1.0.4    compiler_4.4.0     farver_2.1.2      \n[17] munsell_0.5.1      repr_1.1.7         codetools_0.2-20   snakecase_0.11.1  \n[21] htmltools_0.5.8.1  yaml_2.3.10        pillar_1.9.0       camcorder_0.1.0   \n[25] magick_2.8.5       commonmark_1.9.2   tidyselect_1.2.1   digest_0.6.37     \n[29] stringi_1.8.4      labeling_0.4.3     rsvg_2.6.1         rprojroot_2.0.4   \n[33] fastmap_1.2.0      grid_4.4.0         colorspace_2.1-1   cli_3.6.4         \n[37] magrittr_2.0.3     base64enc_0.1-3    utf8_1.2.4         withr_3.0.2       \n[41] timechange_0.3.0   rmarkdown_2.29     hms_1.1.3          evaluate_1.0.1    \n[45] knitr_1.49         markdown_1.13      gridGraphics_0.5-1 rlang_1.1.6       \n[49] gridtext_0.1.5     Rcpp_1.0.13-1      xml2_1.3.6         renv_1.0.3        \n[53] svglite_2.1.3      rstudioapi_0.17.1  jsonlite_1.8.9     R6_2.5.1          \n[57] fs_1.6.5           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n:::\n\n#### [9. GitHub Repository]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`sa_2026-01-22.qmd`](https://github.com/poncest/personal-website/blob/master/projects/standalone_visualizations/sa_2026-01-22.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### [10. References]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n1.  **Data Source:**\n    -   bobsburgersR R Package v0.2.0: [GitHub Repository](https://github.com/poncest/bobsburgersR)\n    -   Transcript Data: [Springfield! Springfield!](https://www.springfieldspringfield.co.uk/episode_scripts.php?tv-show=bobs-burgers)\n2.  **Bob's Burgers:**\n    -   Official Show Page: [FOX - Bob's Burgers](https://www.fox.com/bobs-burgers/)\n    -   Wikipedia: [Bob's Burgers Episode List](https://en.wikipedia.org/wiki/List_of_Bob%27s_Burgers_episodes)\n:::\n\n\n#### [11. Custom Functions Documentation]{.smallcaps}\n\n::: {.callout-note collapse=\"true\"}\n##### ðŸ“¦ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}