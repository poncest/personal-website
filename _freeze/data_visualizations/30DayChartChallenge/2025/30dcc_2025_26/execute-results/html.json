{
  "hash": "ec51c159cd72aa06323ecf5500a87b6b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Uncertainty in Cardiovascular Disease Prevalence Across the U.S.\"\nsubtitle: \"95% confidence intervals for states and territories reveal varying levels of statistical precision (CDC, 2023)\"\ndescription: \"A visualization of cardiovascular disease prevalence across U.S. states and territories, highlighting statistical uncertainty through confidence intervals. This chart demonstrates how sample sizes affect the precision of health statistics, with wider intervals indicating less certainty in the estimate.\"\ndate: \"2025-04-26\" \ncategories: [\"30DayChartChallenge\", \"Data Visualization\", \"R Programming\", \"2025\"]\ntags: [\n\"uncertainty\",\n\"public health\",\n\"confidence intervals\",\n\"cardiovascular disease\",\n\"CDC\",\n\"BRFSS\",\n\"statistical precision\",\n\"monochrome\",\n\"ggplot2\",\n\"epidemiology\"\n  ]\nimage: \"thumbnails/30dcc_2025_26.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\nfilters:\n  - social-share\nshare:\n  permalink: \"https://stevenponce.netlify.app/data_visualizations/30DayChartChallenge/2025/30dcc_2025_26.html\"\n  description: \"Day 26 of #30DayChartChallenge: Uncertainty in Cardiovascular Disease Prevalence. This visualization shows how confidence intervals reveal varying levels of statistical precision in public health data across U.S. states and territories. #dataviz #rstats #publichealth\"\n  twitter: true\n  linkedin: true\n  email: true\n  facebook: false\n  reddit: false\n  stumble: false\n  tumblr: false\n  mastodon: true\n  bsky: true\n---\n\n\n\n![A dot plot showing cardiovascular disease prevalence across U.S. states and territories with 95% confidence intervals. States are ordered vertically from highest to lowest prevalence (West Virginia at 6.7% to Virgin Islands at 1.4%). Each state/territory has a dot showing its estimate and a horizontal line extending from the dot showing the confidence interval range. A vertical dashed line marks the national median of 4.0%. The visualization demonstrates how statistical uncertainty varies, with some regions having wider confidence intervals than others.](30dcc_2025_26.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\npacman::p_load(\n  tidyverse,      # Easily Install and Load the 'Tidyverse'\n  ggtext,         # Improved Text Rendering Support for 'ggplot2'\n  showtext,       # Using Fonts More Easily in R Graphs\n  janitor,        # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,          # Compact and Flexible Summaries of Data\n  scales,         # Scale Functions for Visualization\n  lubridate,      # Make Dealing with Dates a Little Easier\n  ggrepel,        # Automatically Position Non-Overlapping Text Labels with 'ggplot2'\n  camcorder       # Record Your Plot History\n  )\n})\n\n### |- figure size ----\ngg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  = 8,\n    height = 10,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n:::\n\n\n\n#### 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncdc_prevalence_cardiovascular_disease <- read_csv(\n  here::here(\n    \"data/Behavioral_Risk_Factor_Surveillance_System__BRFSS__Prevalence_Data__2011_to_present__20250409.csv\")) |> \n  clean_names()\n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(cdc_prevalence_cardiovascular_disease)\nskim(cdc_prevalence_cardiovascular_disease)\n```\n:::\n\n\n\n#### 4. Tidy Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |- Tidy ----\n# Prepare state-level data\nstate_cvd <- cdc_prevalence_cardiovascular_disease |>\n  filter(year == 2023) |>\n  filter(break_out == \"Overall\" | is.na(break_out)) |>\n  filter(\n    str_detect(locationdesc, \"^[A-Z]\") & \n      !str_detect(locationdesc, \"median|Median|average|Average\")\n  ) |>\n  select(\n    location = locationdesc,\n    prevalence = data_value,\n    lower_bound = confidence_limit_low,\n    upper_bound = confidence_limit_high,\n    sample_size,\n    year\n  ) |>\n  mutate(\n    ci_width = upper_bound - lower_bound,\n    location = str_replace(location, \" State$\", \"\"),\n    location = fct_reorder(location, prevalence)\n  ) |>\n  filter(!is.na(prevalence))\n\n# Get national median estimate (US-level)\nus_median <- cdc_prevalence_cardiovascular_disease |>\n  filter(year == 2023, break_out == \"Overall\", locationabbr == \"US\") |> \n  pull(data_value)\n```\n:::\n\n\n\n#### 5. Visualization Parameters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = c(\n    \"black\", \"gray40\", \"gray50\", \"gray70\", \"gray95\", \"white\", \"gray40\"\n    )\n  )\n\n### |-  titles and caption ----\n# text\ntitle_text    <- str_wrap(\"Uncertainty in Cardiovascular Disease Prevalence Across the U.S.\",\n                          width = 70) \n\nsubtitle_text <- str_wrap(\"95% confidence intervals for states and territories reveal varying levels of statistical precision (CDC, 2023)\",\n                          width = 80)\n\ncaption_text <- create_dcc_caption(\n  dcc_year = 2025,\n  dcc_day = 26,\n  source_text =  \"CDC’s Behavioral Risk Factor Surveillance System (BRFSS)\" \n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    \n    # Text styling \n    plot.title = element_text(face = \"bold\", family = fonts$title, size = rel(1.14), margin = margin(b = 10)),\n    plot.subtitle = element_text(family = fonts$subtitle, color = colors$text, size = rel(0.78), margin = margin(b = 20)),\n    \n    # Axis elements\n    axis.text = element_text(color = colors$text, size = rel(0.7)),\n    axis.title.y = element_blank(),\n    axis.title.x = element_text(color = colors$text, size = rel(0.8), \n                                hjust = 0.5, margin = margin(t = 10)),\n    \n    axis.line.x = element_line(color = \"gray50\", linewidth = .2),\n    \n    # Grid elements\n    panel.grid.minor.x = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.y = element_line(color = \"gray65\", linewidth = 0.05),\n    panel.grid.major.x = element_line(color = \"gray65\", linewidth = 0.05),\n    \n    # Plot margins \n    plot.background = element_rect(fill = colors$palette[6], color = colors$palette[6]),\n    panel.background = element_rect(fill = colors$palette[6], color = colors$palette[6]),\n    plot.margin = margin(t = 10, r = 20, b = 10, l = 20),\n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n:::\n\n\n\n#### 6. Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  Plot ----\np <- ggplot(state_cvd, aes(x = prevalence, y = location)) +\n  # Geoms\n  geom_segment(\n    aes(x = lower_bound, xend = upper_bound, yend = location),\n    color = colors$palette[4], linewidth = 0.9, alpha = 0.9\n  ) +\n  geom_point(\n    size = 3, color = colors$palette[1], \n    fill = colors$palette[1],\n  ) +\n  geom_text(\n    aes(x = upper_bound, label = sprintf(\"%.1f%% [%.1f–%.1f]\", prevalence, lower_bound, upper_bound)),\n    nudge_x = 0.25, hjust = 0, vjust = 0.3, size = 2.7, color = colors$palette[2]\n  ) +\n  geom_vline(\n    xintercept = us_median, color = colors$palette[2], \n    linetype = \"dashed\", linewidth = 0.5\n  ) + \n  # Annotate\n  annotate(\n    \"text\", x = us_median, y = 44, \n    label = sprintf(\"National median: %.1f%%\", us_median),\n    hjust = 0, vjust = -1, size = 3, color = colors$palette[1], \n    fontface = \"italic\", angle = 90\n  ) +\n  # Scales\n  scale_x_continuous(\n    limits = c(0, max(state_cvd$upper_bound) + 0.7),\n    labels = label_percent(scale = 1, suffix = \"%\"),\n    breaks = seq(0, 8, by = 2),\n    expand = expansion(mult = c(0.01, 0.1))\n  ) +\n  scale_y_discrete(\n    expand = expansion(mult = c(0.01, 0.02))\n  ) +\n  # Labs\n  labs(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    x = \"Cardiovascular Disease Prevalence (%)\",\n    y = NULL\n  ) +\n  # Theme\n  theme(\n    plot.title = element_text(\n      size = rel(1.45),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_text(\n      size = rel(0.95),\n      family = fonts$subtitle,\n      color = colors$subtitle,\n      lineheight = 1.1,\n      margin = margin(t = 5, b = 14)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.65),\n      family = fonts$caption,\n      color = colors$caption,\n      lineheight = 0.65,\n      hjust = 0.5,\n      halign = 0.5,\n      margin = margin(t = 10, b = 5)\n    ),\n  ) \n```\n:::\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \nsave_plot(\n  p, \n  type = \"30daychartchallenge\", \n  year = 2025, \n  day = 26, \n  width = 8, \n  height = 10\n  )\n```\n:::\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      camcorder_0.1.0 hoopR_2.1.0     ggrepel_0.9.6  \n [5] scales_1.3.0    skimr_2.1.5     janitor_2.2.0   showtext_0.9-7 \n [9] showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2    lubridate_1.9.3\n[13] forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2    \n[17] readr_2.1.5     tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1  \n[21] tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.1    farver_2.1.2        fastmap_1.2.0      \n [4] pacman_0.5.1        promises_1.3.0      digest_0.6.37      \n [7] timechange_0.3.0    lifecycle_1.0.4     rsvg_2.6.1         \n[10] processx_3.8.4      magrittr_2.0.3      compiler_4.4.0     \n[13] rlang_1.1.6         tools_4.4.0         utf8_1.2.4         \n[16] yaml_2.3.10         data.table_1.16.2   knitr_1.49         \n[19] labeling_0.4.3      htmlwidgets_1.6.4   curl_6.0.0         \n[22] xml2_1.3.6          repr_1.1.7          websocket_1.4.2    \n[25] withr_3.0.2         grid_4.4.0          fansi_1.0.6        \n[28] colorspace_2.1-1    future_1.34.0       globals_0.16.3     \n[31] cli_3.6.4           rmarkdown_2.29      ragg_1.3.3         \n[34] generics_0.1.3      RcppParallel_5.1.10 rstudioapi_0.17.1  \n[37] httr_1.4.7          tzdb_0.5.0          commonmark_1.9.2   \n[40] chromote_0.4.0      rvest_1.0.4         parallel_4.4.0     \n[43] base64enc_0.1-3     vctrs_0.6.5         jsonlite_1.8.9     \n[46] hms_1.1.3           listenv_0.9.1       systemfonts_1.1.0  \n[49] magick_2.8.5        glue_1.8.0          parallelly_1.43.0  \n[52] gifski_1.32.0-1     codetools_0.2-20    ps_1.8.1           \n[55] stringi_1.8.4       gtable_0.3.6        later_1.3.2        \n[58] munsell_0.5.1       furrr_0.3.1         pillar_1.9.0       \n[61] htmltools_0.5.8.1   R6_2.5.1            textshaping_0.4.0  \n[64] rprojroot_2.0.4     evaluate_1.0.1      markdown_1.13      \n[67] gridtext_0.1.5      snakecase_0.11.1    renv_1.0.3         \n[70] Rcpp_1.0.13-1       svglite_2.1.3       xfun_0.49          \n[73] pkgconfig_2.0.3    \n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`30dcc_2025_26.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2025/30dcc_2025_26.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n\n#### 10. References\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1. Data Sources:\n   - CDC’s Behavioral Risk Factor Surveillance System (BRFSS) [BRFSS: Prevalence of Cardiovascular Disease](https://data.cdc.gov/Behavioral-Risk-Factors/BRFSS-Graph-of-Current-Prevalence-of-Cardiovascula/gfhd-2f5y)\n  \n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}