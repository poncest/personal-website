{
  "hash": "750fccb2a432f318b083ade8a0ec5520",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"THE HIDDEN UNCERTAINTY\"\nsubtitle: \"Mapping measurement challenges in Alaska's vanishing glaciers\"\ndescription: \"An exploration of measurement uncertainty in Alaska's glaciers from 1946-2023, visualized in National Geographic style. This visualization reveals how distance from observation points, glacier size, and remote locations contribute to measurement challenges in tracking glacier changes across different Alaskan regions.\"\ndate: \"2025-04-30\" \ncategories: [\"30DayChartChallenge\", \"Data Visualization\", \"R Programming\", \"2025\"]\ntags: [\n\"Uncertainties\",\n\"National Geographic\", \n\"Glaciers\",\n\"Climate Science\",\n\"Spatial Analysis\",\n\"Error Estimation\",\n\"ggplot2\",\n\"Alaska\",\n\"Scientific Visualization\",\n\"Environmental Data\"\n  ]\nimage: \"thumbnails/30dcc_2025_30.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\nfilters:\n  - social-share\nshare:\n  permalink: \"https://stevenponce.netlify.app/data_visualizations/30DayChartChallenge/2025/30dcc_2025_30.html\"\n  description: \"Day 30 of #30DayChartChallenge: Visualizing the hidden uncertainty in Alaska's glacier measurements with National Geographic styling #DataViz #RStats #ClimateScience\"\n  twitter: true\n  linkedin: true\n  email: true\n  facebook: false\n  reddit: false\n  stumble: false\n  tumblr: false\n  mastodon: true\n  bsky: true\n---\n\n\n\n![A map showing uncertainty in Alaska glacier measurements. Three distinct regions of glaciers are labeled, with colors ranging from yellow (low uncertainty) to purple (high uncertainty). An information box explains that uncertainty is affected by distance from observation points, glacier size, and remote locations. The visualization has the distinctive yellow border of National Geographic style.](30dcc_2025_30.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\npacman::p_load(\n  tidyverse,          # Easily Install and Load the 'Tidyverse'\n  ggtext,             # Improved Text Rendering Support for 'ggplot2'\n  showtext,           # Using Fonts More Easily in R Graphs\n  janitor,            # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,              # Compact and Flexible Summaries of Data\n  scales,             # Scale Functions for Visualization\n  lubridate,          # Make Dealing with Dates a Little Easier\n  ggdist,             # Visualizations of Distributions and Uncertainty \n  sf,                 # Simple Features for R\n  rnaturalearth,      # World Map Data from Natural Earth\n  rnaturalearthdata,  # World Vector Map Data from Natural Earth Used in 'rnaturalearth'\n  viridis,            # Colorblind-Friendly Color Maps for R\n  ggnewscale,         # Multiple Fill and Colour Scales in 'ggplot2'\n  ggrepel,            # Automatically Position Non-Overlapping Text Labels with 'ggplot2'\n  camcorder       # Record Your Plot History\n  )\n})\n\n### |- figure size ----\ngg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  = 10,\n    height = 10,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n:::\n\n\n\n#### 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nalaska_combined <- readRDS(\n  here::here(\n    \"data/30DayChartChallenge/2025/alaska_combined_data.rds\")) |> \n  clean_names() \n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(alaska_combined)\nskim(alaska_combined)\n```\n:::\n\n\n\n#### 4. Prep Data\n> For the data preparation step, refer to the [`data_preparation.R`](https://github.com/poncest/30DayChartChallenge/blob/main/2025/day_30/data_preparation.R) file in my GitHub repository.\n\n\n\n#### 4.1 Tidy Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |- Tidy ----\n# Base map data\nworld <- ne_countries(scale = \"medium\", returnclass = \"sf\")\nalaska_bounds <- st_bbox(c(\n  xmin = -170, ymin = 55, xmax = -130, ymax = 70), crs = st_crs(4326)\n  )\n\n# Calculate average error per glacier over all years \nglacier_avg_error <- alaska_combined |>\n  group_by(rgi_id, region, cen_lon, cen_lat, area) |>\n  summarize(\n    mean_error = mean(error_estimate, na.rm = TRUE),\n    mean_dist = mean(mean_dist_gla_anom, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n# Convert to SF for mapping\nglacier_error_sf <- glacier_avg_error |>\n  st_as_sf(coords = c(\"cen_lon\", \"cen_lat\"), crs = 4326)\n\n# Define regions \nregion_points <- tibble(\n  region_id = c(\"Region 1\", \"Region 2\", \"Region 3\"),          \n  lon = c(-166, -142, -158),\n  lat = c(56.5, 62, 69),\n  color = c(\"gray20\", \"gray20\", \"gray20\")  \n)\n\n# Convert to SF for plotting\nregion_points_sf <- st_as_sf(\n  region_points, coords = c(\"lon\", \"lat\"), crs = 4326\n  )\n\n# Create informational box \n# Extract uncertainty statistics\nuncertainty_stats <- glacier_avg_error |>\n  summarize(\n    mean_error = mean(mean_error, na.rm = TRUE),\n    max_error = max(mean_error, na.rm = TRUE),\n    min_error = min(mean_error, na.rm = TRUE),\n    glacier_count = n()\n  )\n\n# Textbox\ninfo_box_text <- paste0(\n  \"UNCERTAINTY FACTORS\\n\\n\",\n  \"• Distance from observation points\\n\",\n  \"• Small glaciers (<1 km²)\\n\",\n  \"• Remote mountain locations\\n\",\n  \"• Avg. measurement error: \", round(uncertainty_stats$mean_error, 2), \" m w.e.\\n\",\n  \"• Total glaciers: \", uncertainty_stats$glacier_count\n)\n```\n:::\n\n\n\n#### 5. Visualization Parameters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = c(\n    \"water\" = \"#71ABD8\",       \n    \"land\" = \"#E8E6D9\",       \n    \"glacier\" = \"#D1E6EC\",     \n    \"highlight\" = \"#FFCD00\",   \n    \"text\" = \"#000000\",        \n    \"uncertainty\" = \"#8BB9DD\", \n    \"dark_blue\" = \"#1A5088\",   \n    \"text_gray\" = \"#555555\"    \n    )\n  )          \n \n### |-  titles and caption ----\n# text\ntitle_text    <- str_glue(\"THE HIDDEN UNCERTAINTY\")\n\nsubtitle_text <- str_glue(\"Mapping measurement challenges in Alaska's vanishing glaciers\\n\n                          Color indicates average error estimate magnitude (1946-2023)\")\n\ncaption_text <- create_dcc_caption(\n  dcc_year = 2025,\n  dcc_day = 30,\n  source_text =  \"World Glacier Monitoring Service\" \n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# National Geographic theme (at least my interpretation)\ntheme_natgeo <- function() {\n  theme_minimal(base_size = 14) +\n    theme(\n      # Text elements\n      plot.title = element_text(face = \"bold\", size = 20, family = \"sans\"),\n      plot.subtitle = element_text(size = 14, family = \"sans\", margin = margin(b = 20)),\n      axis.title = element_text(face = \"bold\", size = 10),\n      legend.title = element_text(face = \"bold\", size = 10),\n      \n      # Grid elements\n      panel.grid.major = element_line(color = \"gray90\", size = 0.2),\n      panel.grid.minor = element_blank(),\n      \n      # Background elements\n      plot.background = element_rect(fill = \"white\", color = NA),\n      panel.background = element_rect(fill = \"white\", color = NA),\n      \n      # Margins and spacing\n      plot.margin = margin(20, 20, 20, 20),\n      legend.margin = margin(10, 10, 10, 10),\n      \n      # Caption styling\n      plot.caption = element_text(size = 9, hjust = 0, color = colors$palette[\"text_gray\"], \n                                  margin = margin(t = 15))\n    )\n}\n```\n:::\n\n\n\n#### 6. Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  Plot ----\n# Main map -----\nmain_map <- ggplot() +\n  # Base map\n  geom_sf(data = world, fill = colors$palette['land'], color = \"gray70\") +\n  \n  # Geoms\n  geom_sf(\n    data = glacier_error_sf, \n    aes(size = area, color = mean_error),\n    alpha = 0.8\n    ) +\n  geom_label(\n    data = region_points_sf,\n    aes(geometry = geometry, label = region_id),\n    stat = \"sf_coordinates\",\n    fill = \"white\",\n    color = region_points$color, \n    fontface = \"bold\",\n    size = 4,\n    label.padding = unit(0.4, \"lines\"),\n    label.r = unit(0.15, \"lines\"),\n    alpha = 0.9,\n    label.size = 0.8  \n  ) +\n  # Scales\n  scale_color_viridis_c(\n    name = \"Mean Error\\nEstimate (m w.e.)\",\n    option = \"plasma\",\n    direction = -1,\n    guide = guide_colorbar(\n      title.position = \"top\",\n      barwidth = 12,\n      barheight = 1\n    )\n  ) +\n  scale_size_continuous(\n    name = \"Glacier Area (km²)\",\n    range = c(0.1, 3.5),\n    breaks = c(1, 10, 100, 1000),\n    trans = \"log10\",\n    labels = label_comma(),\n    guide = guide_legend(\n      title.position = \"top\",\n      override.aes = list(color = colors$palette[\"dark_blue\"])\n    )\n  ) +\n  coord_sf(  # Alaska region\n    xlim = c(alaska_bounds$xmin, alaska_bounds$xmax), \n    ylim = c(alaska_bounds$ymin, alaska_bounds$ymax)\n  ) +\n  # Labs\n  labs(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    x = NULL,\n    y = NULL\n  ) +\n  # Theme\n  theme_natgeo() +\n  theme(\n\n    legend.position = \"bottom\",\n    legend.box = \"horizontal\",\n    legend.direction = \"horizontal\",\n    legend.spacing.x = unit(1, \"cm\"),\n    legend.box.spacing = unit(0.5, \"cm\"),\n    legend.key.size = unit(0.8, \"cm\"),\n\n    plot.title = element_text(\n      size = rel(2.6),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.90),\n      family = fonts$subtitle,\n      color = colors$subtitle,\n      lineheight = 0.8,\n      margin = margin(t = 5, b = 20)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.65),\n      family = fonts$caption,\n      color = colors$caption,\n      lineheight = 0.65,\n      hjust = 0.5,\n      halign = 0.5,\n      margin = margin(t = 10, b = 5)\n    ),\n  )\n\n# Info textbox -----\ninfo_box <- ggplot() +\n  annotate(\n    \"rect\",\n    xmin = 0, xmax = 1, ymin = 0, ymax = 1,\n    fill = alpha(colors$palette[\"highlight\"], 0.08)\n  ) +\n  annotate(\n    \"text\",\n    x = 0.05, y = 0.5,\n    label = info_box_text,\n    hjust = 0, vjust = 0.5,\n    size = 3.2,  \n    fontface = \"plain\",\n    color = colors$palette[\"text\"]\n  ) +\n  annotate(\n    \"rect\",\n    xmin = 0, xmax = 1, ymin = 0, ymax = 1,\n    fill = NA, color = alpha(colors$palette[\"highlight\"], 0.5),\n    linewidth = 1\n  ) +\n  theme_void() +\n  xlim(0, 1) + ylim(0, 1)\n\n# Combine main map and info box -----\ncombined_map <- main_map +\n  annotation_custom(\n    grob = ggplotGrob(info_box),\n    xmin = -143, xmax = -128,  \n    ymin = 62.5, ymax = 68.5     \n  )\n\n# Final map -----\nfinal_map <- combined_map +\n  theme(\n    plot.background = element_rect(\n      fill = \"white\", \n      color = colors$palette[\"highlight\"], \n      linewidth = 5\n    )\n  )\n```\n:::\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \nsave_plot(\n  final_map, \n  type = \"30daychartchallenge\", \n  year = 2025, \n  day = 30, \n  width = 10, \n  height = 10\n  )\n```\n:::\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1              camcorder_0.1.0         ggrepel_0.9.6          \n [4] ggnewscale_0.5.1        viridis_0.6.5           viridisLite_0.4.2      \n [7] rnaturalearthdata_1.0.0 rnaturalearth_1.0.1     sf_1.0-19              \n[10] ggdist_3.3.2            scales_1.3.0            skimr_2.1.5            \n[13] janitor_2.2.0           showtext_0.9-7          showtextdb_3.0         \n[16] sysfonts_0.8.9          ggtext_0.1.2            lubridate_1.9.3        \n[19] forcats_1.0.0           stringr_1.5.1           dplyr_1.1.4            \n[22] purrr_1.0.2             readr_2.1.5             tidyr_1.3.1            \n[25] tibble_3.2.1            ggplot2_3.5.1           tidyverse_2.0.0        \n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.1     farver_2.1.2         fastmap_1.2.0       \n [4] pacman_0.5.1         digest_0.6.37        timechange_0.3.0    \n [7] lifecycle_1.0.4      rsvg_2.6.1           terra_1.7-83        \n[10] magrittr_2.0.3       compiler_4.4.0       rlang_1.1.6         \n[13] tools_4.4.0          utf8_1.2.4           yaml_2.3.10         \n[16] knitr_1.49           labeling_0.4.3       htmlwidgets_1.6.4   \n[19] curl_6.0.0           classInt_0.4-10      xml2_1.3.6          \n[22] repr_1.1.7           KernSmooth_2.23-22   withr_3.0.2         \n[25] grid_4.4.0           fansi_1.0.6          e1071_1.7-16        \n[28] colorspace_2.1-1     cli_3.6.4            rmarkdown_2.29      \n[31] ragg_1.3.3           generics_0.1.3       rstudioapi_0.17.1   \n[34] httr_1.4.7           tzdb_0.5.0           commonmark_1.9.2    \n[37] DBI_1.2.3            proxy_0.4-27         base64enc_0.1-3     \n[40] vctrs_0.6.5          jsonlite_1.8.9       hms_1.1.3           \n[43] systemfonts_1.1.0    magick_2.8.5         units_0.8-5         \n[46] glue_1.8.0           gifski_1.32.0-1      codetools_0.2-20    \n[49] distributional_0.5.0 stringi_1.8.4        gtable_0.3.6        \n[52] munsell_0.5.1        pillar_1.9.0         htmltools_0.5.8.1   \n[55] R6_2.5.1             textshaping_0.4.0    rprojroot_2.0.4     \n[58] evaluate_1.0.1       markdown_1.13        gridtext_0.1.5      \n[61] snakecase_0.11.1     renv_1.0.3           class_7.3-22        \n[64] Rcpp_1.0.13-1        svglite_2.1.3        gridExtra_2.3       \n[67] xfun_0.49            pkgconfig_2.0.3     \n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`30dcc_2025_30.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2025/30dcc_2025_30.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n\n#### 10. References\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1. Data Sources:\n   -  Dussaillant, I., Hugonnet, R., Huss, M., Berthier, E., Bannwart, J., Paul, F., and Zemp, M. (2025): Annual mass-change estimates for the world’s glaciers. [glacier time series and gridded data products.](https://doi.org/10.5904/wgms-amce-2025-02)\n  \n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}