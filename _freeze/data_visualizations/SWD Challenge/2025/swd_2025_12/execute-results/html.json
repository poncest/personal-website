{
  "hash": "0d3683a62dfbe463a567980002534088",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The Race to 500 Home Runs\"\nsubtitle: \"McGwire was fastest (1,688 games) but linked to PED use. Babe Ruth holds the fastest clean record at 1,790 games, while Eddie Murray needed 2,971 games.\"\ndescription: \"A cumulative line chart visualizing the path to 500 career home runs for all 28 members of baseball's elite club. This SWD challenge entry demonstrates the 'less is better' principleâ€”where fewer games represents superior performanceâ€”by highlighting the fastest (McGwire), fastest clean (Ruth), and slowest (Murray) trajectories.\"\nauthor: \"Steven Ponce\"\ndate: \"2025-12-01\" \ncategories: [\"SWDchallenge\", \"Data Visualization\", \"R Programming\", \"2025\"]\ntags: [\n  \"less-is-better\",\n  \"cumulative-line-chart\",\n  \"baseball\",\n  \"500-home-run-club\",\n  \"Lahman-database\",\n  \"milestone-analysis\",\n  \"sports-visualization\",\n  \"ggplot2\"\n]\nimage: \"thumbnails/swd_2025_12.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                          \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n### Challenge\n\nThis monthâ€™s challenge asks you to create a visual where lower values represent better performance or outcomes. Whether it's time, cost, risk, or something else, your goal is to make it immediately clear that less is the win.\n\nAdditional information can be found [HERE](https://community.storytellingwithdata.com/challenges/dec-2025-when-less-is-better)\n\n### Visualization\n\n![Line chart showing the cumulative home run trajectories for all 28 members of baseball's 500 Home Run Club. Three players are highlighted: Mark McGwire in red reached 500 HR fastest at 1,688 games but is linked to PED use; Babe Ruth in dark blue holds the fastest clean record at 1,790 games; Eddie Murray in teal took the longest at 2,971 games. The remaining 25 players appear as gray lines, illustrating a spread of roughly 1,300 games between the fastest and slowest paths to the milestone.](swd_2025_12.png){#fig-4}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n  tidyverse,   # Easily Install and Load the 'Tidyverse'\n  ggtext,      # Improved Text Rendering Support for 'ggplot2'\n  showtext,    # Using Fonts More Easily in R Graphs\n  janitor,     # Simple Tools for Examining and Cleaning Dirty Data\n  scales,      # Scale Functions for Visualization\n  glue,        # Interpreted String Literals\n  Lahman       # Sean 'Lahman' Baseball Database\n) \n\n### |- figure size ---- \ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  = 10,\n  height = 8,\n  units  = \"in\",\n  dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### 2. Read in the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n\nbatting_raw <- Lahman::Batting\npeople_raw  <- Lahman::People\n\n### |- PED-linked players (Source: ESPN - The Steroids Era) ----\n# https://www.espn.com/mlb/topics/_/page/the-steroids-era\n# \"Of the 10 players [who reached 500 HR between 1998-2009], six -- Barry Bonds, \n# Alex Rodriguez, Mark McGwire, Manny Ramirez, Rafael Palmeiro and Gary Sheffield \n# -- have been linked to PEDs.\"\n# Sammy Sosa added based on leaked 2003 test results\n\nped_players <- c(\n  \"Mark McGwire\",\n  \"Barry Bonds\",\n  \"Alex Rodriguez\",\n  \"Sammy Sosa\",\n  \"Manny Ramirez\",\n  \"Rafael Palmeiro\",\n  \"Gary Sheffield\"\n)\n```\n````\n:::\n\n\n#### 3. Examine the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(batting_raw)\nglimpse(people_raw)\n```\n````\n:::\n\n\n#### 4. Tidy Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n\ncareer_hr <- batting_raw |>\n  group_by(playerID) |>\n  summarize(\n    career_HR = sum(HR, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  filter(career_HR >= 500) |>\n  left_join(\n    people_raw |> select(playerID, nameFirst, nameLast),\n    by = \"playerID\"\n  ) |>\n  mutate(player_name = paste(nameFirst, nameLast)) |>\n  arrange(desc(career_HR))\n\ncumulative_stats <- batting_raw |>\n  filter(playerID %in% career_hr$playerID) |>\n  group_by(playerID, yearID) |>\n  summarize(\n    season_HR = sum(HR, na.rm = TRUE),\n    season_G  = sum(G, na.rm = TRUE),\n    .groups   = \"drop\"\n  ) |>\n  arrange(playerID, yearID) |>\n  group_by(playerID) |>\n  mutate(\n    cumulative_HR = cumsum(season_HR),\n    cumulative_G  = cumsum(season_G)\n  ) |>\n  ungroup()\n\nrace_data <- cumulative_stats |>\n  filter(cumulative_HR <= 550) |>\n  left_join(\n    people_raw |> select(playerID, nameFirst, nameLast),\n    by = \"playerID\"\n  ) |>\n  mutate(\n    player_name = paste(nameFirst, nameLast),\n    is_ped = player_name %in% ped_players,\n    player_category = case_when(\n      player_name == \"Mark McGwire\" ~ \"mcgwire\",\n      player_name == \"Babe Ruth\" ~ \"ruth\",\n      player_name == \"Eddie Murray\" ~ \"murray\",\n      TRUE ~ \"other\"\n    )\n  )\n```\n````\n:::\n\n\n#### 5. Visualization Parameters\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = list(\n    mcgwire = \"#BF092F\",  \n    ruth  = \"#132440\",  \n    murray = \"#3B9797\", \n    others = \"gray75\",\n    milestone = \"gray55\",\n    grid = \"gray90\"\n  )\n)\n\n### |-  titles and caption ----\ntitle_text <- \"The Race to 500 Home Runs\"\n\nsubtitle_text <- str_glue(\n  \"**McGwire** was fastest (1,688 games) but linked to PED use. **Babe Ruth** holds the fastest clean record at 1,790 games,<br>\",\n  \"while **Eddie Murray** needed 2,971 games.<br><br>\",\n  \"<span style='color:gray50; font-size:10pt;'>7 of 28 club members have been linked to performance-enhancing drugs (1929â€“2021)</span>\"\n)\n\n# Create caption\ncaption_text <- create_swd_caption(\n  year = 2025,\n  month = \"Dec\",\n  source_text = \"500 HR Club trajectories: Lahman Baseball Database â€¢ PED links: ESPN â€œThe Steroids Eraâ€\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(\n      face = \"bold\", family = fonts$title, size = rel(1.4),\n      color = colors$palette$title, margin = margin(b = 10), hjust = 0\n    ),\n    plot.subtitle = element_text(\n      family = fonts$subtitle, lineheight = 1.2,\n      color = colors$palette$subtitle, size = rel(0.9), margin = margin(b = 20), hjust = 0\n    ),\n\n    ## Grid\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_line(color = \"gray90\", linewidth = 0.3),\n\n    # Axes\n    axis.title = element_text(size = rel(0.9), color = \"gray30\"),\n    axis.text = element_text(color = \"gray30\"),\n    axis.text.y = element_text(size = rel(0.95)),\n    axis.ticks = element_blank(),\n\n    # Facets\n    strip.background = element_rect(fill = \"gray95\", color = NA),\n    strip.text = element_text(\n      face = \"bold\",\n      color = \"gray20\",\n      size = rel(1),\n      margin = margin(t = 8, b = 8)\n    ),\n    panel.spacing = unit(2, \"lines\"),\n\n    # Legend elements\n    legend.position = \"plot\",\n    legend.title = element_text(\n      family = fonts$tsubtitle,\n      color = colors$palette$text, size = rel(0.8), face = \"bold\"\n    ),\n    legend.text = element_text(\n      family = fonts$tsubtitle,\n      color = colors$palette$text, size = rel(0.7)\n    ),\n    legend.margin = margin(t = 15),\n\n    # Plot margin\n    plot.margin = margin(10, 20, 10, 20)\n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### 6. Plot\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n\np <- ggplot(race_data, aes(x = cumulative_G, y = cumulative_HR, group = player_name)) +\n  # Geoms\n  geom_hline(\n    yintercept = 500,\n    linetype   = \"dashed\",\n    color      = colors$palette$milestone,\n    linewidth  = 0.5\n  ) +\n  geom_line(\n    data = race_data |> filter(player_category == \"other\"),\n    color = colors$palette$others,\n    linewidth = 0.5,\n    alpha = 0.6\n  ) +\n  geom_line(\n    data = race_data |> filter(player_category == \"murray\"),\n    color = colors$palette$murray,\n    linewidth = 1.1\n  ) +\n  geom_line(\n    data = race_data |> filter(player_category == \"ruth\"),\n    color = colors$palette$ruth,\n    linewidth = 1.1\n  ) +\n  geom_line(\n    data = race_data |> filter(player_category == \"mcgwire\"),\n    color = colors$palette$mcgwire,\n    linewidth = 1.4\n  ) +\n  # Annotations\n  annotate(\n    \"text\",\n    x = 1500, y = 545,\n    label = \"McGwire*\\n1,688 games\",\n    hjust = 0.5, vjust = 0,\n    size = 3.6,\n    color = colors$palette$mcgwire,\n    fontface = \"bold\"\n  ) +\n  annotate(\n    \"text\",\n    x = 1820, y = 585,\n    label = \"Ruth\\n1,790 games\\n(fastest clean)\",\n    hjust = 0, vjust = 0.5,\n    size = 3.3,\n    color = colors$palette$ruth,\n    fontface = \"bold\",\n    lineheight = 0.9\n  ) +\n  annotate(\n    \"text\",\n    x = 3200, y = 515,\n    label = \"Murray\\n2,971 games\\n(slowest)\",\n    hjust = 1, vjust = 0,\n    size = 3.3,\n    color = colors$palette$murray,\n    fontface = \"bold\",\n    lineheight = 0.9\n  ) +\n  annotate(\n    \"text\",\n    x = 80, y = 515,\n    label = \"500 HR milestone\",\n    hjust = 0, vjust = 0,\n    size = 3.1,\n    color = colors$palette$milestone\n  ) +\n  # Scales\n  scale_x_continuous(\n    labels = scales::comma,\n    limits = c(0, 3200),\n    breaks = seq(0, 3000, 500),\n    expand = c(0.02, 0)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 600),\n    breaks = seq(0, 500, 100)\n  ) +\n  coord_cartesian(clip = \"off\") +\n  # Labs\n  labs(\n    title    = title_text,\n    subtitle = subtitle_text,\n    caption  = caption_text,\n    x        = \"Games played\",\n    y        = \"Cumulative home runs\"\n  ) +\n  # Theme\n  theme(\n    plot.title = element_markdown(\n      size = rel(2),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      lineheight = 1.15,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.8),\n      family = fonts$subtitle,\n      color = alpha(colors$subtitle, 0.88),\n      lineheight = 1.3,\n      margin = margin(t = 5, b = 20)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.55),\n      family = fonts$subtitle,\n      color = colors$caption,\n      hjust = 0,\n      lineheight = 1.4,\n      margin = margin(t = 20, b = 5)\n    ),\n    axis.title = element_text(size = 10, color = \"gray35\"),\n    axis.text = element_text(size = 9,  color = \"gray35\")\n  )\n```\n````\n:::\n\n\n#### 7. Save\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n\n### |-  plot image ----  \nsave_plot(\n  p, \n  type = 'swd', \n  year = 2025, \n  month = 12, \n  width  = 10,\n  height = 8,\n  )\n```\n````\n:::\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      Lahman_13.0-0   glue_1.8.0      scales_1.3.0   \n [5] janitor_2.2.0   showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9 \n [9] ggtext_0.1.2    lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1  \n[13] dplyr_1.1.4     purrr_1.0.2     readr_2.1.5     tidyr_1.3.1    \n[17] tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      xfun_0.49         htmlwidgets_1.6.4 tzdb_0.5.0       \n [5] vctrs_0.6.5       tools_4.4.0       generics_0.1.3    curl_6.0.0       \n [9] gifski_1.32.0-1   fansi_1.0.6       pkgconfig_2.0.3   lifecycle_1.0.4  \n[13] compiler_4.4.0    farver_2.1.2      textshaping_0.4.0 munsell_0.5.1    \n[17] codetools_0.2-20  snakecase_0.11.1  htmltools_0.5.8.1 yaml_2.3.10      \n[21] pillar_1.9.0      camcorder_0.1.0   magick_2.8.5      commonmark_1.9.2 \n[25] tidyselect_1.2.1  digest_0.6.37     stringi_1.8.4     rsvg_2.6.1       \n[29] rprojroot_2.0.4   fastmap_1.2.0     grid_4.4.0        colorspace_2.1-1 \n[33] cli_3.6.4         magrittr_2.0.3    utf8_1.2.4        withr_3.0.2      \n[37] timechange_0.3.0  rmarkdown_2.29    ragg_1.3.3        hms_1.1.3        \n[41] evaluate_1.0.1    knitr_1.49        markdown_1.13     rlang_1.1.6      \n[45] gridtext_0.1.5    Rcpp_1.0.13-1     xml2_1.3.6        renv_1.0.3       \n[49] svglite_2.1.3     rstudioapi_0.17.1 jsonlite_1.8.9    R6_2.5.1         \n[53] systemfonts_1.1.0\n```\n\n\n:::\n:::\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`swd_2025_12.qmd`](https://github.com/poncest/personal-website/tree/master/data_visualizations/SWD%20Challenge/2025/swd_2025_12.qmd). For the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### 10. References\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\nData Sources:\n\n-   Lahman Baseball Database: [Sean Lahman's Baseball Database](https://www.seanlahman.com/baseball-archive/statistics/) via the [{Lahman}](https://cran.r-project.org/web/packages/Lahman/index.html) R package\n-   PED Information: [ESPN - The Steroids Era](https://www.espn.com/mlb/topics/_/page/the-steroids-era)\n\nSWD Challenge: - Storytelling with Data: [December 2025 - When Less is Better](https://community.storytellingwithdata.com/challenges/)\n:::\n\n#### 11. Custom Functions Documentation\n\n::: {.callout-note collapse=\"true\"}\n##### ðŸ“¦ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}