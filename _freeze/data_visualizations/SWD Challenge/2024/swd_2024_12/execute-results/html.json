{
  "hash": "a451251b821cec454ae2ee54e7248491",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Progress in Reducing Working Poverty Rates in Africa (2000-2019)\"\nsubtitle: \"Poverty rates for both women and men have steadily declined across all age groups in Africa's lower-middle-income countries. Adults and youth have shown different paces of reduction in poverty, with all populations living below $2.15/day PPP.\"\ndescription: \"A visualization examining two decades of working poverty trends in Africa (2000-2019), highlighting the decline in poverty rates across gender and age groups. The analysis reveals distinct patterns between youth (15-24) and adult (25+) populations, showcasing overall improvement but persistent gender disparities in working poverty rates.\"\nauthor: \"Steven Ponce\"\ndate: \"2024-12-02\"\ncategories: [SWDchallenge, Data Visualization, R Programming]  \ntags: [poverty, africa, gender-equality, economic-development, time-series, visualization, working-poverty, youth-employment, demographic-analysis]\nimage: \"thumbnails/swd_2024_12.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n\neditor_options: \n  chunk_output_type: inline\n\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\n\nshare:\n  permalink: \"https://stevenponce.netlify.app/data_visualizations/swd_2024_12.png\"\n  description: \"Exploring 20 years of working poverty reduction in Africa: A data visualization showing how poverty rates have declined differently for women and men across age groups, with particular focus on youth (15-24) versus adult (25+) populations. The analysis reveals sustained progress in reducing working poverty while highlighting persistent gender gaps. #DataVisualization #Africa #PovertyReduction #GenderEquality #EconomicDevelopment\"\n  linkedin: true\n  twitter: true\n  email: true\n---\n\n\n\n![Line chart showing progress in reducing working poverty rates in Africa's lower-middle-income countries from 2000 to 2019. The chart compares trends among women and men and the overall total across three age groups: Age 15 and older, youth age 15-24, and adults age 25 and older. Poverty rates declined for both men and women, with notable differences between adults and youth.](swd_2024_12.png){#fig-1}\n\n\n### <mark> __Steps to Create this Graphic__ </mark>\n\n#### 1. Load Packages & Setup \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\n  pacman::p_load(\n  tidyverse,         # Easily Install and Load the 'Tidyverse'\n  ggtext,            # Improved Text Rendering Support for 'ggplot2'\n  showtext,          # Using Fonts More Easily in R Graphs\n  scales,            # Scale Functions for Visualization\n  glue,              # Interpreted String Literals\n  here,              # A Simpler Way to Find Your Files\n  paletteer,         # Comprehensive Collection of Color Palettes\n  janitor,           # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,             # Compact and Flexible Summaries of Data\n  camcorder          # Record Your Plot History\n)  \n})\n\nsuppressMessages(source(here::here(\"_setup.R\")))\n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  =  10,\n  height =  08,\n  units  = \"in\",\n  dpi    = 320\n)\n\n### |- resolution ----\nshowtext_opts(dpi = 320, regular.wt = 300, bold.wt = 800)\n```\n:::\n\n\n\n#### 2. Read in the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Data:      International Labour Organization \n##            Africa: Lower-middle income - Annual\n## Link:      https://rshiny.ilo.org/dataexplorer5/?lang=en&id=X08_A\n\n## Citation:\n#' International Labour Organization. Africa: Lower-middle income - Annual\n#' [ILOSTAT explorer. Africa: Lower-middle income - Annual (1990 - 2024)]. \n#' Accessed [2024-12-02].\n\npoverty_rate_data_raw <- read_csv(\n here::here(\"data/ILO_X08_A-full-2024-12-02.csv\")) |>\n filter(\n    indicator.label == \"SDG indicator 1.1.1 - Working poverty rate (percentage of employed living below US$2.15 PPP) (%)\"\n  ) |> \n  clean_names() \n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(poverty_rate_data_raw)\nskim(poverty_rate_data_raw)\n```\n:::\n\n\n\n#### 4. Tidy Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |- tidy data ----\n\npoverty_rate_clean <- poverty_rate_data_raw |> \n  select(-obs_status_label, -note_classif_label, -note_indicator_label, -note_source_label, -classif2_label) |> \n  rename(\n    year = time,\n    pct = obs_value\n  ) |> \n  mutate(\n    sex_label = str_remove(sex_label, pattern = \"Sex: \"),\n    pct = pct / 100,\n    age_bin = case_when(\n      classif1_label == \"Age (Youth, adults): 15+\" ~ \"Ages 15 and Older\",\n      classif1_label == \"Age (Youth, adults): 15-24\" ~ \"Youth: Ages 15-24\",\n      classif1_label == \"Age (Youth, adults): 25+\" ~ \"Adults: Ages 25 and Older\",\n      TRUE ~ classif1_label\n    ),\n    age_bin = factor(age_bin, levels = c(\"Ages 15 and Older\", \"Youth: Ages 15-24\", \"Adults: Ages 25 and Older\"))\n  ) |> \n  filter(year <= 2019) |> \n  pivot_wider(names_from = sex_label, values_from = pct)\n```\n:::\n\n\n\n\n#### 5. Visualization Parameters \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |- plot aesthetics ----\nbkg_col      <- \"#f5f5f2\"  \ntitle_col    <- \"gray20\"           \nsubtitle_col <- \"gray20\"     \ncaption_col  <- \"gray30\"   \ntext_col     <- \"gray20\"    \ncol_palette  <- paletteer::paletteer_d(\"nbapalettes::mavericks_retro\")\n\n### |-  titles and caption ----\n# icons\ntt <- str_glue(\"#SWDchallenge: Dec 2024 &bull; Source: Source: Source: ILOSTAT<br>\")\nli <- str_glue(\"<span style='font-family:fa6-brands'>&#xf08c;</span>\")\ngh <- str_glue(\"<span style='font-family:fa6-brands'>&#xf09b;</span>\")\nbs <- str_glue(\"<span style='font-family:fa6-brands'>&#xe671; </span>\")\n\n# text\nwomen  <- str_glue(\"<span style='font-size:16pt; color:{ col_palette[1] }'>**Women**</span>\")\nmen    <- str_glue(\"<span style='font-size:16pt; color:{ col_palette[2] }'>**Men**</span>\")\ntotal  <- str_glue(\"<span style='font-size:16pt; color:{ col_palette[3] }'>**Total**</span>\")\n\ntitle_text   <- str_glue(\"Progress in Reducing Working Poverty Rates in Africa (2000-2019)\") \n\nsubtitle_text <- str_glue(\"Poverty rates for both {women} and {men} have steadily declined across all age groups in Africa\\\\'s<br>\n                           lower-middle-income countries. Adults and youth have shown different paces of reduction in poverty,<br>\n                           with all populations living below $2.15/day PPP. The dashed line represents the { total } (combined average)<br><br>\n                          <span style='font-size:15.4pt;'><strong>Percentage of Workers in Poverty</strong></span>\")\n\ncaption_text  <- str_glue(\"{tt} {li} stevenponce &bull; {bs} sponce1 &bull; {gh} poncest &bull; #rstats #ggplot2\")\n\n### |-  fonts ----\nsetup_fonts()\n\n### |-  plot theme ----\ntheme_set(theme_minimal(base_size = 14, base_family = \"text\"))                \n\ntheme_update(\n  plot.title.position   = \"plot\",\n  plot.caption.position = \"plot\",\n  legend.position       = \"plot\",\n  plot.background       = element_rect(fill = bkg_col, color = bkg_col),\n  panel.background      = element_rect(fill = bkg_col, color = bkg_col),\n  plot.margin           = margin(t = 10, r = 20, b = 10, l = 20),\n  axis.title.x          = element_text(margin = margin(10, 0, 0, 0), size = rel(1.1), \n                                       color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n  axis.title.y          = element_text(margin = margin(0, 10, 0, 0), size = rel(1.1), \n                                       color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n  axis.text             = element_text(size = rel(0.8), color = text_col, family = \"text\"),\n  axis.line.x           = element_line(color = \"#252525\", linewidth = .3),\n  axis.ticks.x          = element_line(color = text_col),  \n  axis.title            = element_text(face = \"bold\"),\n  panel.grid.minor      = element_blank(),\n  panel.grid.major      = element_blank(),\n  panel.grid.major.y    = element_line(color = \"grey85\", linewidth = .4),\n  strip.background      = element_rect(fill = \"#f0f0f0\", color = NA),\n  strip.text            = element_textbox(size = rel(1),  \n                                          face = 'bold',\n                                          color = text_col,\n                                          hjust = 0.5,\n                                          halign = 0.5,\n                                          r = unit(5, \"pt\"),\n                                          width = unit(5.5, \"npc\"),\n                                          padding = margin(3, 0, 3, 0),\n                                          margin = margin(3, 3, 3, 3),\n                                          fill = \"transparent\"\n  ),\n  panel.spacing         = unit(1.5, 'lines'),\n)   \n```\n:::\n\n\n\n\n#### 6. Plot \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot ----\np <- poverty_rate_clean |>\n  ggplot(aes(x = year)) +\n  # Fill the gap between Male and Female\n  geom_ribbon(aes(ymin = Male, ymax = Female), fill = \"gray75\", alpha = 0.3) +\n  # Geoms for Male and Female\n  geom_line(aes(y = Female, color = \"Female\"), linewidth = 1) +\n  geom_line(aes(y = Male, color = \"Male\"), linewidth = 1) +\n  # Geom for Total (dashed line)\n  geom_line(aes(y = Total, linetype = \"Total\"), color = col_palette[3], linewidth = 0.55, alpha = 0.6) +\n  \n  # Scales\n  scale_x_continuous(\n    breaks = seq(2000, 2020, by = 10),\n    limits = c(2000, 2020)\n  ) +\n  scale_y_continuous(\n    breaks = seq(0, .5, by = .1),\n    limits = c(.1, .50),\n    label = percent_format()\n  ) +\n  coord_cartesian(clip = \"off\") +\n  scale_color_manual(values = col_palette) +\n  scale_linetype_manual(values = c(\"dashed\")) +\n  \n  # Labs\n  labs(\n    x = \"Year\",\n    y = NULL,\n    color = \"Gender\",\n    linetype = \"Total\",\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n  ) +\n  \n  # Facet\n  facet_wrap(~ age_bin, nrow = 1) +\n  \n  # Theme\n  theme(\n    plot.title = element_markdown(\n      size = rel(1.7),\n      family = \"title\",\n      face = \"bold\",\n      color = title_col,\n      lineheight = 1.1,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.95),\n      family = \"subtitle\",\n      color = caption_col,\n      lineheight = 1.1,\n      margin = margin(t = 5, b = 20)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.65),\n      family = \"caption\",\n      color = caption_col,\n      lineheight = 1.1,\n      hjust = 0.5,\n      halign = 0.5,\n      margin = margin(t = 15, b = 5)\n    )\n  )\n```\n:::\n\n\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \n\nsource(here::here(\"R/image_utils.R\"))\nsave_plot(p, type = 'swd', year = 2024, month = 12, width = 10, height = 08)\n```\n:::\n\n\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] ggplotify_0.1.2   gghighlight_0.4.1 paletteer_1.6.0   patchwork_1.3.0  \n [5] here_1.0.1        glue_1.8.0        scales_1.3.0      skimr_2.1.5      \n [9] janitor_2.2.0     showtext_0.9-7    showtextdb_3.0    sysfonts_0.8.9   \n[13] ggtext_0.1.2      lubridate_1.9.3   forcats_1.0.0     stringr_1.5.1    \n[17] dplyr_1.1.4       purrr_1.0.2       readr_2.1.5       tidyr_1.3.1      \n[21] tibble_3.2.1      ggplot2_3.5.1     tidyverse_2.0.0  \n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.1   farver_2.1.2       fastmap_1.2.0      pacman_0.5.1      \n [5] digest_0.6.37      timechange_0.3.0   lifecycle_1.0.4    rsvg_2.6.1        \n [9] magrittr_2.0.3     compiler_4.4.0     rlang_1.1.4        tools_4.4.0       \n[13] utf8_1.2.4         yaml_2.3.10        knitr_1.49         labeling_0.4.3    \n[17] htmlwidgets_1.6.4  bit_4.5.0          curl_6.0.0         xml2_1.3.6        \n[21] camcorder_0.1.0    repr_1.1.7         withr_3.0.2        grid_4.4.0        \n[25] fansi_1.0.6        colorspace_2.1-1   cli_3.6.3          rmarkdown_2.29    \n[29] crayon_1.5.3       generics_0.1.3     rstudioapi_0.17.1  tzdb_0.4.0        \n[33] commonmark_1.9.2   splines_4.4.0      parallel_4.4.0     base64enc_0.1-3   \n[37] vctrs_0.6.5        yulab.utils_0.1.8  Matrix_1.7-0       jsonlite_1.8.9    \n[41] gridGraphics_0.5-1 hms_1.1.3          bit64_4.5.2        systemfonts_1.1.0 \n[45] magick_2.8.5       gifski_1.32.0-1    rematch2_2.1.2     codetools_0.2-20  \n[49] stringi_1.8.4      gtable_0.3.6       munsell_0.5.1      pillar_1.9.0      \n[53] htmltools_0.5.8.1  R6_2.5.1           rprojroot_2.0.4    vroom_1.6.5       \n[57] evaluate_1.0.1     lattice_0.22-6     markdown_1.13      gridtext_0.1.5    \n[61] snakecase_0.11.1   renv_1.0.3         Rcpp_1.0.13-1      svglite_2.1.3     \n[65] nlme_3.1-164       mgcv_1.9-1         xfun_0.49          fs_1.6.5          \n[69] pkgconfig_2.0.3   \n```\n\n\n:::\n:::\n\n\n:::\n\n\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n \nThe complete code for this analysis is available in [`swd_2024_12.qmd`](https://github.com/poncest/personal-website/tree/master/data_visualizations/SWD%20Challenge/2024/swd_2024_12.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}