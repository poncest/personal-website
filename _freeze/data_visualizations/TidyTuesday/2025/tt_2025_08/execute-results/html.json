{
  "hash": "062aba3b9c73b84306d11f8efe450382",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Racial and Ethnic Disparities in Reproductive Medicine Research (2010-2023)\"\nsubtitle: \"Analysis of 318 studies from high-impact journals examining disparities in reproductive health\"\ndescription: \"A data visualization analysis examining racial and ethnic disparities in reproductive medicine research. This dashboard reveals critical patterns in how disparities are studied through inconsistent racial categorization, unequal sample sizes across groups, and effect sizes clustering above 1.0, suggesting systematic disadvantages for non-reference groups.\"\nauthor: \"Steven Ponce\"\ndate: \"2025-02-24\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2025\"]\ntags: [\n \"racial disparities\", \"health equity\", \"reproductive medicine\", \"data visualization\", \"research methodology\", \"sample size bias\", \"medical research\", \"public health\", \"data analysis\", \"health disparities\", \"visualization dashboard\", \"effect size analysis\"\n]\nimage: \"thumbnails/tt_2025_08.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\nfilters:\n  - social-share\nshare:\n  permalink: \"https://stevenponce.netlify.app/data_visualizations/TidyTuesday/2025/tt_2025_08.html\"\n  description: \"Visualizing racial and ethnic disparities in reproductive medicine research (2010-2023): A dashboard revealing inconsistent categorization, sample size disparities, and systematic bias in how reproductive health inequities are studied. #DataViz #HealthEquity #ReproductiveJustice\"\n\n  twitter: true\n  linkedin: true\n  email: true\n  facebook: false\n  reddit: false\n  stumble: false\n  tumblr: false\n  mastodon: true\n  bsky: true\n---\n\n\n\n![Three-panel charts showing racial and ethnic disparities in reproductive medicine research (2010-2023). The top left chart displays racial categories used in studies, with Black/African American (19.4%), Hispanic/Latino (18.6%), and White (17.5%) being the most common. The top right chart shows sample size distribution by racial/ethnic group, revealing reference groups have much larger sample sizes than comparison groups. The bottom chart displays effect size distributions by measure type (Hazard Ratio, Odds Ratio, Risk Ratio), with most values clustering slightly above 1.0, indicating increased risks for non-reference groups.](tt_2025_08.png){#fig-1}\n\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n   tidyverse,      # Easily Install and Load the 'Tidyverse'\n    ggtext,         # Improved Text Rendering Support for 'ggplot2'\n    showtext,       # Using Fonts More Easily in R Graphs\n    janitor,        # Simple Tools for Examining and Cleaning Dirty Data\n    skimr,          # Compact and Flexible Summaries of Data\n    scales,         # Scale Functions for Visualization\n    glue,           # Interpreted String Literals\n    here,           # A Simpler Way to Find Your Files\n    camcorder,      # Record Your Plot History \n    patchwork       # The Composer of Plots # The Composer of Plots # The Composer of Plots\n    )\n})\n\n### |- figure size ----\ngg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  =  14,\n    height =  12,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n:::\n\n\n\n#### 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntt <- tidytuesdayR::tt_load(2025, week = 08) \n\narticle_dat <- tt$article_dat |> clean_names()\nmodel_dat <- tt$model_dat |> clean_names()\n\ntidytuesdayR::readme(tt)\nrm(tt)\n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(article_dat)\nskim(article_dat)\n\nglimpse(model_dat)\nskim(model_dat)\n```\n:::\n\n\n\n#### 4. Tidy Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# P1. Racial Categories -----\nracial_categories_data <- article_dat |>\n    select(starts_with(\"race\")) |>\n    select(matches(\"race\\\\d$\")) |>  # Select only race categories, not sample sizes\n    pivot_longer(everything(), names_to = \"category\", values_to = \"race\") |>\n    filter(!is.na(race)) |>\n    # Standardize category names and combine similar ones\n    mutate(race = case_when(\n        str_detect(tolower(race), \"white.*non.?hispanic|non.?hispanic.*white\") ~ \"Non-Hispanic White\",\n        str_detect(tolower(race), \"black.*non.?hispanic|non.?hispanic.*black\") ~ \"Non-Hispanic Black\",\n        str_detect(tolower(race), \"white\") ~ \"White\",\n        str_detect(tolower(race), \"black|african\") ~ \"Black/African American\",\n        str_detect(tolower(race), \"hispanic|latino\") ~ \"Hispanic/Latino\",\n        str_detect(tolower(race), \"asian|pacific\") ~ \"Asian/Pacific Islander\",\n        TRUE ~ race\n    )) |>\n    count(race) |>\n    # Filter out very rare categories\n    filter(n >= 5) |>\n    # Calculate percentage\n    mutate(percentage = n/sum(n) * 100) |>\n    # Sort by frequency\n    arrange(desc(n)) \n\n\n# P2. Sample Size Distribution -----\nsample_size_distribution <- article_dat |>\n    # Select sample size columns\n    select(matches(\"_ss$\")) |>\n    # Pivot to long format\n    pivot_longer(everything(), \n                 names_to = \"group\", \n                 values_to = \"size\") |>\n    # Remove missing values and unreasonable values (-99)\n    filter(!is.na(size), size > 0, size != -99) |>\n    # Group by racial/ethnic category\n    group_by(group) |>\n    # Calculate summary statistics\n    summarise(\n        median_size = median(size),\n        mean_size = mean(size),\n        q25 = quantile(size, 0.25),\n        q75 = quantile(size, 0.75),\n        max_size = max(size),\n        count = n()\n    ) |>\n    # Sort by median size for better visualization\n    arrange(desc(median_size)) |>\n    # Create more readable labels\n    mutate(\n        group_label = case_when(\n            group == \"race1_ss\" ~ \"Reference group\",\n            group == \"race2_ss\" ~ \"Second reported group\",\n            group == \"race3_ss\" ~ \"Third reported group\",\n            group == \"race4_ss\" ~ \"Fourth reported group\",\n            group == \"race5_ss\" ~ \"Fifth reported group\",\n            group == \"race6_ss\" ~ \"Sixth reported group\",\n            group == \"race7_ss\" ~ \"Seventh reported group\",\n            group == \"race8_ss\" ~ \"Eighth reported group\",\n            group == \"eth1_ss\" ~ \"Reference ethnic group\",\n            group == \"eth2_ss\" ~ \"Second ethnic group\",\n            group == \"eth3_ss\" ~ \"Third ethnic group\",\n            group == \"eth4_ss\" ~ \"Fourth ethnic group\",\n            group == \"eth5_ss\" ~ \"Fifth ethnic group\",\n            group == \"eth6_ss\" ~ \"Sixth ethnic group\",\n            TRUE ~ group\n        )\n    ) |>\n    # Only include groups with sufficient data\n    filter(count >= 5)\n\n\n# P3. Effect Size Distribution -----\neffect_size_data <- model_dat |>\n    # Filter for relevant measure types and remove invalid data\n    filter(\n        measure %in% c(\"OR\", \"RR\", \"HR\"),\n        point != -99,\n        point < 10,       \n        point > 0.1        \n    ) |>\n    # Add significance indicator\n    mutate(\n        significance = case_when(\n            lower != -99 & upper != -99 & (lower > 1 | upper < 1) ~ \"Significant\",\n            lower != -99 & upper != -99 ~ \"Non-significant\",\n            TRUE ~ \"CI Not Reported\"\n        ),\n        # Create a categorized effect size for potential faceting\n        effect_category = case_when(\n            point < 0.5 ~ \"Strong Negative\",\n            point < 0.8 ~ \"Moderate Negative\",\n            point < 1.0 ~ \"Weak Negative\",\n            point == 1.0 ~ \"No Effect\",\n            point <= 1.25 ~ \"Weak Positive\",\n            point <= 2.0 ~ \"Moderate Positive\",\n            TRUE ~ \"Strong Positive\"\n        ),\n        # Rename measure types \n        measure = case_when(\n            measure == \"OR\" ~ \"Odds Ratio\",\n            measure == \"RR\" ~ \"Risk Ratio\",\n            measure == \"HR\" ~ \"Hazard Ratio\",\n            TRUE ~ measure\n        )\n    ) \n```\n:::\n\n\n\n#### 5. Visualization Parameters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(\n    palette = c(\n        \"#4A6FE3\",\n        \"#D8E1F3\",\n        \"Odds Ratio\" = \"#4A6FE3\",   \n        \"Risk Ratio\" = \"#29A2C6\",   \n        \"Hazard Ratio\" = \"#5D7CBA\"\n    )\n)\n\n### |-  titles and caption ----\ntitle_text <- str_glue(\"Racial and Ethnic Disparities in Reproductive Medicine Research (2010-2023)\")\n\nsubtitle_text <- str_glue(\n    \"Analysis of __318 studies__ from high-impact journals examining disparities in reproductive health<br><br>\",\n    \"This visualization reveals critical patterns in how disparities are studied: inconsistent racial categorization unequal sample sizes across groups,<br> \",\n    \"and effect sizes clustering slightly above 1.0, suggesting systematic disadvantages for non-reference groups. These methodological choices <br>\",\n    \"impact our understanding of disparities.\"\n)\n\n# Create caption\ncaption_text <- create_social_caption(\n    tt_year = 2025,\n    tt_week = 08,\n    source_text =  \"Racial and ethnic disparities in reproductive medicine in the United States: a narrative review of contemporary high-quality evidence\" \n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n    base_theme,\n    theme(\n        # Remove axes\n        axis.text = element_blank(),\n        axis.title = element_blank(),\n        panel.grid = element_blank(),\n        \n        # Plot margins \n        plot.margin = margin(10, 10, 10, 10),\n    )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n:::\n\n\n\n#### 6. Map\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  Map  ----\n# P1. Racial Categories -----\np1 <- ggplot(data = racial_categories_data,\n             aes(x = reorder(race, n), y = n)) +\n    # Geoms\n    geom_bar(stat = \"identity\", \n             fill =  colors$palette[1],     \n             alpha = 0.8) +\n    geom_text(aes(label = sprintf(\"%.1f%%\", percentage)),\n              hjust = -0.2,\n              size = 3.5) +\n    # Scales\n    scale_y_continuous(\n        expand = expansion(mult = c(0, 0.15)), \n        breaks = pretty_breaks()\n    ) +\n    coord_flip() +\n    # Labs\n    labs(title = \"Racial Categories Used in Reproductive Medicine Studies\",\n         subtitle = \"Percentage of studies using each racial category (2010-2023)\",\n         x = NULL,\n         y = \"Number of Studies\") +\n    # Theme\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(size = 11, color = \"gray40\"),\n        axis.text = element_text(size = 10),\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor = element_blank(),\n        plot.margin = margin(20, 40, 20, 20)\n    ) \n\n\n# P2. Sample Size Distribution -----\np2 <- ggplot(data = sample_size_distribution, \n             aes(x = reorder(group_label, median_size), y = median_size)) +\n    # Geoms\n    geom_pointrange(\n        aes(ymin = q25, ymax = q75),\n        size = 0.7,\n        color = colors$palette[1],\n        fill =  colors$palette[2],\n        shape = 21,\n        stroke = 1.2\n    ) +\n    annotate(\n        \"text\", \n        x = 10.8, \n        y = 35, \n        label = \"Reference groups have\\nmuch larger sample sizes\",\n        lineheight = 0.9,\n        hjust = 0,\n        vjust = 1,\n        size = 3.5,\n        color = \"gray30\",  \n        fontface = \"italic\"\n    ) +\n    # Scales\n    coord_flip() +\n    scale_y_log10(\n        labels = label_comma(),\n        breaks = c(10, 100, 1000, 10000, 100000)\n    ) +\n    # Labs\n    labs(\n        title = \"Sample Size Distribution by Racial/Ethnic Group\",\n        subtitle = \"Median sample size with interquartile range (log scale)\",\n        x = NULL,\n        y = \"Sample Size (log scale)\"\n    ) +\n    # Theme\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(size = 11, color = \"gray40\"),\n        axis.text = element_text(size = 10),\n        axis.title.x = element_text(margin = margin(t = 10)),\n        panel.grid.minor = element_blank(),\n        panel.grid.major.y = element_blank(),\n        plot.margin = margin(20, 20, 20, 20)\n    )\n\n\n# P3. Effect Size Distribution -----\np3 <- ggplot(data = effect_size_data,\n             aes(x = point, fill = measure)) +\n    # Geoms\n    geom_density(alpha = 0.6, adjust = 1.5) +\n    geom_vline(                 # Vertical reference line at 1 (no effect)\n        xintercept = 1, \n        linetype = \"dashed\", \n        color = \"gray30\",\n        size = 0.7\n    ) +\n    annotate(\n        \"text\", \n        x = 0.7, \n        y = 1.2, \n        label = \"Decreased risk/odds\",\n        hjust = 1,\n        size = 3.5,\n        fontface = \"italic\",\n        color = \"gray30\"\n    ) +\n    annotate(\n        \"text\", \n        x = 1.7, \n        y = 1.2, \n        label = \"Increased risk/odds\",\n        hjust = 0,\n        size = 3.5,\n        fontface = \"italic\",\n        color = \"gray30\"\n    ) +\n    # Scales\n    scale_fill_manual(\n        values =  colors$palette\n    ) +\n    scale_x_log10(\n        breaks = c(0.2, 0.5, 1, 2, 5),\n        labels = c(\"0.2\", \"0.5\", \"1.0\", \"2.0\", \"5.0\")\n    ) +\n    # Labs\n    labs(\n        title = \"Distribution of Effect Sizes in Racial/Ethnic Disparity Studies\",\n        subtitle = \"By measure type, showing patterns of reported disparities\",\n        x = \"Effect Size (log scale)\",\n        y = \"Density\",\n        fill = \"Measure Type\"\n    ) +\n    # Theme\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(size = 11, color = \"gray40\"),\n        axis.title = element_text(size = 10),\n        legend.position = \"bottom\",\n        legend.title = element_text(face = \"bold\"),\n        panel.grid.minor = element_blank(),\n        plot.margin = margin(20, 20, 20, 20)\n    )\n\n# Combined Plot -----\ncombined_plot <- (p1 + p2) / p3 +\n    plot_layout(heights = c(1, 1)) +\n    plot_annotation(\n        title = title_text,\n        subtitle = subtitle_text,\n        caption = caption_text,\n        theme = theme(\n            plot.title = element_text(\n                size   = rel(2.1),\n                family = fonts$title,\n                face   = \"bold\",\n                color  = colors$title,\n                lineheight = 1.1,\n                margin = margin(t = 5, b = 5)\n            ),\n            plot.subtitle = element_markdown(\n                size   = rel(0.95),\n                family = fonts$subtitle,\n                color  = colors$subtitle,\n                lineheight = 1.2,\n                margin = margin(t = 5, b = 5)\n            ),\n            plot.caption = element_markdown(\n                size   = rel(0.75),\n                family = fonts$caption,\n                color  = colors$caption,\n                hjust  = 0.5,\n                margin = margin(t = 10)\n            ),\n            plot.margin = margin(t = 20, r = 10, b = 20, l = 10),\n        )\n    )\n```\n:::\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \nsave_plot_patchwork(\n  plot = combined_plot, \n  type = \"tidytuesday\", \n  year = 2025, \n  week = 8, \n  width = 14,\n  height = 12\n)\n```\n:::\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] patchwork_1.3.0 camcorder_0.1.0 here_1.0.1      glue_1.8.0     \n [5] scales_1.3.0    skimr_2.1.5     janitor_2.2.0   showtext_0.9-7 \n [9] showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2    lubridate_1.9.3\n[13] forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2    \n[17] readr_2.1.5     tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1  \n[21] tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.1   farver_2.1.2       fastmap_1.2.0      gh_1.4.1          \n [5] digest_0.6.37      timechange_0.3.0   lifecycle_1.0.4    rsvg_2.6.1        \n [9] magrittr_2.0.3     compiler_4.4.0     rlang_1.1.4        tools_4.4.0       \n[13] utf8_1.2.4         yaml_2.3.10        knitr_1.49         labeling_0.4.3    \n[17] htmlwidgets_1.6.4  bit_4.5.0          curl_6.0.0         xml2_1.3.6        \n[21] repr_1.1.7         tidytuesdayR_1.1.2 withr_3.0.2        grid_4.4.0        \n[25] fansi_1.0.6        colorspace_2.1-1   gitcreds_0.1.2     cli_3.6.3         \n[29] rmarkdown_2.29     crayon_1.5.3       generics_0.1.3     rstudioapi_0.17.1 \n[33] tzdb_0.4.0         commonmark_1.9.2   parallel_4.4.0     ggplotify_0.1.2   \n[37] base64enc_0.1-3    vctrs_0.6.5        yulab.utils_0.1.8  jsonlite_1.8.9    \n[41] gridGraphics_0.5-1 hms_1.1.3          bit64_4.5.2        systemfonts_1.1.0 \n[45] magick_2.8.5       gifski_1.32.0-1    codetools_0.2-20   stringi_1.8.4     \n[49] gtable_0.3.6       munsell_0.5.1      pillar_1.9.0       rappdirs_0.3.3    \n[53] htmltools_0.5.8.1  R6_2.5.1           httr2_1.0.6        rprojroot_2.0.4   \n[57] vroom_1.6.5        evaluate_1.0.1     markdown_1.13      gridtext_0.1.5    \n[61] snakecase_0.11.1   renv_1.0.3         Rcpp_1.0.13-1      svglite_2.1.3     \n[65] xfun_0.49          fs_1.6.5           pkgconfig_2.0.3   \n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_2025_08.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2025/tt_2025_08.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n\n#### 10. References\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1. Data Sources:\n\n   - TidyTuesday 2025 Week 08]: [Academic Literature on Racial and Ethnic Disparities in Reproductive Medicine in the US](https://github.com/rfordatascience/tidytuesday/blob/main/data/2025/2025-02-25)\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}