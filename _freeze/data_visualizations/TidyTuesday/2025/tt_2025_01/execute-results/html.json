{
  "hash": "3a7dcd9dfee089fb8f265f4245feb330",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Aid Worker Security: A Global Analysis of Risks and Incidents\"\nsubtitle: \"Analysis of attack patterns and their impact on humanitarian organizations worldwide\"\ndescription: \"Exploring the complexities of humanitarian aid worker security through data visualization. This analysis reveals critical patterns in attack incidents and risk levels across global conflict zones, demonstrating how different humanitarian organizations face varying security challenges. The visualization combines risk score analysis with incident frequency data, offering insights into the disconnect between severity and frequency of security events in different regions\"\nauthor: \"Steven Ponce\"\ndate: \"2025-01-07\" \ncategories: [TidyTuesday, Data Visualization, R Programming]  \ntags: [tidytuesday, rstats, dataviz, ggplot2, patchwork, humanitarian, security, data-analysis, tidyverse, risk-analysis, aid-workers, conflict-zones, visualization, heatmap, bar-chart, dual-panel]\nimage: \"thumbnails/tt_2025_01.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\nfilters:\n  - social-share\nshare:\n  permalink: \"https://stevenponce.netlify.app/data_visualizations/TidyTuesday/2025/tt_2025_01.html\"\n  description: \"A data visualization exploring global aid worker security patterns, revealing how risk severity and incident frequency vary across regions and humanitarian organizations. #TidyTuesday 2025 Week 1\"\n  twitter: true\n  linkedin: true\n  email: true\n  facebook: false\n  reddit: false\n  stumble: false\n  tumblr: false\n  mastodon: true\n  bsky: true\n---\n\n\n\n![This visualization examines aid worker security from 2017 to 2024. The top section features a dual bar chart comparing the risk scores and number of incidents across 10 countries. The Occupied Palestinian Territories have the highest risk score, while Afghanistan and South Sudan have the most incidents, highlighting differences in the severity versus frequency of attacks. The bottom section displays a heatmap showing attack impacts on different organization types (ICRC, INGO, NNGO, NRCS/IFRC, UN). The heatmap reveals that INGOs are most affected by shootings and kidnappings, while UN organizations experience a broader distribution of attack types. Color intensity indicates the number of aid workers impacted..](tt_2025_01.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\npacman::p_load(\n    tidyverse,      # Easily Install and Load the 'Tidyverse'\n    ggtext,         # Improved Text Rendering Support for 'ggplot2'\n    showtext,       # Using Fonts More Easily in R Graphs\n    janitor,        # Simple Tools for Examining and Cleaning Dirty Data\n    skimr,          # Compact and Flexible Summaries of Data\n    scales,         # Scale Functions for Visualization\n    glue,           # Interpreted String Literals\n    here,           # A Simpler Way to Find Your Files\n    patchwork,      # The Composer of Plots\n    camcorder,      # Record Your Plot History \n    readxl          # Read Excel Files\n)\n})\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n:::\n\n\n\n#### 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\naid_raw <- read_excel(\n  here::here(\"data/Aid Worker Incidents.xlsx\")) |> \n    clean_names()\n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(aid_raw)\nskim(aid_raw)\n```\n:::\n\n\n\n#### 4. Tidy Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# data plot ---\n# data for both risk score and incidents\ncountry_analysis <- aid_raw |>\n    group_by(country) |>  \n    mutate(risk_score = total_killed * 3 + total_wounded * 2 + total_kidnapped) |>\n    summarise(\n        avg_risk = mean(risk_score),\n        incidents = n(),\n        total_affected = sum(total_affected),\n        .groups = 'drop'\n    ) |>\n    arrange(desc(incidents)) |>\n    slice_head(n = 10)\n\n# Vulnerability Heatmap\nvulnerability_matrix <- aid_raw |>\n    select(un, ingo, icrc, nrcs_and_ifrc, nngo, means_of_attack) |>\n    pivot_longer(-means_of_attack, \n                 names_to = \"org_type\", \n                 values_to = \"count\") |>\n    group_by(means_of_attack, org_type) |>\n    summarise(total_affected = sum(count), .groups = 'drop') |>\n    mutate(\n        org_type = case_when(\n            org_type == \"un\" ~ \"UN\",\n            org_type == \"ingo\" ~ \"INGO\",\n            org_type == \"icrc\" ~ \"ICRC\",\n            org_type == \"nrcs_and_ifrc\" ~ \"NRCS/IFRC\",\n            org_type == \"nngo\" ~ \"NNGO\"\n        ),\n        means_of_attack = str_to_title(means_of_attack)\n    )\n```\n:::\n\n\n\n#### 5. Visualization Parameters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(palette = c(\"#f7fbff\", \"#9ecae1\", \"#2171b5\", \"#084594\"))\n\n### |-  titles and caption ----\ntitle_text    <- str_glue(\"Aid Worker Security: A Global Analysis of Risks and Incidents\")\nsubtitle_text <- str_glue(\"Analysis of attack patterns and their impact on humanitarian organizations worldwide\")\n\n# Create caption\ncaption_text <- create_social_caption(\n    tt_year = 2025,\n    tt_week = 01,\n    source_text = \"Aid Worker Security Database via Makeover Monday\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n    base_theme,\n    theme(\n        # Weekly-specific modifications\n        axis.line.x           = element_line(color = \"#252525\", linewidth = .2),\n        \n        panel.spacing.x       = unit(2, 'lines'),\n        panel.spacing.y       = unit(1, 'lines'),\n        panel.grid.major.x    = element_blank(),\n        panel.grid.major.y    = element_line(color = alpha(colors[5], 0.2), linewidth = 0.2),\n        panel.grid.minor      = element_blank(),\n    )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n:::\n\n\n\n#### 6. Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  Plot ----\n# 1. Risk Score Plot\np1 <- ggplot(country_analysis, \n             aes(x = reorder(country, avg_risk), \n                 y = avg_risk)) +\n    geom_col(fill = colors$palette[4]) +\n    coord_flip() +\n    labs(\n        title = \"Risk Score by Country\",\n        subtitle = \"Risk Score = (Deaths × 3) + (Injuries × 2) + Kidnappings\",  \n        x = NULL,\n        y = \"Risk Score\"\n    ) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = rel(1)),\n        plot.subtitle = element_text(size = 10, color = colors$text),\n        panel.grid.minor = element_blank(),\n        panel.grid.major.y = element_blank()\n    )\n\n# 2. Incidents Count Plot\np2 <- ggplot(country_analysis, \n             aes(x = reorder(country, avg_risk), \n                 y = incidents)) +\n    geom_col(fill = colors$palette[2]) +\n    coord_flip() +\n    labs(\n        title = \"Number of Incidents\",\n        x = NULL,\n        y = \"Number of Incidents\"\n    ) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = rel(1)),\n        panel.grid.minor = element_blank(),\n        panel.grid.major.y = element_blank(),\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank()\n    )\n\n# 3. Vulnerability Heatmap\np3 <- ggplot(vulnerability_matrix, \n                             aes(x = org_type, \n                                 y = means_of_attack, \n                                 fill = total_affected)) +\n    geom_tile(color = \"white\", linewidth = 0.5) +\n    scale_fill_gradientn(\n        colors = colors$palette,\n        na.value = \"#f0f0f0\",\n        name = \"Total\\nAffected\"\n    ) +\n    labs(\n        title = \"Attack Impact by Organization Type and Method\",\n        subtitle = \"Total number of aid workers affected by each type of attack\",\n        x = \"Organization Type\",\n        y = NULL\n    ) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(size = 12, color = \"gray30\"),\n        plot.caption = element_text(size = 8, color = \"gray50\"),\n        panel.grid = element_blank(),\n        axis.text.x = element_text(angle = 45, hjust = 1),\n        legend.position = \"right\"\n    )\n\n# Final combined plot \ncombined_plot <- (p1 + p2) / p3 +\n    plot_layout(heights = c(1,1)) \n\ncombined_plot <- combined_plot +\n    plot_annotation(\n        title    = title_text,\n        subtitle = subtitle_text,\n        caption  = caption_text,\n        theme = theme(\n            plot.title = element_text(\n                family = fonts$title, \n                size   = rel(1.9), \n                face   = \"bold\",\n                color  = colors$title,\n                margin = margin(b = 10)\n            ),\n            plot.subtitle = element_text(\n                family = fonts$text,\n                lineheight = 1.1,\n                size   = rel(1.1),\n                color  = colors$subtitle,\n                margin = margin(b = 15)\n            ),\n            plot.caption = element_markdown(\n                family = fonts$caption,\n                size   = rel(0.65),\n                color  = colors$caption,\n                hjust  = 0.5,\n                margin = margin(t = 5)\n            ),\n            plot.margin = margin(10, 10, 10, 10),\n        )\n    )   \n```\n:::\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \n\nsave_plot_patchwork (combined_plot, type = \"tidytuesday\", \n          year = 2025, week = 01, width = 10, height = 12)\n```\n:::\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] readxl_1.4.3    camcorder_0.1.0 patchwork_1.3.0 here_1.0.1     \n [5] glue_1.8.0      scales_1.3.0    skimr_2.1.5     janitor_2.2.0  \n [9] showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2   \n[13] lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4    \n[17] purrr_1.0.2     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   \n[21] ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       xfun_0.49          htmlwidgets_1.6.4  tzdb_0.4.0        \n [5] yulab.utils_0.1.8  vctrs_0.6.5        tools_4.4.0        generics_0.1.3    \n [9] curl_6.0.0         gifski_1.32.0-1    fansi_1.0.6        pacman_0.5.1      \n[13] pkgconfig_2.0.3    ggplotify_0.1.2    lifecycle_1.0.4    compiler_4.4.0    \n[17] farver_2.1.2       munsell_0.5.1      repr_1.1.7         codetools_0.2-20  \n[21] snakecase_0.11.1   htmltools_0.5.8.1  yaml_2.3.10        pillar_1.9.0      \n[25] magick_2.8.5       commonmark_1.9.2   tidyselect_1.2.1   digest_0.6.37     \n[29] stringi_1.8.4      labeling_0.4.3     rsvg_2.6.1         rprojroot_2.0.4   \n[33] fastmap_1.2.0      grid_4.4.0         colorspace_2.1-1   cli_3.6.3         \n[37] magrittr_2.0.3     base64enc_0.1-3    utf8_1.2.4         withr_3.0.2       \n[41] timechange_0.3.0   rmarkdown_2.29     cellranger_1.1.0   hms_1.1.3         \n[45] evaluate_1.0.1     knitr_1.49         markdown_1.13      gridGraphics_0.5-1\n[49] rlang_1.1.4        gridtext_0.1.5     Rcpp_1.0.13-1      xml2_1.3.6        \n[53] renv_1.0.3         svglite_2.1.3      rstudioapi_0.17.1  jsonlite_1.8.9    \n[57] R6_2.5.1           fs_1.6.5           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_2025_01.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2025/tt_2025_01.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n\n#### 10. References\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1. Data Sources:\n   - Aid Worker Security Database (AWSD): [Search Incidents](https://www.aidworkersecurity.org/incidents/search)\n   - Makeover Monday 2024 Week 46: [Aid Worker Security Incidents](https://data.world/makeovermonday/2024w46-aid-worker-security-incidents)\n\n2. Reports:\n   - Humanitarian Outcomes. (2024). [Aid Worker Security Report: Figures at a Glance 2024](https://humanitarianoutcomes.org/sites/default/files/publications/figures_at_a_glance_2024.pdf)\n   \n \n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}