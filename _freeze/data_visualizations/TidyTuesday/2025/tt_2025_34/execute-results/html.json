{
  "hash": "7236b9c1ed875d5a8e2e4143d6a47f50",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"From Macarena to Bad Bunny: Latin Music's Billboard Evolution\"\nsubtitle: \"Five cultural waves that transformed American popular music (1995-2022)\"\ndescription: \"Analyzing Latin music's Billboard Hot 100 evolution from 1995-2022 through data visualization. This TidyTuesday project tracks five cultural waves that transformed American charts, from Macarena's dance revolution to Bad Bunny's streaming dominance, using R and ggplot2 to reveal Latin music's path from crossover novelty to mainstream success.\"\nauthor: \"Steven Ponce\"\ndate: \"2025-08-25\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2025\"]\ntags: [\n  \"billboard\",\n  \"latin-music\", \n  \"music-analysis\",\n  \"cultural-trends\",\n  \"chart-analysis\",\n  \"ggplot2\",\n  \"faceted-charts\",\n  \"timeline-visualization\",\n  \"music-industry\",\n  \"cultural-impact\",\n  \"streaming-era\",\n  \"reggaeton\",\n  \"data-storytelling\"\n]\nimage: \"thumbnails/tt_2025_34.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                    \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n![Two-panel chart illustrating the evolution of Latin music on the Billboard charts from 1995 to 2022. The top timeline shows major hits, including \"Despacito\" (16 weeks) and \"Macarena\" (14 weeks), as peaks. Bottom-faceted bar charts display the top songs across five cultural waves: Dance Revolution (Macarena), Latin Pop Wave (Ricky Martin, Jennifer Lopez), Crossover Success (Santana), Streaming Era (Despacito), and Urban Takeover (Cardi B). Data demonstrates Latin music's progression from novelty hits to mainstream dominance.)](tt_2025_34.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse,   # Easily Install and Load the 'Tidyverse'\n    ggtext,      # Improved Text Rendering Support for 'ggplot2'\n    showtext,    # Using Fonts More Easily in R Graphs\n    janitor,     # Simple Tools for Examining and Cleaning Dirty Data\n    scales,      # Scale Functions for Visualization\n    glue,        # Interpreted String Literals,\n    ggrepel,     # Automatically Position Non-Overlapping Text Labels with 'ggplot2' \n    patchwork    # The Composer of Plots\n  )})\n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  = 10,\n  height = 12,\n  units  = \"in\",\n  dpi    = 300\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### 2. Read in the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n\ntt <- tidytuesdayR::tt_load(2025, week = 34)\n\nbillboard <- tt$billboard |> clean_names()\ntopics <- tt$topics |> clean_names()\n\ntidytuesdayR::readme(tt)\nrm(tt)\n```\n````\n:::\n\n\n#### 3. Examine the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(billboard)\nglimpse(topics)\n```\n````\n:::\n\n\n#### 4. Tidy Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\nbillboard_latin_clean <- billboard |>\n  mutate(\n    date = if (inherits(date, \"Date\")) date else as.Date(date),\n    year = year(date),\n    is_latin_country = artist_place_of_origin %in% c(\n      \"Mexico\", \"Puerto Rico\", \"Colombia\", \"Argentina\", \"Spain\",\n      \"Cuba\", \"Dominican Republic\", \"Venezuela\", \"Peru\", \"Chile\",\n      \"Ecuador\", \"Guatemala\", \"Costa Rica\", \"Panama\", \"Brazil\"\n    ),\n    is_latin_artist = case_when(\n      str_detect(tolower(artist), paste(c(\n        \"shakira\", \"ricky martin\", \"jennifer lopez|j\\\\.?lo\", \"marc anthony\",\n        \"enrique iglesias\", \"luis fonsi\", \"daddy yankee\", \"ozuna|bad bunny|j balvin|maluma\",\n        \"camila cabello|pitbull\", \"santana\", \"selena\", \"los del rio\",\n        \"cardi b\", \"maroon 5\"\n      ), collapse = \"|\")) ~ TRUE,\n      is_latin_country ~ TRUE,\n      TRUE ~ FALSE\n    ),\n    spanish_language = case_when(\n      str_detect(tolower(song), paste(c(\n        \"despacito\", \"macarena\", \"la vida loca\", \"gasolina\", \"danza kuduro\", \"baila\", \"amor\", \"corazón\"\n      ), collapse = \"|\")) ~ TRUE,\n      foreign_language == 1 & is_latin_artist ~ TRUE,\n      TRUE ~ FALSE\n    )\n  ) |>\n  filter(is_latin_artist, !is.na(year), !is.na(weeks_at_number_one)) |>\n  mutate(\n    song_clean = case_when(\n      str_detect(artist, \"Los del Río\") ~ \"Macarena (Bayside Boys Mix)\",\n      str_detect(artist, \"Santana ft. Rob Thomas\") ~ \"Smooth\",\n      str_detect(artist, \"Santana\") & !str_detect(artist, \"ft.\") ~ \"Smooth\",\n      str_detect(artist, \"Maroon 5 ft. Cardi B\") ~ \"Girls Like You\",\n      str_detect(artist, \"Maroon 5\") & year == 2012 ~ \"One More Night\",\n      str_detect(artist, \"Maroon 5\") ~ \"Girls Like You\",\n      str_detect(artist, \"Pitbull ft. Kesha\") ~ \"Timber\",\n      str_detect(artist, \"Jennifer Lopez ft. Ja Rule & Caddillac Tah\") ~ \"I'm Real\",\n      str_detect(artist, \"Ricky Martin\") ~ \"Livin' La Vida Loca\",\n      str_detect(artist, \"Jennifer Lopez\") & !str_detect(artist, \"ft.\") ~ \"All I Have\",\n      str_detect(artist, \"Luis Fonsi & Daddy Yankee ft. Justin Bieber\") ~ \"Despacito\",\n      str_detect(artist, \"Cardi B ft. Megan Thee Stallion\") ~ \"WAP\",\n      str_detect(artist, \"Cardi B(?!,)|^Cardi B$\") ~ \"Bodak Yellow\",\n      str_detect(artist, \"Cardi B, Bad Bunny, & J Balvin\") ~ \"I Like It\",\n      !is.na(song) & !is.logical(song) & song != \"\" ~ as.character(song),\n      TRUE ~ NA_character_\n    ),\n    artist_clean = str_remove(artist, \" feat.*|, feat.*|ft\\\\..*\"),\n    milestone_type = case_when(\n      str_detect(tolower(song_clean), \"macarena\") ~ \"Dance Revolution\",\n      str_detect(tolower(artist_clean), \"ricky martin|jennifer lopez|marc anthony\") ~ \"Latin Pop Wave\",\n      str_detect(tolower(song_clean), \"despacito\") ~ \"Streaming Era\",\n      str_detect(tolower(artist_clean), \"cardi b|bad bunny|j balvin\") ~ \"Urban Takeover\",\n      TRUE ~ \"Crossover Success\"\n    ),\n    overall_rating = ifelse(is.na(overall_rating), median(overall_rating, na.rm = TRUE), overall_rating),\n    song_display = if_else(!is.na(song_clean) & song_clean != \"\", song_clean, paste0(\"Hit by \", artist_clean)),\n    artist_display = artist_clean\n  ) |>\n  filter(\n    !is.na(artist_display),\n    !str_detect(tolower(artist_display), \"chris brown|bruno mars\")\n  ) |>\n  distinct(artist, year, .keep_all = TRUE) |>\n  arrange(year)\n\nera_levels <- c(\n  \"Dance Revolution\", \"Latin Pop Wave\", \"Crossover Success\",\n  \"Urban Takeover\", \"Streaming Era\"\n)\n\nbillboard_latin_clean <- billboard_latin_clean |>\n  mutate(milestone_type = factor(milestone_type, levels = era_levels))\n\n# P1: timeline chart data\ntimeline_data <- billboard_latin_clean |>\n  mutate(\n    label_show = ifelse(weeks_at_number_one >= 5, artist_display, NA_character_),\n    label_face = ifelse(weeks_at_number_one >= 8, \"bold\", \"plain\")\n  )\n\n# P2: Faceted bars data\nbars_data <- billboard_latin_clean |>\n  mutate(\n    clean_label = ifelse(!is.na(song_clean) & song_clean != \"\",\n      glue(\"‘{song_clean}’\\n{artist_display}\"),\n      artist_display\n    )\n  ) |>\n  group_by(milestone_type) |>\n  arrange(desc(weeks_at_number_one), desc(overall_rating)) |>\n  distinct(artist_display, .keep_all = TRUE) |>\n  slice_head(n = 4) |>\n  ungroup()\n```\n````\n:::\n\n\n#### 5. Visualization Parameters\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\n# Get basic theme colors\ncolors <- get_theme_colors()\n\npalette_fill <- c(\n  \"Dance Revolution\" = \"#F39C12\",\n  \"Latin Pop Wave\" = \"#2C7BB6\",\n  \"Crossover Success\" = \"#7F8C8D\",\n  \"Urban Takeover\" = \"#8E44AD\",\n  \"Streaming Era\" = \"#12A15E\"\n)\n\npalette_text <- c(\n  \"Dance Revolution\" = \"#C2700F\",\n  \"Latin Pop Wave\" = \"#1D5B8C\",\n  \"Crossover Success\" = \"#4F5A5E\",\n  \"Urban Takeover\" = \"#6A2991\",\n  \"Streaming Era\" = \"#0E7D49\"\n)\n\n\n### |- titles and caption ----\ntitle_text <- str_glue(\"From Macarena to Bad Bunny: Latin Music's Billboard Evolution\")\n\nsubtitle_text <- str_glue(\n  \"Five cultural waves that transformed American popular music (1995-2022)\"\n)\n\ncaption_text <- create_social_caption(\n  tt_year = 2025,\n  tt_week = 34,\n  source_text = \"Billboard Hot 100 Number Ones\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(face = \"bold\", family = fonts$title, size = rel(1.2), color = colors$title, margin = margin(b = 10)),\n    plot.subtitle = element_text(family = fonts$subtitle, lineheight = 1.2, color = colors$subtitle, size = rel(0.78), margin = margin(b = 20)),\n\n    # Axis elements\n    axis.line = element_blank(),\n    axis.ticks = element_blank(),\n\n    # Grid elements\n    panel.grid.major = element_line(color = \"gray90\", linetype = \"solid\", linewidth = 0.3),\n    # panel.grid.major.y = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.minor.y = element_blank(),\n\n    # Axis elements\n    axis.text = element_text(color = colors$text, size = rel(0.7)),\n    axis.title.x = element_text(color = colors$text, face = \"bold\", size = rel(0.8), margin = margin(t = 15)),\n    axis.title.y = element_text(color = colors$text, face = \"bold\", size = rel(0.8), margin = margin(r = 10)),\n\n    # Legend elements\n    legend.position = \"plot\",\n    legend.title = element_text(family = fonts$tsubtitle, color = colors$text, size = rel(0.8), face = \"bold\"),\n    legend.text = element_text(family = fonts$tsubtitle, color = colors$text, size = rel(0.7)),\n    legend.margin = margin(t = 15),\n\n    # Plot margin\n    plot.margin = margin(t = 15, r = 15, b = 15, l = 15),\n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### 6. Plot\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n# P1 timeline chart\np1 <- timeline_data |>\n  ggplot(aes(x = year, y = weeks_at_number_one)) +\n  # Geoms\n  geom_point(aes(fill = milestone_type), shape = 21, color = \"white\", stroke = 1.2, alpha = 0.95, size = 5) +\n  ggrepel::geom_text_repel(\n    aes(label = label_show, color = milestone_type, fontface = label_face),\n    family = \"inter\", size = 3.2, box.padding = 0.5, point.padding = 0.4,\n    min.segment.length = 0.2, max.overlaps = 12, nudge_y = 1, segment.color = \"grey60\",\n    show.legend = FALSE, seed = 43\n  ) +\n  # Scales\n  scale_fill_manual(values = palette_fill, name = \"Cultural Wave\") +\n  scale_color_manual(values = palette_text, guide = \"none\") +\n  scale_x_continuous(breaks = seq(1995, 2020, 5), limits = c(1995, 2022)) +\n  scale_y_continuous(breaks = seq(0, 16, 4), limits = c(0, 18), labels = \\(x) paste0(x, \" w\")) +\n  # Labs\n  labs(\n    title = \"Five Waves That Took Latin Music to #1\",\n    subtitle = \"A timeline of Billboard #1s (1995–2022) and the waves that carried them\",\n    x = \"Year\",\n    y = \"Weeks at Number One\"\n  )\n\n# P2: faceted bars\np2 <- bars_data |>\n  ggplot(aes(x = reorder(clean_label, weeks_at_number_one), y = weeks_at_number_one, fill = milestone_type)) +\n  # Geoms\n  geom_col(width = 0.65, alpha = 0.9) +\n  geom_text(aes(label = paste0(weeks_at_number_one, \"w\")),\n    hjust = -0.12,\n    size = 3.1, color = \"grey20\", family = \"inter\", fontface = \"bold\"\n  ) +\n  # Scales\n  scale_fill_manual(values = palette_fill, guide = \"none\") +\n  coord_flip() +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.18))) +\n  # Labs\n  labs(\n    title = \"Top Hits by Cultural Wave\",\n    subtitle = \"Each era’s biggest #1 streaks (weeks at number one)\",\n    x = NULL,\n    y = \"Weeks at Number One\"\n  ) +\n  # Facets\n  facet_wrap(~milestone_type, ncol = 2, scales = \"free\") +\n  # Theme\n  theme(\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor = element_blank(),\n    # panel.grid.major = element_blank(),  #element_line(color = \"grey90\", size = 0.3),\n    strip.text = element_text(size = 10, face = \"bold\", color = \"grey20\"),\n    strip.background = element_rect(fill = \"grey90\", color = NA),\n    axis.text.y = element_text(size = 9),\n    axis.text.x = element_text(size = 9),\n  )\n\n# Combined plots\ncombined_plots <- p1 / p2 +\n  plot_layout(heights = c(1, 3))\n\ncombined_plots <- combined_plots +\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    theme = theme(\n      plot.title = element_text(\n        size = rel(1.7),\n        family = fonts$title,\n        face = \"bold\",\n        color = colors$title,\n        lineheight = 1.1,\n        margin = margin(t = 5, b = 5)\n      ),\n      plot.subtitle = element_text(\n        size = rel(1),\n        family = fonts$subtitle,\n        color = alpha(colors$subtitle, 0.9),\n        lineheight = 1.2,\n        margin = margin(t = 5, b = 10)\n      ),\n      plot.caption = element_markdown(\n        size = rel(0.6),\n        family = fonts$caption,\n        color = colors$caption,\n        hjust = 0.5,\n        margin = margin(t = 10)\n      )\n    )\n  )\n```\n````\n:::\n\n\n#### 7. Save\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot_patchwork(\n  plot = combined_plots, \n  type = \"tidytuesday\", \n  year = 2025, \n  week = 34, \n  width  = 10,\n  height = 12\n  )\n```\n````\n:::\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      patchwork_1.3.0 ggrepel_0.9.6   glue_1.8.0     \n [5] scales_1.3.0    janitor_2.2.0   showtext_0.9-7  showtextdb_3.0 \n [9] sysfonts_0.8.9  ggtext_0.1.2    lubridate_1.9.3 forcats_1.0.0  \n[13] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n[17] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n[21] pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       httr2_1.0.6        xfun_0.49          htmlwidgets_1.6.4 \n [5] gh_1.4.1           tzdb_0.5.0         vctrs_0.6.5        tools_4.4.0       \n [9] generics_0.1.3     parallel_4.4.0     curl_6.0.0         gifski_1.32.0-1   \n[13] fansi_1.0.6        pkgconfig_2.0.3    lifecycle_1.0.4    compiler_4.4.0    \n[17] farver_2.1.2       textshaping_0.4.0  munsell_0.5.1      codetools_0.2-20  \n[21] snakecase_0.11.1   htmltools_0.5.8.1  yaml_2.3.10        crayon_1.5.3      \n[25] pillar_1.9.0       camcorder_0.1.0    magick_2.8.5       commonmark_1.9.2  \n[29] tidyselect_1.2.1   digest_0.6.37      stringi_1.8.4      labeling_0.4.3    \n[33] rsvg_2.6.1         rprojroot_2.0.4    fastmap_1.2.0      grid_4.4.0        \n[37] colorspace_2.1-1   cli_3.6.4          magrittr_2.0.3     utf8_1.2.4        \n[41] withr_3.0.2        rappdirs_0.3.3     bit64_4.5.2        timechange_0.3.0  \n[45] rmarkdown_2.29     tidytuesdayR_1.1.2 gitcreds_0.1.2     bit_4.5.0         \n[49] ragg_1.3.3         hms_1.1.3          evaluate_1.0.1     knitr_1.49        \n[53] markdown_1.13      rlang_1.1.6        gridtext_0.1.5     Rcpp_1.0.13-1     \n[57] xml2_1.3.6         renv_1.0.3         vroom_1.6.5        svglite_2.1.3     \n[61] rstudioapi_0.17.1  jsonlite_1.8.9     R6_2.5.1           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_2025_34.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2025/tt_2025_34.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### 10. References\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1.  Data Sources:\n\n-   TidyTuesday 2025 Week 34: \\[Billboard Hot 100 Number Ones\\](https://github.com/rfordatascience/tidytuesday/blob/main/data/2025/2025-08-26)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}