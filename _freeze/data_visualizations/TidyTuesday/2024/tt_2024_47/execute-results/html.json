{
  "hash": "e99cf3dad1b4fba4ae8c955c47a6aef1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Bob's Burgers: Questioning Nature of Dialogue\"\nsubtitle: \"Questions dominate dialogue, with rare exceptions (highlighted). Red circles (○) indicate episodes where exclamations exceed questions\"\nauthor: \"Steven Ponce\"\ndate: \"2024-11-18\"\ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2024\"]\nimage: \"thumbnails/tt_2024_47.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\neditor_options: \n  \n  chunk_output_type: inline\nexecute: \n  \n  error: false\n  message: false\n  warning: false\n  eval: true\n# share:\n#   permalink: \"https://stevenponce.netlify.app/data_visualizations.png\"\n#   linkedin: true\n#   twitter: true\n#   email: true\n---\n\n![Time series visualization showing the proportion of questions vs. exclamations in Bob's Burgers dialogue across 14 seasons (2011-2024). Blue lines (questions) consistently trend higher than coral lines (exclamations), ranging 5-20%. Red circles highlight episodes where exclamations exceed questions.](tt_2024_47.png){#fig-1}\n\n\n### <mark> __Steps to Create this Graphic__ </mark>\n\n#### 1. Load Packages & Setup \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n\n## 1. LOAD PACKAGES & SETUP ----\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse,         # Easily Install and Load the 'Tidyverse'\n    ggtext,            # Improved Text Rendering Support for 'ggplot2'\n    showtext,          # Using Fonts More Easily in R Graphs\n    janitor,           # Simple Tools for Examining and Cleaning Dirty Data\n    skimr,             # Compact and Flexible Summaries of Data\n    scales,            # Scale Functions for Visualization\n    glue,              # Interpreted String Literals\n    here,              # A Simpler Way to Find Your Files\n    marquee            # Markdown Parser and Renderer for R Graphic\n)    \n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  =  10,\n  height =  10,\n  units  = \"in\",\n  dpi    = 320\n)\n\n### |- resolution ----\nshowtext_opts(dpi = 320, regular.wt = 300, bold.wt = 800)\n```\n````\n:::\n\n\n#### 2. Read in the Data \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n\ntt <- tidytuesdayR::tt_load(2024, week = 47) \n\nepisode_metrics <- tt$episode_metrics|> clean_names() \n\ntidytuesdayR::readme(tt)\nrm(tt)\n```\n````\n:::\n\n\n#### 3. Examine the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(episode_metrics)\nskim(episode_metrics)\n```\n````\n:::\n\n\n#### 4. Tidy Data \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\n### |- tidy data ----\n\n### |- plot data ----\n\nplot_data <- episode_metrics |>\n  pivot_longer(\n    cols = c(question_ratio, exclamation_ratio),\n    names_to = \"ratio_type\", values_to = \"value\"\n  ) |>\n  mutate(\n    ratio_type = case_when(\n      ratio_type == \"question_ratio\" ~ \"Questions\",\n      ratio_type == \"exclamation_ratio\" ~ \"Exclamations\"\n    )\n  )\n\n### |- highlight data ----\n\nhighlight_data <- plot_data |>\n  pivot_wider(names_from = ratio_type, values_from = value) |>\n  filter(Exclamations > Questions)\n```\n````\n:::\n\n\n\n#### 5. Visualization Parameters \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |- plot aesthetics ----\nbkg_col      <- \"#f5f5f2\"  \ntitle_col    <- \"gray20\"           \nsubtitle_col <- \"gray20\"     \ncaption_col  <- \"gray30\"   \ntext_col     <- \"gray30\"    \ncol_palette  <- c(\"Questions\" = \"#2171b5\", \"Exclamations\" = \"#ef8a62\")\n\n### |-  titles and caption ----\n# icons\ntt <- str_glue(\"#TidyTuesday: { 2024 } Week { 47 } &bull; Source: bobsburgersR R Package<br>\")\nli <- str_glue(\"<span style='font-family:fa6-brands'>&#xf08c;</span>\")\ngh <- str_glue(\"<span style='font-family:fa6-brands'>&#xf09b;</span>\")\nbs <- str_glue(\"<span style='font-family:fa6-brands'>&#xe671; </span>\")\n\n# text\ntitle_text    <- str_glue(\"Bob's Burgers: Questioning Nature of Dialogue\")\n\nsubtitle_text <- \"Questions dominate dialogue (15-20%), with rare exceptions in early seasons (highlighted)\\n\\n\nRed circles ({#FF0000 **○**}) indicate episodes where {#ef8a62 **_exclamations_**} exceed {#2171b5 **_questions_**}, more common in seasons 1-6\"\n\ncaption_text  <- str_glue(\"{tt} {li} stevenponce &bull; {bs} sponce1 &bull; {gh} poncest &bull; #rstats #ggplot2\")\n\n### |-  fonts ----\nfont_add(\"fa6-brands\", here::here(\"fonts/6.6.0/Font Awesome 6 Brands-Regular-400.otf\"))\nfont_add_google(\"Oswald\", regular.wt = 400, family = \"title\")\nfont_add_google(\"Source Sans Pro\", family = \"text\")\nfont_add_google(\"Roboto Mono\", family = \"numbers\")\nfont_add_google(\"Noto Sans\", regular.wt = 400, family = \"caption\")\nshowtext_auto(enable = TRUE)\n\n### |-  plot theme ----\ntheme_set(theme_minimal(base_size = 14, base_family = \"text\"))                \n\ntheme_update(\n    plot.title.position   = \"plot\",\n    plot.caption.position = \"plot\",\n    legend.position       = \"plot\",\n    plot.background       = element_rect(fill = bkg_col, color = bkg_col),\n    panel.background      = element_rect(fill = bkg_col, color = bkg_col),\n    plot.margin           = margin(t = 10, r = 20, b = 10, l = 20),\n    axis.title.x          = element_text(margin = margin(10, 0, 0, 0), size = rel(1.1), \n                                         color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n    axis.title.y          = element_text(margin = margin(0, 10, 0, 0), size = rel(1.1), \n                                         color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n    axis.text             = element_text(size = rel(0.6), color = text_col, family = \"numbers\"),\n    axis.ticks.x          = element_line(color = text_col),\n    axis.line.x           = element_line(color = \"#252525\", linewidth = .2),\n    panel.grid.minor      = element_blank(),\n    panel.grid.major      = element_blank(),\n    panel.grid.major.y    = element_line(color = \"grey90\", linewidth = 0.2),\n    panel.spacing.x       = unit(2, \"lines\"),\n    panel.spacing.y       = unit(2, \"lines\"),\n    strip.text            = element_text(size = rel(1), face = \"bold\", margin = margin(b = 10), family = \"text\"),\n) \n```\n````\n:::\n\n\n\n#### 6. Plot \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |-  plot ----\np <- plot_data |>\n  ggplot(aes(x = episode, y = value * 100, color = ratio_type)) +\n\n  # Geoms\n  geom_line(aes(alpha = ratio_type), linewidth = 1) +\n  geom_point(aes(alpha = ratio_type), size = 1.3) +\n  geom_point(\n    data = highlight_data,\n    aes(y = Exclamations * 100),\n    color = \"red\", size = 4, shape = 1, stroke = 0.8\n  ) +\n\n  # Scales\n  scale_x_continuous() +\n  scale_y_continuous(labels = scales::label_number(suffix = \"%\")) +\n  scale_color_manual(values = col_palette) +\n  scale_alpha_manual(values = c(\"Questions\" = 1, \"Exclamations\" = 0.3)) +\n  guides(alpha = \"none\") +\n  coord_cartesian(clip = \"off\") +\n\n  # Labs\n  labs(\n    x = \"Episode Number\",\n    y = \"Proportion of Total Sentences\",\n    color = \"Sentence Type\",\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text\n  ) +\n\n  # Facet\n  facet_wrap(~season,\n    labeller = label_both\n  ) +\n\n  # Theme\n  theme(\n    plot.title = element_text(\n      size        = rel(2.3),\n      family      = \"title\",\n      face        = \"bold\",\n      color       = title_col,\n      margin      = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_marquee(\n      size        = rel(1.05),\n      family      = \"subtitle\",\n      color       = title_col,\n      lineheight  = 1.1,\n      margin      = margin(t = 5, b = 15)\n    ),\n    plot.caption = element_markdown(\n      size        = rel(.65),\n      family      = \"caption\",\n      color       = caption_col,\n      lineheight  = 0.65,\n      hjust       = 0.5,\n      halign      = 0.5,\n      margin      = margin(t = 10, b = 5)\n    ),\n  )\n```\n````\n:::\n\n\n\n\n#### 7. Save\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \n\n# Save the plot as PNG\nggsave(\n  filename = here::here(\"data_visualizations/TidyTuesday/2024/tt_2024_47.png\"), \n  plot = p,\n  width = 10, height = 10, units = \"in\", dpi = 320\n)\n\n### |-  plot thumbnail----\nmagick::image_read(here::here(\"data_visualizations/TidyTuesday/2024/tt_2024_47.png\")) |>\n  magick::image_resize(geometry = \"400\") |>\n  magick::image_write(here::here(\"data_visualizations/TidyTuesday/2024/thumbnails/tt_2024_47.png\"))\n```\n````\n:::\n\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] marquee_0.1.0   here_1.0.1      glue_1.8.0      scales_1.3.0   \n [5] skimr_2.1.5     janitor_2.2.0   showtext_0.9-7  showtextdb_3.0 \n [9] sysfonts_0.8.9  ggtext_0.1.2    lubridate_1.9.3 forcats_1.0.0  \n[13] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n[17] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n[21] pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       httr2_1.0.6        xfun_0.49          htmlwidgets_1.6.4 \n [5] gh_1.4.1           tzdb_0.5.0         vctrs_0.6.5        tools_4.4.0       \n [9] generics_0.1.3     parallel_4.4.0     curl_6.0.0         gifski_1.32.0-1   \n[13] fansi_1.0.6        pkgconfig_2.0.3    lifecycle_1.0.4    farver_2.1.2      \n[17] compiler_4.4.0     textshaping_0.4.0  munsell_0.5.1      repr_1.1.7        \n[21] codetools_0.2-20   snakecase_0.11.1   htmltools_0.5.8.1  yaml_2.3.10       \n[25] crayon_1.5.3       pillar_1.9.0       camcorder_0.1.0    magick_2.8.5      \n[29] commonmark_1.9.2   tidyselect_1.2.1   digest_0.6.37      stringi_1.8.4     \n[33] labeling_0.4.3     rsvg_2.6.1         rprojroot_2.0.4    fastmap_1.2.0     \n[37] grid_4.4.0         colorspace_2.1-1   cli_3.6.4          magrittr_2.0.3    \n[41] base64enc_0.1-3    utf8_1.2.4         withr_3.0.2        rappdirs_0.3.3    \n[45] bit64_4.5.2        timechange_0.3.0   rmarkdown_2.29     tidytuesdayR_1.1.2\n[49] gitcreds_0.1.2     bit_4.5.0          ragg_1.3.3         hms_1.1.3         \n[53] evaluate_1.0.1     knitr_1.49         markdown_1.13      rlang_1.1.6       \n[57] gridtext_0.1.5     Rcpp_1.0.13-1      xml2_1.3.6         renv_1.0.3        \n[61] vroom_1.6.5        svglite_2.1.3      rstudioapi_0.17.1  jsonlite_1.8.9    \n[65] R6_2.5.1           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n\n##### Expand for GitHub Repo\n \n[Access the GitHub repository here](https://github.com/poncest/personal-website/)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}