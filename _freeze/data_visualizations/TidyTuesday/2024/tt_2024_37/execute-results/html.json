{
  "hash": "350d47a2b6cdd960d18494d86f53adfd",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Distribution of College Attendance Rates by Selectivity Tier\"\nsubtitle: \"A Comparison of Attendance Rates for U.S. Colleges Across Selectivity Levels\"\nauthor: \"Steven Ponce\"\ndate: \"2024-09-10\"\ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2024\"]\nimage: \"thumbnails/tt_2024_37.png\"\nformat:\n  html:\n    code-fold: true\neditor_options: \n  chunk_output_type: console\nexecute: \n  error: false\n  message: false\n  warning: false\n  eval: false\n\n# filters:\n#   - social-share\n \n# share:\n#   permalink: \"https://stevenponce.netlify.app/data_visualizations.html\"\n#   linkedin: true\n#   twitter: true\n#   email: true\n---\n\n![A faceted bar plot displaying the distribution of college attendance rates based on selectivity tier. The x-axis is labeled \"Attendance Rate,\" and the y-axis is labeled \"Frequency.\" Six panels represent different college tiers: Ivy Plus, Highly Selective Private, Highly Selective Public, Other Elite Schools (Public and Private), Selective Private, and Selective Public. Each panel has a histogram in gray with colored bars highlighting specific sections, using different colors for each tier.](tt_2024_37.png){#fig-1}\n\n### <mark> __Steps to Create this Graphic__ </mark>\n\n#### 1. Load Packages & Setup \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n\npacman::p_load(\n  tidyverse,         # Easily Install and Load the 'Tidyverse'\n  ggtext,            # Improved Text Rendering Support for 'ggplot2'\n  showtext,          # Using Fonts More Easily in R Graphs\n  janitor,           # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,             # Compact and Flexible Summaries of Data\n  scales,            # Scale Functions for Visualization\n  lubridate,         # Make Dealing with Dates a Little Easier\n  MetBrewer,         # Color Palettes Inspired by Works at the Metropolitan Museum of Art\n  MoMAColors,        # Color Palettes Inspired by Artwork at the Museum of Modern Art in New York City\n  glue,              # Interpreted String Literals\n  gghighlight        # Highlight Lines and Points in 'ggplot2'\n )  \n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  =  7.77,\n  height =  8,\n  units  = \"in\",\n  dpi    = 320\n)\n\n### |- resolution ----\nshowtext_opts(dpi = 320, regular.wt = 300, bold.wt = 800)\n```\n````\n:::\n\n\n#### 2. Read in the Data \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n\ntt <-tidytuesdayR::tt_load(2024, week = 37) \n\ncollege_admissions <- tt$college_admissions |> clean_names() |> glimpse()\n\ntidytuesdayR::readme(tt)\nrm(tt)\n```\n````\n:::\n\n\n#### 3. Examing the Data \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n\nglimpse(college_admissions)\n```\n````\n:::\n\n\n#### 4. Tidy Data \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n\n# Tidy\ncollege_admissions_clean <- college_admissions  |> \n    filter(!is.na(attend)) |> \n    mutate(\n        tier = str_to_title(tier),\n        tier = case_when(\n            tier == \"Highly Selective Private\" ~ \"Highly Selective<br>Private\",\n            tier == \"Highly Selective Public\"  ~ \"Highly Selective<br>Public\",\n            tier == \"Other Elite Schools (Public And Private)\" ~ \"Other Elite Schools<br>(Public And Private)\",\n            TRUE ~ tier\n        ),\n        tier = factor(tier, \n                      levels = c(\"Ivy Plus\", \n                                 \"Highly Selective<br>Private\", \n                                 \"Highly Selective<br>Public\", \n                                 \"Other Elite Schools<br>(Public And Private)\", \n                                 \"Selective Private\", \n                                 \"Selective Public\"))\n    ) \n```\n````\n:::\n\n\n\n#### 5. Visualization Parameters \n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n\n### |- plot aesthetics ----\nbkg_col      <- colorspace::lighten('#f7f5e9', 0.05)    \ntitle_col    <- \"gray20\"           \nsubtitle_col <- \"gray20\"     \ncaption_col  <- \"gray30\"   \ntext_col     <- \"gray20\"    \ncol_palette  <- MoMAColors::moma.colors(palette_name = \"Panton\", n = 6, type = 'discrete')\n\n### |-  titles and caption ----\n# icons\ntt <- str_glue(\"#TidyTuesday: { 2024 } Week { 37 } &bull; Source: Opportunity Insights: College-Level Data for 139 Selective American Colleges<br>\")\nli <- str_glue(\"<span style='font-family:fa6-brands'>&#xf08c;</span>\")\ngh <- str_glue(\"<span style='font-family:fa6-brands'>&#xf09b;</span>\")\nmn <- str_glue(\"<span style='font-family:fa6-brands'>&#xf4f6;</span>\")\n\n# text\ntitle_text    <- str_glue(\"Distribution of College Attendance Rates by Selectivity Tier\")\nsubtitle_text <- str_glue(\"A Comparison of Attendance Rates for U.S. Colleges Across Selectivity Levels\")\ncaption_text  <- str_glue(\"{tt} {li} stevenponce &bull; {mn} @sponce1(graphic.social) {gh} poncest &bull; #rstats #ggplot2\")\n\n### |-  fonts ----\nfont_add(\"fa6-brands\", \"fonts/6.4.2/Font Awesome 6 Brands-Regular-400.otf\")\nfont_add_google(\"Oswald\", regular.wt = 400, family = \"title\")\nfont_add_google(\"Merriweather Sans\", regular.wt = 400, family = \"subtitle\")\nfont_add_google(\"Merriweather Sans\", regular.wt = 400, family = \"text\")\nfont_add_google(\"Noto Sans\", regular.wt = 400, family = \"caption\")\nshowtext_auto(enable = TRUE)\n\n### |-  plot theme ----\ntheme_set(theme_minimal(base_size = 14, base_family = \"text\"))                \n\ntheme_update(\n    plot.title.position   = \"plot\",\n    plot.caption.position = \"plot\",\n    legend.position       = 'plot',\n    plot.background       = element_rect(fill = bkg_col, color = bkg_col),\n    panel.background      = element_rect(fill = bkg_col, color = bkg_col),\n    plot.margin           = margin(t = 10, r = 20, b = 10, l = 20),\n    axis.title.x          = element_text(margin = margin(10, 0, 0, 0), size = rel(1.1), \n                                         color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n    axis.title.y          = element_text(margin = margin(0, 10, 0, 0), size = rel(1.1), \n                                         color = text_col, family = \"text\", face = \"bold\", hjust = 0.5),\n    axis.text             = element_text(size = rel(0.8), color = text_col, family = \"text\"),\n    axis.line.x           = element_line(color = \"gray40\", linewidth = .15),\n    panel.grid.minor.y    = element_blank(),\n    panel.grid.major.y    = element_line(linetype = \"dotted\", linewidth = 0.1, color = 'gray10'),\n    panel.grid.minor.x    = element_blank(),\n    panel.grid.major.x    = element_line(linetype = \"dotted\", linewidth = 0.1, color = 'gray10'),\n    \n    strip.text            = element_textbox(size     = rel(0.9),\n                                            face     = 'bold',\n                                            color    = text_col,\n                                            hjust    = 0.5,\n                                            halign   = 0.5,\n                                            r        = unit(3, \"pt\"),\n                                            width    = unit(6, \"npc\"),\n                                            padding  = margin(2, 0, 2, 0),\n                                            margin   = margin(3, 3, 3, 3),\n                                            fill     = \"transparent\"),\n    panel.spacing         = unit(1, 'lines')\n)  \n```\n````\n:::\n\n\n\n#### 6. Plot\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n\n### |-  final plot ----  \np <- ggplot(college_admissions_clean, \n       aes(x = attend, fill = tier)) + \n    \n    # Geoms\n    geom_histogram(bins = 30, color = \"gray10\", linewidth = 0.2, alpha = 0.75) +\n    gghighlight::gghighlight() +\n    \n    # Labs\n    labs(\n        x = \"Attendance Rate\",\n        y = \"Frequency\",\n        title    = title_text,\n        subtitle = subtitle_text,\n        caption  = caption_text\n    ) +\n    \n    # Scales\n    scale_x_continuous(breaks = pretty_breaks(n = 2)) +\n    scale_y_continuous() +\n    scale_fill_manual(values = col_palette) +\n    coord_cartesian(clip = 'off') +\n    \n    # Facets\n    facet_wrap(vars(tier)) +\n\n    # Theme\n    theme(\n        plot.title = element_text(\n            size = rel(1.5),\n            family = \"title\",\n            color = title_col,\n            face = \"bold\",\n            lineheight = 0.85,\n            margin = margin(t = 5, b = 5)\n        ),\n        plot.subtitle = element_text(\n            size = rel(0.95),\n            family = \"subtitle\",\n            color = title_col,\n            lineheight = 1,\n            margin = margin(t = 5, b = 15)\n        ),\n        plot.caption = element_markdown(\n            size = rel(.5),\n            family = \"caption\",\n            color = caption_col,\n            lineheight = 0.6,\n            hjust = 0,\n            halign = 0,\n            margin = margin(t = 10, b = 5)\n        )\n    )\n```\n````\n:::\n\n\n#### 7. Save\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n\n### |-  plot image ----  \nggsave(\n  filename = here::here(\"data_visualizations/TidyTuesday/2024/tt_2024_37.png\"),\n  plot = p,\n  width  =  7.77,\n  height =  8,\n  units  = \"in\",\n  dpi    = 320\n)\n\n### |-  plot thumbnail----  \nmagick::image_read(here::here(\"data_visualizations/TidyTuesday/2024/tt_2024_37.png\")) |> \n  magick::image_resize(geometry = \"400\") |> \n  magick::image_write(here::here(\"data_visualizations/TidyTuesday/2024/thumbnails/tt_2024_37.png\"))\n```\n````\n:::\n\n\n\n#### 8. Session Info\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r, eval=TRUE}}\nsessionInfo()\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.4.0    fastmap_1.2.0     cli_3.6.4        \n [5] htmltools_0.5.8.1 tools_4.4.0       rstudioapi_0.17.1 yaml_2.3.10      \n [9] rmarkdown_2.29    knitr_1.49        jsonlite_1.8.9    xfun_0.49        \n[13] digest_0.6.37     rlang_1.1.6       renv_1.0.3        evaluate_1.0.1   \n```\n\n\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}