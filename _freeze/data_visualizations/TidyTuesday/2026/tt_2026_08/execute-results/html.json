{
  "hash": "11a9d81b6cd73ee10ed153edac6329af",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"More Than Money: How Science Foundation Ireland Built a National Research Ecosystem\"\nsubtitle: \"Funding fluctuated with economic cycles, but the number of institutions entering SFI grew steadily â€” accelerating in the 2010s before dissolution in July 2024.\"\ndescription: \"A two-panel time series examining Science Foundation Ireland's 24-year legacy (2001â€“2024). While annual grant commitments fluctuated with economic cycles â€” peaking at â‚¬469M in 2019 â€” the number of institutions entering the SFI ecosystem grew steadily, with 59 new institutions joining in 2013â€“2017 alone.\"\ndate: \"2026-02-22\"\nauthor:\n  - name: \"Steven Ponce\"\n    url: \"https://stevenponce.netlify.app\"\ncitation:\n  url: \"https://stevenponce.netlify.app/data_visualizations/TidyTuesday/2026/tt_2026_08.html\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2026\"]\ntags: [\n  \"Science Foundation Ireland\",\n  \"Research Funding\",\n  \"Higher Education\",\n  \"Ireland\",\n  \"Time Series\",\n  \"Area Chart\",\n  \"Bar Chart\",\n  \"Patchwork\",\n  \"Institutional Analysis\",\n  \"STEM\",\n  \"Public Policy\",\n  \"ggplot2\"\n]\nimage: \"thumbnails/tt_2026_08.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                    \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n![A two-panel time series (2001â€“2024) exploring Science Foundation Ireland's legacy. The top panel shows annual grant commitments as a teal area chart, peaking at â‚¬469M in 2019 before a sharp 2024 drop reflecting SFI's July dissolution. The bottom panel shows new institutions funded each year as a bar chart, with 2013â€“2017 highlighted in teal, during which 59 new institutions entered the ecosystem. Together, the panels argue that while SFI's funding fluctuated, its institutional reach grew steadily until the end. Note: totals reflect commitments by grant start year, not annual expenditure; 2024 is a partial year.](tt_2026_08.png){#fig-1}\n\n### [**Steps to Create this Graphic**]{.mark}\n\n#### [1. Load Packages & Setup]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse, ggtext, showtext, janitor, \n    scales, glue, patchwork\n)\n})\n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  = 10,\n  height = 8,\n  units  = \"in\",\n  dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### [2. Read in the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n\ntt <- tidytuesdayR::tt_load(2026, week = 08)\nsfi_grants_raw <- tt$sfi_grants |> clean_names()\nrm(tt)\n```\n````\n:::\n\n\n#### [3. Examine the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(sfi_grants_raw)\n```\n````\n:::\n\n\n#### [4. Tidy Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\n### |- base clean ----\nsfi <- sfi_grants_raw |>\n  filter(\n    !is.na(current_total_commitment),\n    current_total_commitment > 0,\n    !is.na(start_date),\n    !is.na(research_body),\n    research_body != \"\"\n  ) |>\n  mutate(year = lubridate::year(start_date))\n\n### |- Panel 1: annual funding totals ----\nannual_funding <- sfi |>\n  group_by(year) |>\n  summarise(\n    total_funding = sum(current_total_commitment, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  arrange(year)\n\npeak_year <- annual_funding |> slice_max(total_funding, n = 1)\n\n### |- Panel 2: new institutions per year ----\ninst_by_year <- sfi |>\n  group_by(research_body) |>\n  summarise(first_year = min(year, na.rm = TRUE), .groups = \"drop\") |>\n  count(first_year, name = \"new_inst\") |>\n  arrange(first_year)\n\n# Surge callout stat\nsurge_total <- inst_by_year |>\n  filter(first_year >= 2013, first_year <= 2017) |>\n  summarise(n = sum(new_inst)) |>\n  pull(n)\n\ntotal_inst <- sum(inst_by_year$new_inst)\n```\n````\n:::\n\n\n#### [5. Visualization Parameters]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = c(\n      \"accent\"       = \"#006D77\",  \n      \"accent_light\" = \"#83C5BE\",   \n      \"bar_muted\"    = \"#CFD8DC\",   \n      \"peak\"         = \"#E29578\",\n      \"text_light\"   = \"#90A4AE\"\n    )\n)\n\n### |- titles and caption ----\ntitle_text <- str_glue(\n    \"More Than Money: How Science Foundation Ireland Built a National Research Ecosystem\"\n)\n\nsubtitle_text <- str_glue(\n    \"Funding fluctuated with economic cycles, but the number of institutions entering SFI grew steadily \\u2014\naccelerating in the 2010s before dissolution in July 2024.\nAnnual totals reflect commitments for grants starting that year (not annual expenditure). 2024 is a partial year.\"\n)\n\ncaption_text <- create_social_caption(\n    tt_year     = 2026,\n    tt_week     = 08,\n    source_text = \"Ireland's Open Data Portal\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(\n      face = \"bold\", family = fonts$title, size = rel(1.3),\n      color = colors$title, margin = margin(b = 10), hjust = 0\n    ),\n    plot.subtitle = element_text(\n      face = \"italic\", family = fonts$subtitle, lineheight = 1.2,\n      color = colors$subtitle, size = rel(0.8), margin = margin(b = 20), hjust = 0\n    ),\n\n    # Grid\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\", linewidth = 0.25),\n\n    # Axes\n    axis.title = element_text(size = rel(0.8), color = \"gray30\"),\n    axis.text = element_text(color = \"gray30\"),\n    axis.text.y = element_text(size = rel(0.85)),\n    axis.ticks = element_blank(),\n\n    # Facets\n    strip.background = element_rect(fill = \"gray95\", color = NA),\n    strip.text = element_text(\n      face = \"bold\",\n      color = \"gray20\",\n      size = rel(0.9),\n      margin = margin(t = 6, b = 4)\n    ),\n    panel.spacing = unit(1.5, \"lines\"),\n\n    # Legend elements\n    legend.position = \"plot\",\n    legend.title = element_text(\n      family = fonts$subtitle,\n      color = colors$text, size = rel(0.8), face = \"bold\"\n    ),\n    legend.text = element_text(\n      family = fonts$tsubtitle,\n      color = colors$text, size = rel(0.7)\n    ),\n    legend.margin = margin(t = 15),\n\n    # Plot margin\n    plot.margin = margin(10, 20, 10, 20),\n    \n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### [6. Plot]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |- Panel 1: C1 â€” Annual Funding ----\np1 <- annual_funding |>\n  ggplot(aes(x = year, y = total_funding)) +\n  # Annotate\n  annotate(\"rect\",\n    xmin = 2008, xmax = 2009.5,\n    ymin = -Inf, ymax = Inf,\n    fill = \"gray85\", alpha = 0.5\n  ) +\n  annotate(\"text\",\n    x = 2008.75, y = max(annual_funding$total_funding) * 0.96,\n    label = \"Financial\\nCrisis\",\n    size = 2.5, color = colors$palette[\"text_light\"],\n    hjust = 0.5, lineheight = 0.85,\n    family = fonts$text\n  ) +\n  # Geom\n  geom_area(fill = colors$palette[\"accent_light\"], alpha = 0.35) +\n  geom_line(color = colors$palette[\"accent\"], linewidth = 0.9) +\n  geom_point(\n    data = peak_year,\n    aes(x = year, y = total_funding),\n    color = colors$palette[\"peak\"],\n    size = 3,\n    shape = 21,\n    fill = colors$palette[\"peak\"],\n    stroke = 0.5\n  ) +\n  geom_text(\n    data = peak_year,\n    aes(\n      x = year,\n      y = total_funding,\n      label = glue(\n        \"Peak: {dollar(total_funding, prefix = '\\u20ac', suffix = 'M', scale = 1e-6, accuracy = 1)}\\n({year})\"\n      )\n    ),\n    nudge_y = max(annual_funding$total_funding) * 0.07,\n    nudge_x = -1.5,\n    size = 3,\n    color = colors$palette[\"peak\"],\n    fontface = \"bold\",\n    family = fonts$text,\n    lineheight = 0.9\n  ) +\n  geom_vline(\n    xintercept = 2024, linetype = \"dashed\",\n    color = colors$palette[\"text_light\"], linewidth = 0.5\n  ) +\n  annotate(\"text\",\n    x = 2023.8, y = max(annual_funding$total_funding) * 0.55,\n    label = \"SFI Dissolved\\nJul 2024\\n(partial year)\",\n    size = 2.5, color = colors$palette[\"text_light\"],\n    hjust = 1, lineheight = 0.9,\n    family = fonts$text\n  ) +\n  # Scales\n  scale_y_continuous(\n    labels = label_dollar(prefix = \"\\u20ac\", suffix = \"M\", scale = 1e-6, accuracy = 1),\n    expand = expansion(mult = c(0.02, 0.12))\n  ) +\n  scale_x_continuous(breaks = seq(2001, 2024, 4), limits = c(2001, 2025)) +\n  # Labs\n  labs(\n      x = \"Year\",\n      y = \"Total Annual\\nCommitment\"\n      ) +\n  # Theme\n  theme(\n    axis.title.y = element_text(\n      angle = 0,\n      vjust = 1.02,\n      hjust = 0.5,\n      margin = margin(r = -50)\n    )\n  )\n\n### |- Panel 2: C18 â€” New Institutions per Year ----\np2 <- inst_by_year |>\n  ggplot(aes(x = first_year, y = new_inst)) +\n  # Annotate\n  annotate(\"rect\",\n    xmin = 2012.5, xmax = 2017.5,\n    ymin = -Inf, ymax = Inf,\n    fill = colors$palette[\"accent\"], alpha = 0.07\n  ) +\n  # Geoms\n  geom_col(\n    aes(fill = first_year >= 2013 & first_year <= 2017),\n    width = 0.75,\n    show.legend = FALSE\n  ) +\n  geom_vline(\n    xintercept = 2024, linetype = \"dashed\",\n    color = colors$palette[\"text_light\"], linewidth = 0.5\n  ) +\n  annotate(\"text\",\n    x = 2015, y = 21,\n    label = glue(\"{surge_total} new institutions\\nentered in 2013\\u20132017 alone\"),\n    hjust = 0.5, size = 3,\n    color = colors$palette[\"accent\"],\n    fontface = \"bold\",\n    lineheight = 0.9,\n    family = fonts$text\n  ) +\n  annotate(\"text\",\n    x = 2023.8, y = max(inst_by_year$new_inst) * 0.6,\n    label = \"SFI Dissolved\\nJul 2024\",\n    size = 2.5, color = colors$text,\n    hjust = 1, lineheight = 0.9,\n    family = fonts$text\n  ) +\n  # Scales\n  scale_fill_manual(\n    values = c(\n      \"TRUE\" = colors$palette[\"accent\"],\n      \"FALSE\" = colors$palette[\"bar_muted\"]\n    )\n  ) +\n  scale_y_continuous(\n    breaks = seq(0, max(inst_by_year$new_inst), 5),\n    expand = expansion(mult = c(0.02, 0.15))\n  ) +\n  scale_x_continuous(breaks = seq(2001, 2024, 4), limits = c(2001, 2025)) +\n  # Labs\n  labs(\n      x = \" First Year\",\n      y = \"New Institutions\\nFunded (per year)\"\n      ) +\n  # Theme\n  theme(\n    axis.title.y = element_text(\n      angle = 0,\n      vjust = 1.02,\n      hjust = 0.5,\n      margin = margin(r = -50)\n    )\n  )\n\n### |- Combined Plots ----\ncombined_plots <- p1 / p2 +\n  plot_layout(heights = c(1, 1)) +\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    theme = theme(\n      axis.title.y = element_text(\n        angle = 0,\n        vjust = 1.04,\n        hjust = 0.5,\n        margin = margin(r = -100)\n      ),\n      plot.title = element_text(\n        size = rel(1.3),\n        family = fonts$title,\n        face = \"bold\",\n        color = colors$title,\n        lineheight = 1.15,\n        margin = margin(t = 0, b = 5)\n      ),\n      plot.subtitle = element_text(\n        size = rel(0.8),\n        family = fonts$subtitle,\n        color = alpha(colors$subtitle, 0.88),\n        lineheight = 1.5,\n        margin = margin(t = 5, b = 30)\n      ),\n      plot.caption = element_markdown(\n        size = rel(0.55),\n        family = fonts$subtitle,\n        color = colors$caption,\n        hjust = 0,\n        lineheight = 1.4,\n        margin = margin(t = 20, b = 5)\n      )\n    )\n  )\n```\n````\n:::\n\n\n#### [7. Save]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot_patchwork(\n  plot = combined_plots, \n  type = \"tidytuesday\", \n  year = 2026, \n  week = 08, \n  width  = 10,\n  height = 8,\n  )\n```\n````\n:::\n\n\n#### [8. Session Info]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] here_1.0.2      patchwork_1.3.2 glue_1.8.0      scales_1.4.0   \n [5] janitor_2.2.1   showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9 \n [9] ggtext_0.1.2    lubridate_1.9.5 forcats_1.0.1   stringr_1.6.0  \n[13] dplyr_1.2.0     purrr_1.2.1     readr_2.1.6     tidyr_1.3.2    \n[17] tibble_3.3.1    ggplot2_4.0.2   tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       xfun_0.47          httr2_1.0.1        htmlwidgets_1.6.4 \n [5] gh_1.4.1           tzdb_0.5.0         yulab.utils_0.1.7  vctrs_0.7.1       \n [9] tools_4.4.0        generics_0.1.3     parallel_4.4.0     curl_5.2.1        \n[13] gifski_1.32.0-2    pkgconfig_2.0.3    ggplotify_0.1.2    RColorBrewer_1.1-3\n[17] S7_0.2.1           lifecycle_1.0.5    compiler_4.4.0     farver_2.1.2      \n[21] textshaping_0.3.7  codetools_0.2-20   snakecase_0.11.1   htmltools_0.5.8.1 \n[25] yaml_2.3.10        crayon_1.5.2       pillar_1.11.1      camcorder_0.1.0   \n[29] magick_2.9.0       commonmark_2.0.0   tidyselect_1.2.1   digest_0.6.37     \n[33] stringi_1.8.3      labeling_0.4.3     rsvg_2.6.0         rprojroot_2.1.1   \n[37] fastmap_1.2.0      grid_4.4.0         cli_3.6.5          magrittr_2.0.4    \n[41] withr_3.0.1        rappdirs_0.3.3     bit64_4.0.5        timechange_0.4.0  \n[45] rmarkdown_2.28     tidytuesdayR_1.2.1 gitcreds_0.1.2     bit_4.0.5         \n[49] hms_1.1.4          evaluate_1.0.0     knitr_1.48         markdown_1.12     \n[53] gridGraphics_0.5-1 rlang_1.1.7        gridtext_0.1.5     Rcpp_1.1.1        \n[57] xml2_1.5.2         vroom_1.6.5        svglite_2.2.2      rstudioapi_0.18.0 \n[61] jsonlite_2.0.0     R6_2.5.1           fs_1.6.4           systemfonts_1.3.1 \n```\n\n\n:::\n:::\n\n:::\n\n#### [9. GitHub Repository]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_2026_08.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2026/tt_2026_08.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### [10. References]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n1.  **Data Source:**\n    -   TidyTuesday 2026 Week 08: [Science Foundation Ireland Grants Commitments](https://github.com/rfordatascience/tidytuesday/blob/main/data/2026/2026-02-24/readme.md)\n\n:::\n\n\n#### [11. Custom Functions Documentation]{.smallcaps}\n\n::: {.callout-note collapse=\"true\"}\n##### ðŸ“¦ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}