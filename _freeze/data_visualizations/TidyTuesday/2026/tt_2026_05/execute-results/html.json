{
  "hash": "10dc366b89f17e771e8b2f6d1f6ecbb4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"From Seed to Table: How Long Until Harvest?\"\nsubtitle: \"Median time to harvest by plant family. Light green = germination period, dark green = growing period. ‚óè Sprouted, ‚óè Harvest ready. Gray bars show variability (interquartile range).\"\ndescription: \"A horizontal bar chart visualizing median growing timelines for nine edible plant families, from planting to harvest. Chenopods are the fastest at 55 days while Alliums take the longest at 110 days. Built with R and ggplot2 using data from the GROW Observatory Edible Plant Database.\"\ndate: \"2026-02-01\"\nauthor:\n  - name: \"Steven Ponce\"\n    url: \"https://stevenponce.netlify.app\"\ncitation:\n  url: \"https://stevenponce.netlify.app/data_visualizations/TidyTuesday/2026/tt_2026_05.html\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2026\"]\ntags: [\n  \"Edible Plants\",\n  \"Gardening\",\n  \"Growing Timeline\",\n  \"Plant Families\",\n  \"GROW Observatory\",\n  \"Horizontal Bar Chart\",\n  \"Timeline Visualization\",\n  \"ggplot2\",\n  \"Data Wrangling\"\n]\nimage: \"thumbnails/tt_2026_05.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                    \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n![Bar chart showing harvest timelines for 9 plant families. Chenopods are fastest (55 days), Alliums slowest (110 days). Light green = germination, dark green = growing period. Gray bars show variability. Source: GROW Observatory.](tt_2026_05.png){#fig-1}\n\n### [**Steps to Create this Graphic**]{.mark}\n\n#### [1. Load Packages & Setup]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse, ggtext, showtext, janitor, \n    scales, glue, patchwork, ineq, ggrepel\n)\n})\n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  = 10,\n  height = 7,\n  units  = \"in\",\n  dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### [2. Read in the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n\ntt <- tidytuesdayR::tt_load(2026, week = 05)\nedible_plants <- tt$edible_plants |> clean_names()\nrm(tt)\n```\n````\n:::\n\n\n#### [3. Examine the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(edible_plants)\n```\n````\n:::\n\n\n#### [4. Tidy Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\n# Helper: parse numeric ranges like \"55-75\", \"55 ‚Äì 75\"...\nparse_range <- function(x, return = c(\"midpoint\", \"lower\", \"upper\")) {\n  return <- match.arg(return)\n\n  map_dbl(x, function(val) {\n    if (is.na(val) || val == \"\") {\n      return(NA_real_)\n    }\n\n    val <- str_trim(val)\n    val <- str_to_lower(val)\n\n    # Standardize separators\n    val <- str_replace_all(val, c(\"‚Äì\" = \"-\", \"‚Äî\" = \"-\", \" to \" = \"-\", \"‚Äì\" = \"-\"))\n    val <- str_replace_all(val, \"[^0-9\\\\.-]+\", \"\") # keep digits, dot, dash\n\n    # Handle \"~75\" style after stripping non-numeric (becomes \"75\")\n    if (str_detect(val, \"^\\\\d+\\\\.?\\\\d*\\\\+$\")) {\n      num <- as.numeric(str_remove(val, \"\\\\+$\"))\n      return(case_when(\n        return == \"midpoint\" ~ num,\n        return == \"lower\" ~ num,\n        return == \"upper\" ~ NA_real_\n      ))\n    }\n\n    if (str_detect(val, \"^\\\\d+\\\\.?\\\\d*-$\")) {\n      num <- as.numeric(str_remove(val, \"-$\"))\n      return(case_when(\n        return == \"midpoint\" ~ num,\n        return == \"lower\" ~ num,\n        return == \"upper\" ~ NA_real_\n      ))\n    }\n\n    # Normal range \"55-75\"\n    if (str_detect(val, \"-\")) {\n      parts <- str_split(val, \"-\", n = 2)[[1]] |>\n        str_trim() |>\n        as.numeric()\n\n      parts <- parts[!is.na(parts)]\n\n      if (length(parts) == 2) {\n        lo <- parts[1]\n        hi <- parts[2]\n        return(case_when(\n          return == \"midpoint\" ~ mean(c(lo, hi)),\n          return == \"lower\" ~ lo,\n          return == \"upper\" ~ hi\n        ))\n      }\n\n      if (length(parts) == 1) {\n        return(parts[1])\n      }\n    }\n\n    suppressWarnings(as.numeric(val))\n  })\n}\n\nplants_clean <- edible_plants |>\n  mutate(\n    cultivation_clean = case_when(\n      str_to_lower(cultivation) %in% c(\"legume\") ~ \"Legumes\",\n      str_to_lower(cultivation) %in% c(\"brassica\", \"brassicas\") ~ \"Brassicas\",\n      str_to_lower(cultivation) %in% c(\"allium\") ~ \"Alliums\",\n      str_to_lower(cultivation) %in% c(\"cucurbit\") ~ \"Cucurbits\",\n      str_to_lower(cultivation) %in% c(\"solanaceae\", \"solanum\") ~ \"Nightshades\",\n      str_to_lower(cultivation) %in% c(\"umbelliferae\") ~ \"Umbellifers\",\n      str_to_lower(cultivation) %in% c(\"lamiaceae\") ~ \"Herbs\",\n      str_to_lower(cultivation) %in% c(\"chenopodiaceae\") ~ \"Chenopods\",\n      str_to_lower(cultivation) %in% c(\"salad\") ~ \"Salad Greens\",\n      TRUE ~ \"Other\"\n    ),\n    days_harvest_mid = parse_range(days_harvest, \"midpoint\"),\n    days_harvest_low = parse_range(days_harvest, \"lower\"),\n    days_harvest_high = parse_range(days_harvest, \"upper\"),\n    days_germ_mid = parse_range(days_germination, \"midpoint\")\n  )\n\nplot_data <- plants_clean |>\n  filter(\n    cultivation_clean != \"Other\",\n    !is.na(days_germ_mid),\n    !is.na(days_harvest_mid)\n  ) |>\n  group_by(cultivation_clean) |>\n  summarise(\n    germ_median = median(days_germ_mid, na.rm = TRUE),\n    harvest_median = median(days_harvest_mid, na.rm = TRUE),\n    harvest_q25 = quantile(days_harvest_mid, 0.25, na.rm = TRUE),\n    harvest_q75 = quantile(days_harvest_mid, 0.75, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  ) |>\n  filter(n >= 3) |>\n  mutate(\n    growing_days = pmax(0, harvest_median - germ_median),\n    cult_label = glue(\"{cultivation_clean} (n={n})\"),\n    # Longest at top\n    cult_label = fct_reorder(cult_label, harvest_median, .desc = TRUE),\n    is_anchor = cult_label %in% c(\n      \"Chenopods (n=3)\",\n      \"Alliums (n=7)\"\n    )\n  )\n\n# Dynamic x-range\nx_max <- max(plot_data$harvest_q75, plot_data$harvest_median, na.rm = TRUE)\nx_pad <- max(10, round(0.12 * x_max))\nx_lim <- c(0, x_max + x_pad)\n```\n````\n:::\n\n\n#### [5. Visualization Parameters]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = list(\n      col_germination = \"#A5D6A7\",\n      col_growing = \"#2E7D32\",\n      col_sprout = \"#FFC107\",\n      col_harvest = \"#D32F2F\",\n      col_iqr = \"gray80\",\n      col_grid = \"gray85\"\n  )\n)\n\n### |- titles and caption ----\ntitle_text <- \"From Seed to Table: How Long Until Harvest?\"\n\nsubtitle_text <- str_glue(\n    \"Median time to harvest by plant family. \",\n    \"<span style='color:{colors$palette$col_germination};'>**Light green**</span> = germination period, \",\n    \"<span style='color:{colors$palette$col_growing};'>**dark green**</span> = growing period.<br>\",\n    \"<span style='color:{colors$palette$col_sprout};'>**‚óè**</span> Sprouted, \",\n    \"<span style='color:{colors$palette$col_harvest};'>**‚óè**</span> Harvest ready. \",\n    \"Gray bars show variability (interquartile range).\"\n)\n\ncaption_text <- create_social_caption(\n    tt_year = 2026,\n    tt_week = 05,\n    source_text = \"GROW Observatory Edible Plant Database\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(\n      face = \"bold\", family = fonts$title, size = rel(1.4),\n      color = colors$title, margin = margin(b = 10), hjust = 0\n    ),\n    plot.subtitle = element_markdown(\n      face = \"italic\", family = fonts$subtitle, lineheight = 1.2,\n      color = colors$subtitle, size = rel(0.9), margin = margin(b = 20), hjust = 0\n    ),\n\n    # Grid\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\", linewidth = 0.25),\n\n    # Axes\n    axis.title = element_text(size = rel(0.8), color = \"gray30\"),\n    axis.text = element_text(color = \"gray30\"),\n    axis.text.y = element_text(size = rel(0.85)),\n    axis.ticks = element_blank(),\n\n    # Facets\n    strip.background = element_rect(fill = \"gray95\", color = NA),\n    strip.text = element_text(\n      face = \"bold\",\n      color = \"gray20\",\n      size = rel(0.9),\n      margin = margin(t = 6, b = 4)\n    ),\n    panel.spacing = unit(1.5, \"lines\"),\n\n    # Legend elements\n    legend.position = \"plot\",\n    legend.title = element_text(\n      family = fonts$subtitle,\n      color = colors$text, size = rel(0.8), face = \"bold\"\n    ),\n    legend.text = element_text(\n      family = fonts$tsubtitle,\n      color = colors$text, size = rel(0.7)\n    ),\n    legend.margin = margin(t = 15),\n\n    # Plot margin\n    plot.margin = margin(10, 20, 10, 20),\n    \n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### [6. Plot]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |- final plot ----\np <- plot_data |>\n    ggplot(aes(y = cult_label)) +\n    # Geoms\n    geom_vline(\n        xintercept = c(30, 60, 90, 120),\n        linetype = \"dotted\",\n        color = colors$palette$col_grid,\n        linewidth = 0.4, \n        alpha = 0.6\n    ) +\n    geom_segment(\n        aes(x = harvest_q25, xend = harvest_q75, yend = cult_label),\n        linewidth = 10,\n        color = colors$palette$col_iqr,\n        lineend = \"round\",\n        alpha = 0.75\n    ) +\n    geom_segment(\n        aes(x = 0, xend = germ_median, yend = cult_label),\n        linewidth = 5,\n        color = colors$palette$col_germination,\n        lineend = \"round\"\n    ) +\n    geom_segment(\n        aes(x = germ_median, xend = harvest_median, yend = cult_label),\n        linewidth = 5,\n        color = colors$palette$col_growing,\n        lineend = \"round\"\n    ) +\n    geom_point(aes(x = germ_median), size = 4.2, color = colors$palette$col_sprout) +\n    geom_point(aes(x = harvest_median), size = 4.2, color = colors$palette$col_harvest) +\n    geom_text(\n        aes(x = harvest_median, label = glue(\"{round(harvest_median)} days\")),\n        hjust = -0.18,\n        size = 3.4,\n        fontface = \"bold\",\n        color = colors$text,\n        family = fonts$subtitle\n    ) +\n    geom_text(\n        aes(\n            x = -2,                    \n            label = cult_label,\n            fontface = if_else(is_anchor, \"bold\", \"plain\")\n        ),\n        hjust = 1,\n        family = fonts$subtitle,\n        color = \"gray30\",\n        size = 3.5\n    ) +\n    # Scales\n    scale_x_continuous(\n        breaks = c(0, 30, 60, 90, 120),\n        labels = c(\"Planted\", \"1 month\", \"2 months\", \"3 months\", \"4 months\"),\n        expand = expansion(mult = c(0.02, 0))\n    ) +\n    scale_y_discrete(NULL, labels = NULL) +\n    coord_cartesian(\n        xlim = c(-15, x_lim[2]),\n        clip = \"off\"\n    ) +\n    # Labs\n    labs(\n        title = title_text,\n        subtitle = subtitle_text,\n        x = NULL, y = NULL,\n        caption = caption_text\n  ) +\n  # Theme\n  theme(\n    plot.title = element_markdown(\n      size = rel(1.2),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      lineheight = 1.15,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.8),\n      family = \"sans\",\n      color = colors$subtitle,\n      lineheight = 1.5,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.55),\n      family = fonts$subtitle,\n      color = colors$caption,\n      hjust = 0,\n      lineheight = 1.4,\n      margin = margin(t = 10, b = 5)\n    )\n  )\n```\n````\n:::\n\n\n#### [7. Save]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot(\n  plot = p, \n  type = \"tidytuesday\", \n  year = 2026, \n  week = 05, \n  width  = 10,\n  height = 7,\n  )\n```\n````\n:::\n\n\n#### [8. Session Info]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      ggrepel_0.9.6   ineq_0.2-13     patchwork_1.3.0\n [5] glue_1.8.0      scales_1.3.0    janitor_2.2.0   showtext_0.9-7 \n [9] showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2    lubridate_1.9.3\n[13] forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2    \n[17] readr_2.1.5     tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1  \n[21] tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       httr2_1.0.6        xfun_0.49          htmlwidgets_1.6.4 \n [5] gh_1.4.1           tzdb_0.5.0         vctrs_0.6.5        tools_4.4.0       \n [9] generics_0.1.3     parallel_4.4.0     curl_6.0.0         gifski_1.32.0-1   \n[13] fansi_1.0.6        pkgconfig_2.0.3    lifecycle_1.0.4    compiler_4.4.0    \n[17] farver_2.1.2       textshaping_0.4.0  munsell_0.5.1      codetools_0.2-20  \n[21] snakecase_0.11.1   htmltools_0.5.8.1  yaml_2.3.10        crayon_1.5.3      \n[25] pillar_1.9.0       camcorder_0.1.0    magick_2.8.5       commonmark_1.9.2  \n[29] tidyselect_1.2.1   digest_0.6.37      stringi_1.8.4      rsvg_2.6.1        \n[33] rprojroot_2.0.4    fastmap_1.2.0      grid_4.4.0         colorspace_2.1-1  \n[37] cli_3.6.4          magrittr_2.0.3     utf8_1.2.4         withr_3.0.2       \n[41] rappdirs_0.3.3     bit64_4.5.2        timechange_0.3.0   rmarkdown_2.29    \n[45] tidytuesdayR_1.1.2 gitcreds_0.1.2     bit_4.5.0          ragg_1.3.3        \n[49] hms_1.1.3          evaluate_1.0.1     knitr_1.49         markdown_1.13     \n[53] rlang_1.1.6        gridtext_0.1.5     Rcpp_1.0.13-1      xml2_1.3.6        \n[57] renv_1.0.3         vroom_1.6.5        svglite_2.1.3      rstudioapi_0.17.1 \n[61] jsonlite_1.8.9     R6_2.5.1           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n:::\n\n#### [9. GitHub Repository]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_2026_05.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2026/tt_2026_05.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### [10. References]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n1.  **Data Source:**\n    -   TidyTuesday 2026 Week 05: [Edible Plants Database](https://github.com/rfordatascience/tidytuesday/blob/main/data/2026/2026-02-03/readme.md)\n\n:::\n\n\n#### [11. Custom Functions Documentation]{.smallcaps}\n\n::: {.callout-note collapse=\"true\"}\n##### üì¶ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions ‚Üí [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}