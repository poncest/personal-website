{
  "hash": "aa3fa670781cc07510aa90752a891f9a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Finals Week Concentrates Medal Events Into Evening Hours\"\nsubtitle: \"Comparing opening days vs. closing days of the Milan-Cortina 2026 Olympics\"\ndescription: \"Comparing opening versus closing days of the Milan-Cortina 2026 Winter Olympics reveals how finals week dramatically concentrates medal events into evening hours, transforming the schedule from scattered daytime competition to evening-focused spectacle.\"\ndate: \"2026-02-09\"\nauthor:\n  - name: \"Steven Ponce\"\n    url: \"https://stevenponce.netlify.app\"\ncitation:\n  url: \"https://stevenponce.netlify.app/data_visualizations/TidyTuesday/2026/tt_2026_06.html\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2026\"]\ntags: [\n  \"Winter Olympics\",\n  \"Sports Scheduling\",\n  \"Event Planning\",\n  \"Grouped Bar Chart\",\n  \"Comparative Analysis\",\n  \"ggplot2\",\n  \"Milan-Cortina 2026\",\n  \"Olympic Broadcasting\"\n]\nimage: \"thumbnails/tt_2026_06.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                    \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n![Grouped bar chart comparing medal event share by hour between Opening Days (gray bars) and Finals Week (teal bars) of the 2026 Winter Olympics. Finals Week shows dramatically higher medal event concentration in evening hours, with 4pm, 5pm, and 10pm reaching 100% medal events, while Opening Days shows lower, more scattered distribution throughout the day.](tt_2026_06.png){#fig-1}\n\n### [**Steps to Create this Graphic**]{.mark}\n\n#### [1. Load Packages & Setup]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse, ggtext, showtext, janitor, \n    scales, glue\n)\n})\n\n### |- figure size ----\ncamcorder::gg_record(\n  dir    = here::here(\"temp_plots\"),\n  device = \"png\",\n  width  = 10,\n  height = 7,\n  units  = \"in\",\n  dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### [2. Read in the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n\n# tt <- tidytuesdayR::tt_load(2026, week = 06)\n# schedule <- tt$schedule |> clean_names()\n# rm(tt)\nschedule <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2026/2026-02-10/schedule.csv')\n```\n````\n:::\n\n\n#### [3. Examine the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(schedule)\n```\n````\n:::\n\n\n#### [4. Tidy Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\n### |-  data cleaning ----\nschedule_clean <- schedule |>\n  mutate(\n    olympic_day = as.numeric(date - min(date)) + 1,\n    max_day = max(olympic_day),\n    hour_local = hour(start_datetime_local),\n\n    # Two periods for direct comparison\n    period = case_when(\n      olympic_day <= 3 ~ \"Opening Days (1-3)\",\n      olympic_day >= max_day - 2 ~ \"Finals Week\",\n      TRUE ~ NA_character_\n    )\n  ) |>\n  filter(!is.na(period)) |>\n  mutate(period = fct_relevel(period, \"Opening Days (1-3)\", \"Finals Week\"))\n\n### |-  calculate medal event share ----\nmedal_share_comparison <- schedule_clean |>\n  count(period, hour_local, is_medal_event) |>\n  group_by(period, hour_local) |>\n  mutate(\n    total_events = sum(n),\n    pct = n / total_events * 100\n  ) |>\n  ungroup() |>\n  filter(is_medal_event == TRUE)\n```\n````\n:::\n\n\n#### [5. Visualization Parameters]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\ncolors <- get_theme_colors(\n  palette = list(\n      col_opening = \"#CFCFCF\",      \n      col_closing = \"#0d9488\",       \n      col_primetime_shade = \"#ccfbf1\",\n      col_text_dark = \"gray30\"\n  )\n)\n\n### |- titles and caption ----\ntitle_text <- \"Finals Week Concentrates Medal Events Into Evening Hours\"\n\nsubtitle_text <- \"Comparing opening days vs. closing days of the Milan-Cortina 2026 Olympics\"\n\ncaption_text <- create_social_caption(\n    tt_year = 2026,\n    tt_week = 06,\n    source_text = \"2026 Winter Olympics Schedule (Milan-Cortina)\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(\n      face = \"bold\", family = fonts$title, size = rel(1.3),\n      color = colors$title, margin = margin(b = 10), hjust = 0\n    ),\n    plot.subtitle = element_markdown(\n      face = \"italic\", family = fonts$subtitle, lineheight = 1.2,\n      color = colors$subtitle, size = rel(0.8), margin = margin(b = 20), hjust = 0\n    ),\n\n    # Grid\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\", linewidth = 0.25),\n\n    # Axes\n    axis.title = element_text(size = rel(0.8), color = \"gray30\"),\n    axis.text = element_text(color = \"gray30\"),\n    axis.text.y = element_text(size = rel(0.85)),\n    axis.ticks = element_blank(),\n\n    # Facets\n    strip.background = element_rect(fill = \"gray95\", color = NA),\n    strip.text = element_text(\n      face = \"bold\",\n      color = \"gray20\",\n      size = rel(0.9),\n      margin = margin(t = 6, b = 4)\n    ),\n    panel.spacing = unit(1.5, \"lines\"),\n\n    # Legend elements\n    legend.position = \"plot\",\n    legend.title = element_text(\n      family = fonts$subtitle,\n      color = colors$text, size = rel(0.8), face = \"bold\"\n    ),\n    legend.text = element_text(\n      family = fonts$tsubtitle,\n      color = colors$text, size = rel(0.7)\n    ),\n    legend.margin = margin(t = 15),\n\n    # Plot margin\n    plot.margin = margin(10, 20, 10, 20),\n    \n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### [6. Plot]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |- final plot ----\np <- medal_share_comparison |>\n  ggplot(aes(x = hour_local, y = pct, fill = period)) +\n\n  # Geoms\n  geom_col(\n    aes(alpha = period),\n    position = position_dodge(width = 0.9),\n    width = 0.8\n  ) +\n  # Annotate\n  annotate(\n    \"rect\",\n    xmin = 18, xmax = 22,\n    ymin = 0, ymax = 100,\n    fill = colors$palette$col_primetime_shade,\n    alpha = 0.08\n  ) +\n  annotate(\n    \"text\",\n    x = 19.5, y = 90,\n    label = \"In finals week, evening schedules are\\ndominated by medal events\",\n    family = fonts$text,\n    size = 3.5,\n    color = colors$palette$col_text_dark,\n    lineheight = 1.1,\n    hjust = 0.5\n  ) +\n  # Scales\n  scale_fill_manual(\n    values = c(\n      \"Opening Days (1-3)\" = colors$palette$col_opening,\n      \"Finals Week\" = colors$palette$col_closing\n    )\n  ) +\n  scale_alpha_manual(\n    values = c(\"Opening Days (1-3)\" = 0.7, \"Finals Week\" = 0.95),\n    guide = \"none\"\n  ) +\n  scale_x_continuous(\n    breaks = seq(10, 22, 2),\n    labels = function(x) paste0(x %% 12, ifelse(x < 12, \"am\", \"pm\")),\n    expand = expansion(mult = c(0.02, 0.02))\n  ) +\n  scale_y_continuous(\n    labels = function(x) paste0(x, \"%\"),\n    limits = c(0, 100),\n    expand = expansion(mult = c(0, 0.05))\n  ) +\n  # Labs\n  labs(\n    title = title_text,\n    subtitle = subtitle_text,\n    x = \"Hour of Day (Local Milan-Cortina Time)\",\n    y = \"Share of Scheduled Events\\nThat Are Medal Events\",\n    caption = caption_text\n  ) +\n  # Theme\n  theme(\n    axis.title.y = element_text(\n      angle = 0,\n      vjust = 1.04,\n      hjust = 0.5,\n      margin = margin(r = -100)\n    ),\n    plot.title = element_markdown(\n      size = rel(1.4),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      lineheight = 1.15,\n      margin = margin(t = 0, b = 5)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.8),\n      family = fonts$subtitle,\n      color = alpha(colors$subtitle, 0.88),\n      lineheight = 1.5,\n      margin = margin(t = 5, b = 25)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.5),\n      family = fonts$subtitle,\n      color = colors$caption,\n      hjust = 0,\n      lineheight = 1.4,\n      margin = margin(t = 20, b = 5)\n    )\n  )\n```\n````\n:::\n\n\n#### [7. Save]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot(\n  plot = p, \n  type = \"tidytuesday\", \n  year = 2026, \n  week = 06, \n  width  = 10,\n  height = 7,\n  )\n```\n````\n:::\n\n\n#### [8. Session Info]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      glue_1.8.0      scales_1.3.0    janitor_2.2.0  \n [5] showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2   \n [9] lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4    \n[13] purrr_1.0.2     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   \n[17] ggplot2_3.5.1   tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      xfun_0.49         htmlwidgets_1.6.4 tzdb_0.5.0       \n [5] vctrs_0.6.5       tools_4.4.0       generics_0.1.3    curl_6.0.0       \n [9] parallel_4.4.0    gifski_1.32.0-1   fansi_1.0.6       pkgconfig_2.0.3  \n[13] lifecycle_1.0.4   farver_2.1.2      compiler_4.4.0    textshaping_0.4.0\n[17] munsell_0.5.1     codetools_0.2-20  snakecase_0.11.1  htmltools_0.5.8.1\n[21] yaml_2.3.10       pillar_1.9.0      crayon_1.5.3      camcorder_0.1.0  \n[25] magick_2.8.5      commonmark_1.9.2  tidyselect_1.2.1  digest_0.6.37    \n[29] stringi_1.8.4     labeling_0.4.3    rsvg_2.6.1        rprojroot_2.0.4  \n[33] fastmap_1.2.0     grid_4.4.0        colorspace_2.1-1  cli_3.6.4        \n[37] magrittr_2.0.3    utf8_1.2.4        withr_3.0.2       bit64_4.5.2      \n[41] timechange_0.3.0  rmarkdown_2.29    bit_4.5.0         ragg_1.3.3       \n[45] hms_1.1.3         evaluate_1.0.1    knitr_1.49        markdown_1.13    \n[49] rlang_1.1.6       gridtext_0.1.5    Rcpp_1.0.13-1     xml2_1.3.6       \n[53] renv_1.0.3        svglite_2.1.3     rstudioapi_0.17.1 vroom_1.6.5      \n[57] jsonlite_1.8.9    R6_2.5.1          systemfonts_1.1.0\n```\n\n\n:::\n:::\n\n:::\n\n#### [9. GitHub Repository]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_2026_06.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2026/tt_2026_06.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### [10. References]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n1.  **Data Source:**\n    -   TidyTuesday 2026 Week 06: [2026 Winter Olympics!](https://github.com/rfordatascience/tidytuesday/blob/main/data/2026/2026-02-10/readme.md)\n\n:::\n\n\n#### [11. Custom Functions Documentation]{.smallcaps}\n\n::: {.callout-note collapse=\"true\"}\n##### ðŸ“¦ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}