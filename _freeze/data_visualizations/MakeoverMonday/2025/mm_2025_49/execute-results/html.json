{
  "hash": "abb8d7eb70435cfbedee8e58a5798c53",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Estimated crime rates are ~134% higher in Londonâ€™s most<br>deprived neighborhoods\"\nsubtitle: \"Per 10,000 residents by income deprivation decile (2024). Rates use an equal-population estimate (~833k residents per decile; interpret comparatively)\"\ndescription: \"Analyzing London's crime gradient across income deprivation levels using per capita rates. The visualization reveals that crime rates in the most deprived neighborhoods are ~134% higher than in the least deprived areas, even after population adjustment.\"\ndate: \"2025-12-16\"\nauthor:\n  - name: \"Steven Ponce\"\n    url: \"https://stevenponce.netlify.app\"\ncitation:\n  url: \"https://stevenponce.netlify.app/data_visualizations/MakeoverMonday/2025/mm_2025_49.html\"\ncategories: [\"MakeoverMonday\", \"Data Visualization\", \"R Programming\", \"2025\"]   \ntags: [\n  \"makeover-monday\",\n  \"london-crime\",\n  \"income-deprivation\",\n  \"per-capita-analysis\",\n  \"ggplot2\",\n  \"area-chart\",\n  \"gradient-visualization\",\n  \"population-adjustment\",\n  \"data-transparency\",\n  \"indices-of-deprivation\",\n  \"crime-statistics\",\n  \"inequality\",\n  \"uk-data\",\n  \"2025-week-49\"\n]\nimage: \"thumbnails/mm_2025_49.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                      \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n### Original\n\nThe original visualization comes from [London crimes by income deprivation decile](https://data.world/makeovermonday/2025w49-london-crimes-by-income-deprivation-decile)\n\n![Original visualization](https://raw.githubusercontent.com/poncest/MakeoverMonday/refs/heads/master/2025/Week_49/original_chart.png)\n\n### Makeover\n\n![Area chart showing estimated crime rates per 10,000 residents across Londonâ€™s income deprivation deciles, from most deprived (1) to least deprived (10). Crime rates are much higher in more deprived areas: the most deprived decile has about 1,656 crimes per 10,000 residents, which is roughly 134% higher than the least deprived decile at about 707. Rates peak around the second and third-most deprived deciles and then decline steadily toward the least deprived areas. Rates are based on equal-population estimates per decile and should be interpreted comparatively rather than as exact values.](mm_2025_49.png){#fig-1}\n\n### Methodology & Data Sources\n\n#### Population Estimates & Per Capita Calculations\n\nThis analysis uses **per capita crime rates** (crimes per 10,000 residents) rather than raw counts to enable fair comparison across income deprivation deciles. Since population data aggregated by income deprivation decile was not readily available, we estimated populations based on:\n\n-   **London LSOA count:** 4,835 Lower Layer Super Output Areas ([London Datastore](https://data.london.gov.uk/dataset/lsoa-atlas-2n8zy/))\n-   **Average LSOA population:** 1,722 residents\n-   **Estimated population per decile:** \\~833,000 residents (assuming roughly equal distribution)\n-   **Total estimated:** 8.33 million (vs. 8.9 million actual London population, 2021 Census)\n\n**Note:** Trust for London uses London-rebased income deprivation deciles, ranking only London's 4,835 LSOAs into deciles (not England-wide rankings).\n\n#### Critical Limitations & Assumptions\n\n::: {.callout-warning collapse=\"false\"}\n##### Key Assumptions About Population Estimates\n\n**1. Equal Distribution Assumption** - We assume approximately equal population across all 10 income deprivation deciles - Each decile: \\~483-484 LSOAs Ã— 1,722 residents = \\~833,000 people - This is a **simplification** - actual populations likely vary by decile\n\n**2. Why Estimates Were Necessary** - IoD2025 File 7 (official population denominators) was not accessible - No readily available population data aggregated by income deprivation decile - Per capita analysis requires population denominators for meaningful comparison\n\n**3. Validity of Findings** - Under equal-population assumption: 134% difference persists (raw counts = per capita rates) - This suggests the crime disparity is **real**, not merely a population artifact - More deprived areas may have different population density than affluent areas\n\n**4. Interpretation Guidance** - Per capita rates shown are based on **estimated**, not actual, populations - True rates may vary if actual population distribution differs significantly - **Treat values as comparative** rather than exact - All visualizations note this limitation in titles/subtitles/captions\n:::\n\n#### Data Preparation Pipeline\n\nThe CSV files used in this analysis were generated using a Python preprocessing script that calculated per capita crime rates with population estimates.\n\n::: {.callout-note collapse=\"true\"}\n##### Reproducibility: Data Preparation Steps\n\n**To reproduce the analysis from raw data:**\n\n1.  **Run the Python preprocessing script:**\n    -   Script: [`mm_2025_week49_prep.py`](https://github.com/poncest/MakeoverMonday/blob/master/2025/Week_49/mm_2025_week49_prep.py)\n    -   Input: `mom_week49_data.csv` (raw crime counts from [data.world](https://data.world/makeovermonday/2025w49-london-crimes-by-income-deprivation-decile))\n    -   Output: Two tidy CSV files with per capita rates\n2.  **Run the R visualization script** (this document)\n    -   Uses the pre-calculated per capita rates\n    -   Creates the final visualization\n\n**The Python script documents:** - Population estimation methodology (4,835 LSOAs Ã— 1,722 avg residents) - Per capita rate calculations (crimes per 10,000 residents)\\\n- All assumptions and limitations (detailed above)\n\n**Repository:** [MakeoverMonday/2025/Week_49](https://github.com/poncest/MakeoverMonday/tree/master/2025/Week_49)\n:::\n\n#### Data Sources\n\n-   **Crime Data:** Trust for London, DataPoliceUK (January-December 2024)\n-   **Deprivation Rankings:** [Indices of Multiple Deprivation 2025](https://www.gov.uk/government/statistics/english-indices-of-deprivation-2025) (IoD2025)\n-   **Population Reference:** [London Datastore - LSOA Atlas](https://data.london.gov.uk/dataset/lsoa-atlas-2n8zy/)\n-   **Challenge Data:** [data.world - MakeoverMonday Week 49](https://data.world/makeovermonday/2025w49-london-crimes-by-income-deprivation-decile)\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\n  if (!require(\"pacman\")) install.packages(\"pacman\")\n  pacman::p_load(\n  tidyverse,     # Easily Install and Load the 'Tidyverse'\n  janitor,       # Simple Tools for Examining and Cleaning Dirty Data\n  skimr,         # Compact and Flexible Summaries of Data\n  scales,        # Scale Functions for Visualization\n  ggtext,        # Improved Text Rendering Support for 'ggplot2'\n  showtext,      # Using Fonts More Easily in R Graphs\n  glue           # Interpreted String Literals\n)\n})\n\n### |- figure size ----\ncamcorder::gg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  = 10,\n    height = 8,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### 2. Read in the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n#|\n\ntotal_crimes_by_decile <- read_csv(\n   here::here(\"data/MakeoverMonday/2025/london_total_crimes_by_deprivation.csv\")) |>\n  clean_names()\n```\n````\n:::\n\n\n#### 3. Examine the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(total_crimes_by_decile)\nskim(total_crimes_by_decile) |> summary()\n```\n````\n:::\n\n\n#### 4. Tidy Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\n### |-  data wrangling ----\n# Baseline = least deprived (decile 10)\nbaseline_rate <- total_crimes_by_decile |>\n  filter(decile_num == 10) |>\n  pull(total_crimes_per_10k)\n\ncrime_gradient <- total_crimes_by_decile |>\n  mutate(\n    baseline_rate = baseline_rate,\n    rate_ratio = total_crimes_per_10k / baseline_rate,\n    pct_difference = ((total_crimes_per_10k - baseline_rate) / baseline_rate) * 100\n  )\n\n# Values for annotations\nmost_deprived_rate <- crime_gradient |> filter(decile_num == 1)  |> pull(total_crimes_per_10k)\nleast_deprived_rate <- crime_gradient |> filter(decile_num == 10) |> pull(total_crimes_per_10k)\noverall_pct_diff <- crime_gradient |> filter(decile_num == 1) |> pull(pct_difference)\n\n# Identify peak decile \npeak_decile <- crime_gradient |>\n  slice_max(total_crimes_per_10k, n = 1, with_ties = FALSE) |>\n  pull(decile_num)\n\npeak_rate <- crime_gradient |>\n  filter(decile_num == peak_decile) |>\n  pull(total_crimes_per_10k)\n```\n````\n:::\n\n\n#### 5. Visualization Parameters\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(\n  palette = list(\n    col_primary = \"#1E3A5F\",\n    col_danger  = \"#B5532F\"\n  )\n)\n\n### |-  Main titles ----\ntitle_text <- \"Estimated crime rates are ~134% higher in Londonâ€™s most<br>deprived neighborhoods\"\n\nsubtitle_text <- str_glue(\n  \"Per 10,000 residents by income deprivation decile (2024). \",\n  \"Rates use an equal-population estimate (~833k residents<br>per decile; interpret comparatively). \"\n)\n\ncaption_text <- create_social_caption_02_mm(\n  mm_year = 2025, mm_week = 49,\n  source_text = str_glue(\n    \"**Crime Data:** Trust for London, DataPoliceUK (2024) | \",\n    \"**Deprivation Rankings:** Indices of Multiple Deprivation 2025<br>\"\n  ),\n  note_text = str_glue(\n    \"**Methodology:** Rates are normalized per 10,000 residents assuming equal population per decile (~833k). \",\n    \"Because true populations by decile may vary,<br>treat values as **comparative** rather than exact. \",\n    \"London-rebased deciles rank neighborhoods within London only.<br>\"\n  )\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # # Text styling\n    plot.title = element_text(\n      size = rel(1.5), family = fonts$title, face = \"bold\",\n      color = colors$title, lineheight = 1.1, hjust = 0,\n      margin = margin(t = 5, b = 10)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.9), family = fonts$subtitle, face = \"italic\",\n      color = alpha(colors$subtitle, 0.9), lineheight = 1.1,\n      margin = margin(t = 0, b = 20)\n    ),\n\n    # Legend formatting\n    legend.position = \"plot\",\n    legend.justification = \"right\",\n    legend.margin = margin(l = 12, b = 5),\n    legend.key.size = unit(0.8, \"cm\"),\n    legend.box.margin = margin(b = 10),\n\n    # Axis formatting\n    axis.ticks.y = element_blank(),\n    axis.ticks.x = element_line(color = \"gray\", linewidth = 0.5),\n    \n    axis.title.x = element_text(\n      face = \"bold\", size = rel(0.85),\n      margin = margin(t = 10), family = fonts$subtitle,\n      color = \"gray40\" \n    ),\n    axis.title.y = element_text(\n      face = \"bold\", size = rel(0.85),\n      margin = margin(r = 10), family = fonts$subtitle,\n      color = \"gray40\" \n    ),\n    axis.text.x = element_text(\n      size = rel(0.85), family = fonts$subtitle,\n      color = \"gray40\"  \n    ),\n    axis.text.y = element_markdown(\n      size = rel(0.85), family = fonts$subtitle,\n      color = \"gray40\"\n    ),\n\n    # Grid lines\n    panel.grid.minor = element_line(color = \"#ecf0f1\", linewidth = 0.2),\n    panel.grid.major = element_line(color = \"#ecf0f1\", linewidth = 0.4),\n\n    # Margin\n    plot.margin = margin(20, 20, 20, 20)\n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### 6. Plot\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |-  main plot ----\np <- \n  ggplot(crime_gradient, aes(x = decile_num, y = total_crimes_per_10k)) +\n  # Geoms\n  geom_area(fill = colors$palette$col_primary, alpha = 0.20) +\n  geom_line(color = colors$palette$col_primary, linewidth = 1.5) +\n  geom_point(color = colors$palette$col_primary, size = 3) +\n  geom_point(\n    data = crime_gradient |> filter(decile_num %in% c(1, 10)),\n    size = 6, color = colors$palette$col_danger\n  ) +\n  # Annotations\n  annotate(\n    \"text\",\n    x = 1.1, y = 1350,\n    label = glue(\n      \"Most deprived areas (Decile 1):\\n\",\n      \"{comma(round(most_deprived_rate))} crimes per 10k\\n\",\n      \"({round(overall_pct_diff)}% higher than least deprived)\"\n    ),\n    size = 3.6, hjust = 0,\n    fontface = \"bold\", lineheight = 1.1,\n    color = colors$palette$col_danger\n  ) +\n  annotate(\n    \"text\",\n    x = 10.0, y = 1050,\n    label = glue(\n      \"Least deprived areas (Decile 10):\\n\",\n      \"{comma(round(least_deprived_rate))} crimes per 10k\\n\",\n      \"(Baseline for comparison)\"\n    ),\n    size = 3.6, hjust = 1,\n    fontface = \"bold\", lineheight = 1.1,\n    color = colors$palette$col_primary\n  ) +\n  annotate(\n    \"text\",\n    x = peak_decile, y = 2700,\n    label = \"Peak occurs around deciles 2â€“3\",\n    size = 3.2,\n    fontface = \"bold\",\n    color = colors$palette$col_primary,\n    vjust = -0.2\n  ) +\n  annotate(\n    \"text\",\n    x = 5.5, y = 200,\n    label = str_wrap(\n      \"Note: Income deprivation deciles rank London's neighborhoods from most (1) to least (10) deprived. Each decile represents ~10% of areas.\",\n      width = 86\n    ),\n    size = 3,\n    color = \"gray30\",\n    lineheight = 1.1,\n    hjust = 0.5\n  ) +\n  # Scales\n  scale_x_continuous(\n    breaks = 1:10,\n    labels = c(\n      \"1\\nMost\\nDeprived\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\",\n      \"10\\nLeast\\nDeprived\"\n    )\n  ) +\n  scale_y_continuous(\n    labels = comma,\n    limits = c(0, 2700),\n    breaks = seq(0, 2500, 500)\n  ) +\n  # Labs\n  labs(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    x = \"Income Deprivation Decile\",\n    y = \"Crimes per 10,000 Residents\"\n  ) +\n  # Theme\n  theme(\n    plot.title = element_markdown(\n      size = rel(1.9),\n      family = fonts$title,\n      face = \"bold\",\n      color = colors$title,\n      lineheight = 1.15,\n      margin = margin(t = 5, b = 10)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.88),\n      family = fonts$subtitle,\n      color = alpha(colors$subtitle, 0.88),\n      lineheight = 1.5,\n      margin = margin(t = 5, b = 20)\n    ),\n    plot.caption = element_markdown(\n      size = rel(0.65),\n      family = fonts$subtitle,\n      color = colors$caption,\n      hjust = 0,\n      lineheight = 1.4,\n      margin = margin(t = 20, b = 5)\n    ),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.y = element_line(color = \"gray90\", linewidth = 0.3),\n  )\n```\n````\n:::\n\n\n#### 7. Save\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot(\n  plot = p, \n  type = \"makeovermonday\", \n  year = current_year,\n  week = current_week,\n  width = 10, \n  height = 8\n  )\n```\n````\n:::\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      glue_1.8.0      showtext_0.9-7  showtextdb_3.0 \n [5] sysfonts_0.8.9  ggtext_0.1.2    scales_1.3.0    skimr_2.1.5    \n [9] janitor_2.2.0   lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1  \n[13] dplyr_1.1.4     purrr_1.0.2     readr_2.1.5     tidyr_1.3.1    \n[17] tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      xfun_0.49         htmlwidgets_1.6.4 tzdb_0.5.0       \n [5] vctrs_0.6.5       tools_4.4.0       generics_0.1.3    curl_6.0.0       \n [9] parallel_4.4.0    gifski_1.32.0-1   fansi_1.0.6       pkgconfig_2.0.3  \n[13] lifecycle_1.0.4   farver_2.1.2      compiler_4.4.0    textshaping_0.4.0\n[17] munsell_0.5.1     repr_1.1.7        codetools_0.2-20  snakecase_0.11.1 \n[21] htmltools_0.5.8.1 yaml_2.3.10       crayon_1.5.3      pillar_1.9.0     \n[25] camcorder_0.1.0   magick_2.8.5      commonmark_1.9.2  tidyselect_1.2.1 \n[29] digest_0.6.37     stringi_1.8.4     rsvg_2.6.1        rprojroot_2.0.4  \n[33] fastmap_1.2.0     grid_4.4.0        colorspace_2.1-1  cli_3.6.4        \n[37] magrittr_2.0.3    base64enc_0.1-3   utf8_1.2.4        withr_3.0.2      \n[41] bit64_4.5.2       timechange_0.3.0  rmarkdown_2.29    bit_4.5.0        \n[45] ragg_1.3.3        hms_1.1.3         evaluate_1.0.1    knitr_1.49       \n[49] markdown_1.13     rlang_1.1.6       gridtext_0.1.5    Rcpp_1.0.13-1    \n[53] xml2_1.3.6        renv_1.0.3        vroom_1.6.5       svglite_2.1.3    \n[57] rstudioapi_0.17.1 jsonlite_1.8.9    R6_2.5.1          systemfonts_1.1.0\n```\n\n\n:::\n:::\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [mm_2025_49.qmd](https://github.com/poncest/personal-website/blob/master/data_visualizations/MakeoverMonday/2025/mm_2025_49.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### 10. References\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1.  Data:\n\n    -   Makeover Monday 2025 Week 49: [London crimes by income deprivation decile](https://data.world/makeovermonday/2025w49-london-crimes-by-income-deprivation-decile)\n\n2.  Article\n\n    -   [London crimes by income deprivation decile](https://data.world/makeovermonday/2025w49-london-crimes-by-income-deprivation-decile)\n:::\n\n#### 11. Custom Functions Documentation\n\n::: {.callout-note collapse=\"true\"}\n##### ðŸ“¦ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}