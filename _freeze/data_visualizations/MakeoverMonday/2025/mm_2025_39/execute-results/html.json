{
  "hash": "9f28ca1658bd7f266c63080b53340c0b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"UK Household Spending Inequality by Income Level in FYE 2024\"\nsubtitle: \"Housing costs create the largest spending gap between rich and poor households\"\ndescription: \"UK household spending analysis reveals housing costs burden poor families disproportionately, creating the largest spending gap across income groups. Visualization explores spending inequality across all categories using ONS Family Spending Survey data.\"\ndate: \"2025-09-24\" \ncategories: [\"MakeoverMonday\", \"Data Visualization\", \"R Programming\", \"2025\"]   \ntags: [\n  \"household-spending\",\n  \"income-inequality\", \n  \"housing-costs\",\n  \"uk-statistics\",\n  \"ons-data\",\n  \"data-storytelling\",\n  \"ggplot2\",\n  \"ridge-plots\",\n  \"dot-plots\",\n  \"social-policy\"\n]\nimage: \"thumbnails/mm_2025_39.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                      \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n### Original\n\nThe original visualization **Figure 5: Poorer households spent proportionally more on housing, fuel and power than richer households in FYE 2024 - Average weekly household expenditure as a percentage of total weekly expenditure, by quintile group, UK, financial year ending (FYE) 2024** comes from [Family spending in the UK: April 2023 to March 2024](https://data.world/makeovermonday/2025w39-family-spending-in-the-uk)\n\n<!-- ![Original visualization](https://raw.githubusercontent.com/poncest/MakeoverMonday/refs/heads/master/2025/Week_39/original_chart.png) -->\n\n![Original visualization](https://raw.githubusercontent.com/poncest/MakeoverMonday/refs/heads/master/2025/Week_39/original_chart.png)\n\n### Makeover\n\n![Two-panel chart showing UK household spending inequality by income in 2024. The left panel displays spending gaps between the poorest and wealthiest households across 11 categories, with housing showing the largest gap at 13.9 percentage points. The right panel shows distribution patterns across all five income quintiles using ridge plots. Housing costs disproportionately burden poor households, while transport spending favors wealthy households.](mm_2025_39.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\n  if (!require(\"pacman\")) install.packages(\"pacman\")\n  pacman::p_load(\n  tidyverse,  # Easily Install and Load the 'Tidyverse'\n  ggtext,     # Improved Text Rendering Support for 'ggplot2'\n  showtext,   # Using Fonts More Easily in R Graphs\n  scales,     # Scale Functions for Visualization\n  glue,       # Interpreted String Literals\n  patchwork,  # Using Fonts More Easily in R Graphs\n  ggridges    # Ridgeline Plots in 'ggplot2'\n  )\n})\n\n### |- figure size ----\ncamcorder::gg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  = 12,\n    height = 10,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### 2. Read in the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n#|\nhouseholds_spending_raw <- read_csv(\n  here::here('data/MakeoverMonday/2025/Figure_5__Poorer_households_spent_proportionally_more_on_housing,_fuel_and_power_than_richer_households_in_FYE_2024.csv')) |> \n  janitor::clean_names()\n```\n````\n:::\n\n\n#### 3. Examine the Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(households_spending_raw)\nskimr::skim_without_charts(households_spending_raw)\n```\n````\n:::\n\n\n#### 4. Tidy Data\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\n# Create lookup tables\nquintile_labels <- c(\n  \"bottom_fifth\" = \"Bottom fifth\",\n  \"x2nd\" = \"2nd quintile\",\n  \"x3rd\" = \"3rd quintile\",\n  \"x4th\" = \"4th quintile\",\n  \"top_fifth\" = \"Top fifth\",\n  \"all_households\" = \"All households\"\n)\n\n# Use the category names from the data\ncategory_lookup <- c(\n  \"Food and non-alcoholic drinks\" = \"Food & non-alcoholic drinks\",\n  \"Alcoholic drink tobacco and narcotics\" = \"Alcohol, tobacco & narcotics\", # Note: no comma in original\n  \"Clothing and footwear\" = \"Clothing & footwear\",\n  \"Housing (net) fuel and power\" = \"Housing, fuel & power\", # Note: no comma in original\n  \"Household goods and services\" = \"Household goods & services\",\n  \"Transport\" = \"Transport\",\n  \"Communication\" = \"Communication\",\n  \"Recreation and culture\" = \"Recreation & culture\",\n  \"Restaurants and hotels\" = \"Restaurants & hotels\",\n  \"Miscellaneous goods and services\" = \"Miscellaneous goods & services\",\n  \"Other expenditure items\" = \"Other expenditure\"\n)\n\n# Data prep\nhouseholds_spending_clean <- households_spending_raw |>\n  pivot_longer(\n    cols = -percent_of_total_weekly_expendtiure,\n    names_to = \"income_quintile\",\n    values_to = \"percentage\"\n  ) |>\n  rename(category = percent_of_total_weekly_expendtiure) |>\n  mutate(\n    # Clean quintile names\n    income_quintile = quintile_labels[income_quintile],\n    income_quintile = factor(income_quintile, levels = quintile_labels),\n\n    # Clean category names using direct lookup\n    category_clean = category_lookup[category]\n  ) |>\n  filter(income_quintile != \"All households\") |>\n  group_by(category_clean) |>\n  mutate(gap = max(percentage) - min(percentage)) |>\n  ungroup() |>\n  mutate(category_clean = fct_reorder(category_clean, gap, .desc = FALSE))\n\n# Dot plot data\ndot_data <- households_spending_clean |>\n  group_by(category_clean) |>\n  summarise(\n    poorest_pct = percentage[income_quintile == \"Bottom fifth\"],\n    richest_pct = percentage[income_quintile == \"Top fifth\"],\n    gap = first(gap),\n    .groups = \"drop\"\n  )\n\n# Ridges plot data\nridges_data <- households_spending_clean\n```\n````\n:::\n\n\n#### 5. Visualization Parameters\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(palette = list(\n  primary = \"#2C3E50\",      \n  secondary = \"#E67E22\",    \n  accent = \"#95A5A6\",       \n  light_gray = \"#BDC3C7\",   \n  dark_gray = \"#7F8C8D\"     \n))   \n\n### |-  titles and caption ----\ntitle_text <- str_glue(\"UK Household Spending Inequality by Income Level in FYE 2024\")\n\nsubtitle_text <-str_glue(\n  \"Housing costs create the largest spending gap between rich and poor households\"\n)\n\n# Create caption\ncaption_text <- create_mm_caption(\n  mm_year = current_year,\n  mm_week = current_week,\n  source_text = paste0(\"UK Office for National Statistics\")\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Text styling\n    plot.title = element_text(\n      size = rel(1.4), family = fonts$title, face = \"bold\",\n      color = colors$title, lineheight = 1.1, hjust = 0,\n      margin = margin(t = 5, b = 10)\n    ),\n    plot.subtitle = element_text(\n      size = rel(0.9), family = fonts$subtitle, face = \"italic\",\n      color = alpha(colors$subtitle, 0.9), lineheight = 1.1,\n      margin = margin(t = 0, b = 20)\n    ),\n\n    # Legend formatting\n    legend.position = \"plot\",\n    legend.justification = \"top\",\n    legend.margin = margin(l = 12, b = 5),\n    legend.key.size = unit(0.8, \"cm\"),\n    legend.box.margin = margin(b = 10),\n    legend.title = element_text(face = \"bold\"),\n\n    # Axis formatting\n    axis.ticks.y = element_blank(),\n    axis.ticks.x = element_line(color = \"gray\", linewidth = 0.5),\n    # axis.ticks.length = unit(0.2, \"cm\"),\n    axis.title.x = element_text(\n      face = \"bold\", size = rel(0.85),\n      margin = margin(t = 10)\n    ),\n    axis.title.y = element_text(\n      face = \"bold\", size = rel(0.85),\n      margin = margin(r = 10)\n    ),\n    axis.text.x = element_text(\n      size = rel(0.85), family = fonts$subtitle,\n      color = colors$text\n    ),\n    axis.text.y = element_text(\n      size = rel(0.85), family = fonts$subtitle,\n      color = colors$text\n    ),\n\n    # Grid lines\n    panel.grid.minor = element_line(color = \"#ecf0f1\", linewidth = 0.2),\n    panel.grid.major = element_line(color = \"#ecf0f1\", linewidth = 0.4),\n\n    # Margin\n    plot.margin = margin(20, 20, 20, 20)\n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### 6. Plot\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |- P1: Range Dot Plot ----\np1 <- dot_data |>\n  ggplot(aes(y = category_clean)) +\n  # Geoms\n  geom_segment(aes(x = richest_pct, xend = poorest_pct, yend = category_clean),\n               linewidth = 1, color = colors$palette$light_gray, alpha = 0.6\n  ) +\n  geom_point(aes(x = richest_pct), size = 4, color = colors$palette$primary) +  \n  geom_point(aes(x = poorest_pct), size = 4, color = colors$palette$secondary) +   \n  geom_text(\n    aes(\n      x = (richest_pct + poorest_pct) / 2,\n      label = glue(\"{round(gap,1)} pp\")\n    ),\n    vjust = -1.8, size = 3.3,\n    color = colors$palette$primary\n  ) +\n\n  # Annotate\n  annotate(\"point\", x = 22, y = 1.5, size = 4, color = colors$palette$primary) + # Richest\n  annotate(\"text\",\n    x = 23, y = 1.5, label = \"Richest households\",\n    color = colors$palette$primary, size = 3.2, fontface = \"bold\", hjust = 0\n  ) +\n  annotate(\"point\", x = 22, y = 1, size = 4, color = colors$palette$secondary) + # Poorest\n  annotate(\"text\",\n    x = 23, y = 1, label = \"Poorest households\",\n    color = colors$palette$secondary, size = 3.2, fontface = \"bold\", hjust = 0\n  ) +\n\n  # Scales\n  scale_x_continuous(\n    labels = percent_format(scale = 1),\n    expand = expansion(mult = c(0.02, 0.1)),\n    limits = c(0, 40)\n  ) +\n\n  # Labs\n  labs(\n    title = \"Spending Inequality Across Categories\",\n    subtitle = str_wrap(\"Range between poorest and richest households (percentage points gap shown)\",\n      width = 65\n    ),\n    x = \"Percentage of total weekly expenditure\",\n    y = NULL,\n  ) +\n\n  # Theme\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.major.y = element_line(color = \"#F0F0F0\", linewidth = 0.5),\n    panel.grid.minor = element_blank()\n  )\n\n### |- P2: Ridgeline Plot ----\np2 <- ridges_data |>\n  ggplot(aes(x = percentage, y = category_clean)) +\n  # Geoms\n  geom_density_ridges(\n    alpha = 0.8,\n    scale = 1.2,\n    rel_min_height = 0.01,\n    color = \"white\",\n    linewidth = 0.8,\n    fill = colors$palette$accent\n  ) +\n\n  # Scales\n  scale_x_continuous(\n    labels = percent_format(scale = 1),\n    expand = expansion(mult = c(0.02, 0.05))\n  ) +\n\n  # Labs\n  labs(\n    title = \"Distribution Across Quintiles\",\n    subtitle = str_wrap(\"Spending patterns within each category\",\n      width = 40\n    ),\n    x = \"Percentage of total weekly expenditure\",\n    y = NULL,\n  ) +\n\n  # Theme\n  theme(\n    axis.text.y = element_blank(),\n    axis.ticks.y = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major.y = element_line(color = \"#F0F0F0\", linewidth = 0.5),\n    panel.grid.minor = element_blank()\n  )\n\n### |- Combined Plots ----\ncombined_plots <- p1 + p2 +\n  plot_layout(ncol = 2, widths = c(1.4, 1.1))\n\ncombined_plots +\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    theme = theme(\n      plot.title = element_text(\n        size = rel(1.6),\n        family = fonts$title,\n        face = \"bold\",\n        color = colors$title,\n        lineheight = 1.1,\n        margin = margin(t = 5, b = 5)\n      ),\n      plot.subtitle = element_markdown(\n        size = rel(0.95),\n        family = fonts$subtitle,\n        color = alpha(colors$subtitle, 0.9),\n        lineheight = 1.2,\n        margin = margin(t = 5, b = 10)\n      ),\n      plot.caption = element_markdown(\n        size = rel(0.6),\n        family = fonts$caption,\n        color = colors$caption,\n        hjust = 0.5,\n        margin = margin(t = 05)\n      )\n    )\n  )\n```\n````\n\n::: {.cell-output-display}\n![](mm_2025_39_files/figure-html/plot-1.png)\n:::\n:::\n\n\n#### 7. Save\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot_patchwork(\n  plot = combined_plots, \n  type = \"makeovermonday\", \n  year = current_year,\n  week = current_week,\n  width = 12, \n  height = 10\n  )\n```\n````\n:::\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      ggridges_0.5.6  patchwork_1.3.0 glue_1.8.0     \n [5] scales_1.3.0    showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9 \n [9] ggtext_0.1.2    lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1  \n[13] dplyr_1.1.4     purrr_1.0.2     readr_2.1.5     tidyr_1.3.1    \n[17] tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       xfun_0.49          htmlwidgets_1.6.4  tzdb_0.5.0        \n [5] yulab.utils_0.1.8  vctrs_0.6.5        tools_4.4.0        generics_0.1.3    \n [9] curl_6.0.0         parallel_4.4.0     gifski_1.32.0-1    fansi_1.0.6       \n[13] pkgconfig_2.0.3    ggplotify_0.1.2    skimr_2.1.5        lifecycle_1.0.4   \n[17] compiler_4.4.0     farver_2.1.2       munsell_0.5.1      repr_1.1.7        \n[21] janitor_2.2.0      codetools_0.2-20   snakecase_0.11.1   htmltools_0.5.8.1 \n[25] yaml_2.3.10        crayon_1.5.3       pillar_1.9.0       camcorder_0.1.0   \n[29] magick_2.8.5       commonmark_1.9.2   tidyselect_1.2.1   digest_0.6.37     \n[33] stringi_1.8.4      labeling_0.4.3     rsvg_2.6.1         rprojroot_2.0.4   \n[37] fastmap_1.2.0      grid_4.4.0         colorspace_2.1-1   cli_3.6.4         \n[41] magrittr_2.0.3     base64enc_0.1-3    utf8_1.2.4         withr_3.0.2       \n[45] bit64_4.5.2        timechange_0.3.0   rmarkdown_2.29     bit_4.5.0         \n[49] hms_1.1.3          evaluate_1.0.1     knitr_1.49         markdown_1.13     \n[53] gridGraphics_0.5-1 rlang_1.1.6        gridtext_0.1.5     Rcpp_1.0.13-1     \n[57] xml2_1.3.6         renv_1.0.3         vroom_1.6.5        svglite_2.1.3     \n[61] rstudioapi_0.17.1  jsonlite_1.8.9     R6_2.5.1           fs_1.6.5          \n[65] systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [mm_2025_39.qmd](https://github.com/poncest/personal-website/blob/master/data_visualizations/MakeoverMonday/2025/mm_2025_39.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### 10. References\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1.  Data:\n\n-   Makeover Monday 2025 Week 39: [Family spending in the UK](https://data.world/makeovermonday/2025w39-family-spending-in-the-uk)\n\n2.  Article\n\n-   [Family spending in the UK](https://data.world/makeovermonday/2025w39-family-spending-in-the-uk)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}