{
  "hash": "3deeb2c91ab65e9c2c5c6cef80fc95d8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Population Growth Patterns Across Regions\"\nsubtitle: \"Visualizing growth rate trends from 1960 to 2050. Darker shades represent stronger growth (green) or decline (red), with the horizon line indicating zero growth.\"\ndescription: \"An exploration of global population growth patterns using horizon plots to visualize regional trends from 1960 to 2050. The visualization reveals striking contrasts between high-growth regions like Africa and declining populations in developed regions, highlighting demographic transitions across different parts of the world.\"\nauthor: \"Steven Ponce\"\ndate: \"2025-02-23\" \ncategories: [\"MakeoverMonday\", \"Data Visualization\", \"R Programming\", \"2025\"]   \ntags: [\n \"ggplot2\",\n  \"horizon-plot\",\n  \"population-growth\",\n  \"demographic-trends\",\n  \"ggHoriPlot\",\n  \"time-series\",\n  \"regional-analysis\",\n  \"data-visualization\",\n  \"R\",\n  \"tidyverse\"\n]\nimage: \"thumbnails/mm_2025_09.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\nfilters:\n  - social-share\nshare:                     \n  permalink: \"https://stevenponce.netlify.app/data_visualizations/MakeoverMonday/2025/mm_2025_09.html\"\n  description: \"Explore global population growth patterns from 1960-2050 through an innovative horizon plot visualization. See how different regions transition from growth to decline across nearly a century of demographic change. #MakeoverMonday #DataViz #rstats\"\n  twitter: true\n  linkedin: true\n  email: true\n  facebook: false\n  reddit: false\n  stumble: false\n  tumblr: false\n  mastodon: true\n  bsky: true\n---\n\n\n\n### Original\n\nThe original visualization __All Countries and Economies__ comes from [data.world.org](https://data.worldbank.org/indicator/SP.POP.GROW?name_desc=false)\n\n![Original visualization](https://raw.githubusercontent.com/poncest/MakeoverMonday/master/2025/Week_09/original_chart.png)\n\n### Makeover\n\n![A horizon plot showing population growth rates across different regions from 1960 to 2050. The visualization uses green shades for positive growth and red shades for decline. Eastern and Southern Africa show consistently high growth rates (green), while Europe and North America trend towards decline (red) in later years.](mm_2025_09.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\npacman::p_load(\n    tidyverse,      # Easily Install and Load the 'Tidyverse'\n    ggtext,         # Improved Text Rendering Support for 'ggplot2'\n    showtext,       # Using Fonts More Easily in R Graphs\n    janitor,        # Simple Tools for Examining and Cleaning Dirty Data\n    skimr,          # Compact and Flexible Summaries of Data\n    scales,         # Scale Functions for Visualization\n    glue,           # Interpreted String Literals\n    here,           # A Simpler Way to Find Your Files\n    lubridate,      # Make Dealing with Dates a Little Easier\n    readxl,         # Read Excel Files\n    ggHoriPlot,     # Horizon Plots for 'ggplot2'\n    camcorder       # Record Your Plot History \n)\n})\n\n### |- figure size ----\ngg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  =  10,\n    height =  8,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n:::\n\n\n\n#### 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' The raw data for the week MakeoverMonday challenge can be downloaded \n#' here: https://data.world/makeovermonday/2025w9-world-population-estimates-projections\n#' \n#' Due to GitHub file size limitation, filter the initial dataset for\n#' the `Population growth (annual %)` indicator only.\n#' The working csv file was saved as `population_growth_raw.csv`\n\n# Initial raw data\n# population_estimates_raw <- read_excel(\n#   'data/2025/Population Estimates.xlsx') |> \n#   clean_names()\n\n# Subset for population_growth only\n# population_estimates_raw$indicator_name |> unique() |> sort()\n\n# populatio_growth_raw <- population_estimates_raw |> \n#   filter(indicator_name == \"Population growth (annual %)\") \n\n# write_csv(x = population_growth_raw, file = 'data/population_growth_raw.csv')\n\npopulation_growth_raw <- read_csv(\n  here::here('data/population_growth_raw.csv')) |> \n  clean_names()\n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(population_growth_raw)\nskim(population_growth_raw)\n```\n:::\n\n\n\n#### 4. Tidy Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  tidy data ----\npopulation_growth_tidy <- population_growth_raw |> \n  pivot_longer(\n    cols = starts_with(\"x\"),     # Select all columns starting with \"x\"\n    names_to = \"year\",           # Create a new column called \"year\"\n    names_prefix = \"x\",          # Remove the \"x\" from the column names\n    values_to = \"growth_rate\"\n    ) |>  \n  filter(str_detect(country_name, \"^(Africa|Asia|Europe|Latin America|North America)\")) |> \n  mutate(\n    year = as.numeric(year),\n    country_name = case_when(\n      country_name == \"Africa Eastern and Southern\" ~ \"Eastern & Southern Africa\",\n      country_name == \"Africa Western and Central\" ~ \"Western & Central Africa\",\n      country_name == \"Latin America & Caribbean\" ~ \"Latin America & Caribbean\",\n      TRUE ~ country_name\n    ),\n    country_name = str_wrap(country_name, width = 30),\n    # Order regions for better visual flow\n    country_name = factor(country_name, levels = rev(unique(country_name)))\n  )\n```\n:::\n\n\n\n#### 5. Visualization Parameters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(palette = c(\n  \"#31a354\",  # High Growth \n  \"#78c679\",  # Medium Growth \n  \"#d9f0a3\",  # Low Growth \n  \"#fdae61\",  # Low Decline \n  \"#f16913\",  # Medium Decline \n  \"#d73027\"   # High Decline \n  )\n)\n\n### |-  titles and caption ----\ntitle_text <- str_glue(\"Population Growth Patterns Across Regions\")\nsubtitle_text <- str_wrap(\"Visualizing growth rate trends from 1960 to 2050. Darker shades represent stronger growth (green) or decline (red), with the horizon line indicating zero growth.\", width = 90)\n\n# Create caption\ncaption_text <- create_mm_caption(\n    mm_year = 2025,\n    mm_week = 09,\n    source_text = \"World Population Estimates & Projections\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Weekly-specific modifications\n    legend.position = \"top\",\n    legend.title = element_text(size = rel(0.79)),\n    legend.text = element_text(size = rel(0.71)),\n    \n    axis.title = element_text(size = rel(1.14)),  \n    axis.text = element_text(size = rel(0.86)),  \n    axis.text.y = element_blank(),\n    axis.title.y = element_blank(),\n    axis.ticks.y = element_blank(),\n    axis.ticks.x = element_line(color = \"gray\", size = 0.5), \n    axis.ticks.length = unit(0.2, \"cm\"), \n    \n    strip.text.y = element_text(size = rel(0.7), angle = 0), \n    \n    panel.border = element_blank(),\n    panel.grid = element_blank(),\n    panel.spacing = unit(1, \"lines\"),  \n    panel.spacing.y = unit(0, \"lines\"),\n    \n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n:::\n\n\n\n#### 6. Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  Plot  ----\np <- ggplot(data = population_growth_tidy) + \n  \n  # Geoms\n  geom_horizon(\n    aes(x = year, y = growth_rate),\n    origin = \"midpoint\", \n    horizonscale = 6, \n    show.legend = TRUE\n  ) +\n  \n  # Scales\n  scale_x_continuous(\n    breaks = seq(1960, 2050, by = 20),\n    expand = c(0.02, 0.02)\n  ) +\n  scale_y_continuous() +\n  scale_fill_manual(\n    values = colors$palette,\n    name = \"Growth Rate\",\n    labels = c(\"High Growth\", \"Medium Growth\", \"Low Growth\",\n               \"Low Decline\", \"Medium Decline\", \"High Decline\")\n  ) +\n  \n  # Labs\n  labs(\n    x = \"Year\",\n    y = NULL,\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text\n  ) +\n  \n  # Facet\n  facet_grid(country_name ~ ., scales = \"free_y\", space = \"free_y\") +\n  \n  # Theme\n  theme(\n    plot.title = element_text(\n      size   = rel(2.5),\n      family = fonts$title,\n      face   = \"bold\",\n      color  = colors$title,\n      lineheight = 1.1,\n      margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_text(\n      size   = rel(1.0),\n      family = fonts$subtitle,\n      color  = colors$subtitle,\n      lineheight = 1.2,\n      margin = margin(t = 5, b = 15)\n    ),\n    plot.caption = element_markdown(\n      size   = rel(0.6),\n      family = fonts$caption,\n      color  = colors$caption,\n      hjust  = 0.5,\n      margin = margin(t = 10)\n    )\n  )\n```\n:::\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \nsave_plot(\n  p, \n  type = \"makeovermonday\", \n  year = 2025,\n  week = 09,\n  width = 10, \n  height = 8\n  )\n```\n:::\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] camcorder_0.1.0  ggHoriPlot_1.0.1 readxl_1.4.3     here_1.0.1      \n [5] glue_1.8.0       scales_1.3.0     skimr_2.1.5      janitor_2.2.0   \n [9] showtext_0.9-7   showtextdb_3.0   sysfonts_0.8.9   ggtext_0.1.2    \n[13] lubridate_1.9.3  forcats_1.0.0    stringr_1.5.1    dplyr_1.1.4     \n[17] purrr_1.0.2      readr_2.1.5      tidyr_1.3.1      tibble_3.2.1    \n[21] ggplot2_3.5.1    tidyverse_2.0.0 \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      xfun_0.49         htmlwidgets_1.6.4 tzdb_0.4.0       \n [5] vctrs_0.6.5       tools_4.4.0       generics_0.1.3    curl_6.0.0       \n [9] parallel_4.4.0    gifski_1.32.0-1   fansi_1.0.6       pacman_0.5.1     \n[13] pkgconfig_2.0.3   lifecycle_1.0.4   farver_2.1.2      compiler_4.4.0   \n[17] textshaping_0.4.0 munsell_0.5.1     repr_1.1.7        codetools_0.2-20 \n[21] snakecase_0.11.1  htmltools_0.5.8.1 yaml_2.3.10       crayon_1.5.3     \n[25] pillar_1.9.0      magick_2.8.5      commonmark_1.9.2  tidyselect_1.2.1 \n[29] digest_0.6.37     stringi_1.8.4     labeling_0.4.3    rsvg_2.6.1       \n[33] rprojroot_2.0.4   fastmap_1.2.0     grid_4.4.0        colorspace_2.1-1 \n[37] cli_3.6.3         magrittr_2.0.3    base64enc_0.1-3   utf8_1.2.4       \n[41] withr_3.0.2       bit64_4.5.2       timechange_0.3.0  rmarkdown_2.29   \n[45] bit_4.5.0         cellranger_1.1.0  ragg_1.3.3        hms_1.1.3        \n[49] evaluate_1.0.1    knitr_1.49        markdown_1.13     rlang_1.1.4      \n[53] gridtext_0.1.5    Rcpp_1.0.13-1     xml2_1.3.6        renv_1.0.3       \n[57] vroom_1.6.5       svglite_2.1.3     rstudioapi_0.17.1 jsonlite_1.8.9   \n[61] R6_2.5.1          systemfonts_1.1.0\n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`mm_2025_09.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/MakeoverMonday/2025/mm_2025_09.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n\n#### 10. References\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1. Article:\n   - World Population Estimates & Projections: [All Countries and Economies](https://data.worldbank.org/indicator/SP.POP.GROW?name_desc=false)\n\n\n2. Data:\n- Makeover Monday 2025 Week 09: [World Population Estimates & Projections](https://data.world/makeovermonday/2025w9-world-population-estimates-projections)\n \n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}