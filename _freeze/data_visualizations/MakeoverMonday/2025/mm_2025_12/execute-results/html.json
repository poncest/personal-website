{
  "hash": "42684682b61e0ce5eaed6c7709430dc6",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"El Niño Impact on Regional Precipitation\"\nsubtitle: \"Distribution patterns and mean values with confidence intervals\"\ndescription: \"Analysis of precipitation anomalies during El Niño events compared to normal years across five global regions. This visualization reveals how El Niño Southern Oscillation affects rainfall patterns differently around the world, using complementary statistical approaches to show both distribution patterns and statistical significance.\"\nauthor: \"Steven Ponce\"\ndate: \"2025-03-18\" \ncategories: [\"MakeoverMonday\", \"Data Visualization\", \"R Programming\", \"2025\"]   \ntags: [\n \"El Niño\", \"ENSO\", \"climate\", \"precipitation\", \"ridge plots\", \"confidence intervals\", \"statistical visualization\", \"ggplot2\", \"patchwork\", \"ggridges\", \"weather patterns\", \"climate analysis\"\n]\nimage: \"thumbnails/mm_2025_12.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\nfilters:\n  - social-share\nshare:                     \n  permalink: \"https://stevenponce.netlify.app/data_visualizations/MakeoverMonday/2025/mm_2025_12.html\"\n  description: \"How El Niño affects rainfall across different regions: density patterns and statistical analysis reveal complex precipitation changes beyond simple averages #DataViz #MakeoverMonday #ClimateData\"\n  twitter: true\n  linkedin: true\n  email: true\n  facebook: false\n  reddit: false\n  stumble: false\n  tumblr: false\n  mastodon: true\n  bsky: true\n---\n\n\n\n### Original\n\nThe original visualization __Precipitation Anomalies__ comes from [Our World in Data](https://ourworldindata.org/grapher/global-precipitation-anomaly)\n\n![Original visualization](https://raw.githubusercontent.com/poncest/MakeoverMonday/master/2025/Week_12/original_chart.png)\n\n### Makeover\n\n![Side-by-side visualization showing El Niño's impact on precipitation across five regions. The left side displays density plots showing distribution patterns; the right side shows mean values with confidence intervals. Data reveals contrasting precipitation patterns during El Niño vs normal years, with India showing the most dramatic differences.](mm_2025_12.png){#fig-1}\n\n### <mark> **Steps to Create this Graphic** </mark>\n\n#### 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\n  if (!require(\"pacman\")) install.packages(\"pacman\")\n  pacman::p_load(\n      tidyverse,      # Easily Install and Load the 'Tidyverse'\n    ggtext,         # Improved Text Rendering Support for 'ggplot2'\n    showtext,       # Using Fonts More Easily in R Graphs\n    janitor,        # Simple Tools for Examining and Cleaning Dirty Data\n    skimr,          # Compact and Flexible Summaries of Data\n    scales,         # Scale Functions for Visualization\n    glue,           # Interpreted String Literals\n    here,           # A Simpler Way to Find Your Files\n    lubridate,      # Make Dealing with Dates a Little Easier\n    ggridges,       # Ridgeline Plots in 'ggplot2' # Ridgeline Plots in 'ggplot2'\n    patchwork,      # The Composer of Plots\n    camcorder       # Record Your Plot History \n  )\n})\n\n### |- figure size ----\ngg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  =  12,\n    height =  10,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n:::\n\n\n\n#### 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' The raw data for the week MakeoverMonday challenge can be downloaded \n#' https://data.world/makeovermonday/2025w12-precipitation-anomalies\n#' \n#' Article\n#' https://ourworldindata.org/grapher/global-precipitation-anomaly\n\nprecipitation_raw <- read_csv(\n  here::here('data/global-precipitation-anomaly.csv')) |> \n    clean_names()\n```\n:::\n\n\n\n#### 3. Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(precipitation_raw)\nskim(precipitation_raw)\n```\n:::\n\n\n\n#### 4. Tidy Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  tidy data ----\n# Define El Niño years based on moderate to strong events\nel_nino_years <- c(1982, 1983, 1987, 1988, 1991, 1992, 1997, 1998, \n                   2002, 2003, 2009, 2010, 2015, 2016)\n\n# ENSO (El Niño Southern Oscillation) data\nenso_data <- precipitation_raw |>\n  filter(entity %in% c('World', 'Brazil', 'Australia', 'India', 'United States')) |>\n  mutate(\n    el_nino = year %in% el_nino_years,\n    event_type = if_else(el_nino, 'El Niño Year', 'Normal Year')\n  )\n\n# Comparative statistics for El Niño vs Normal\ncomparative_stats <- enso_data |>\n  group_by(entity, event_type) |>\n  summarize(\n    mean_anomaly = mean(annual_precipitation_anomaly, na.rm = TRUE),\n    median_anomaly = median(annual_precipitation_anomaly, na.rm = TRUE),\n    sd_anomaly = sd(annual_precipitation_anomaly, na.rm = TRUE),\n    n_obs = n(),\n    se_anomaly = sd_anomaly / sqrt(n_obs),\n    ci_lower = mean_anomaly - 1.96 * se_anomaly,\n    ci_upper = mean_anomaly + 1.96 * se_anomaly,\n    .groups = 'drop'\n  )\n```\n:::\n\n\n\n#### 5. Visualization Parameters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(palette = c(\n  'El Niño Year' = '#FF9800',\n  'Normal Year' = '#2196F3'\n))\n  \n### |-  titles and caption ----\ntitle_text <- str_glue(\"El Niño Impact on Regional Precipitation\")\nsubtitle_text <- str_glue(\"Distribution patterns (left) and mean values with confidence intervals (right)\")\n\n# Create caption\ncaption_text <- create_mm_caption(\n    mm_year = 2025,\n    mm_week = 12,\n    source_text = \"Our World in Data\"\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # Weekly-specific modifications\n    legend.position = \"plot\",\n\n    axis.title = element_text(size = rel(1.14)),  \n    axis.text = element_text(size = rel(1)),  \n\n    axis.ticks.y = element_blank(),\n    axis.ticks.x = element_line(color = \"gray\", linewidth = 0.5), \n    axis.ticks.length = unit(0.2, \"cm\"), \n\n    panel.border = element_blank(),\n    panel.grid = element_blank(),\n    panel.spacing = unit(1, \"lines\"),  \n    panel.spacing.y = unit(0, \"lines\"),\n    \n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n:::\n\n\n\n#### 6. Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  Plot  ----\n# P1. Ridges Chart ----\np1 <- ggplot(enso_data, aes(x = annual_precipitation_anomaly, y = entity, fill = event_type)) +\n  # Geoms\n  geom_density_ridges(\n    scale = 0.9, \n    alpha = 0.7, \n    quantile_lines = TRUE,\n    quantiles = c(0.5),  \n    jittered_points = FALSE\n  ) +\n  geom_rug(\n    aes(color = event_type), \n    alpha = 0.3, \n    size = 0.1,\n    sides = \"b\",\n    position = position_nudge(y = -0.2)  \n  ) +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  # Scales\n  scale_x_continuous() +\n  scale_y_discrete() +\n  scale_fill_manual(values = colors$palette) +\n  scale_color_manual(values = colors$palette) +\n  coord_cartesian(clip = 'off') +\n  # Labs\n  labs(\n    x = 'Anomaly (mm)',\n    y = NULL,\n    fill = 'Year Type',\n  )\n\n# P2. Dot Plot ---- \np2 <-ggplot(comparative_stats, aes(x = mean_anomaly, y = entity, color = event_type)) +\n  # Geoms\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\", size = 0.7) +\n  geom_errorbarh(\n    aes(xmin = ci_lower, xmax = ci_upper),\n    height = 0.3,\n    size = 0.8,\n    alpha = 0.7\n  ) +\n  geom_point(size = 3) +\n  # Scales\n  scale_x_continuous() +\n  scale_y_discrete() +\n  scale_color_manual(\n    values = colors$palette\n  ) +\n  coord_cartesian(clip = 'off') +\n  # Labs\n  labs(\n    x = \"Mean Precipitation Anomaly (mm)\",\n    y = NULL,\n    color = \"Event Type: \"\n  ) +\n  # Theme\n  theme(legend.position = \"top\")\n\n# Combined Plots ----\ncombined_plot <- (p1 | plot_spacer() | p2) +\n  plot_layout(\n    widths = c(1, 0.05, 1),\n    nrow = 1) +\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    theme = theme(\n      plot.title = element_text(\n        size   = rel(2.6),\n        family = fonts$title,\n        face   = \"bold\",\n        color  = colors$title,\n        lineheight = 1.1,\n        margin = margin(t = 5, b = 5)\n      ),\n      plot.subtitle = element_text(\n        size   = rel(1.1),\n        family = fonts$subtitle,\n        color  = colors$subtitle,\n        lineheight = 1.2,\n        margin = margin(t = 5, b = 15)\n      ),\n      plot.caption = element_markdown(\n        size   = rel(0.75),\n        family = fonts$caption,\n        color  = colors$caption,\n        hjust  = 0.5,\n        margin = margin(t = 10)\n      ),\n      plot.margin = margin(t = 20, r = 10, b = 20, l = 10)\n      )\n    )\n```\n:::\n\n\n\n#### 7. Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### |-  plot image ----  \nsave_plot_patchwork(\n  combined_plot, \n  type = \"makeovermonday\", \n  year = 2025,\n  week = 12,\n  width = 12, \n  height = 10\n  )\n```\n:::\n\n\n\n#### 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] camcorder_0.1.0 patchwork_1.3.0 ggridges_0.5.6  here_1.0.1     \n [5] glue_1.8.0      scales_1.3.0    skimr_2.1.5     janitor_2.2.0  \n [9] showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2   \n[13] lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4    \n[17] purrr_1.0.2     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   \n[21] ggplot2_3.5.1   tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       xfun_0.49          htmlwidgets_1.6.4  tzdb_0.4.0        \n [5] yulab.utils_0.1.8  vctrs_0.6.5        tools_4.4.0        generics_0.1.3    \n [9] curl_6.0.0         parallel_4.4.0     gifski_1.32.0-1    fansi_1.0.6       \n[13] pkgconfig_2.0.3    ggplotify_0.1.2    lifecycle_1.0.4    compiler_4.4.0    \n[17] farver_2.1.2       munsell_0.5.1      repr_1.1.7         codetools_0.2-20  \n[21] snakecase_0.11.1   htmltools_0.5.8.1  yaml_2.3.10        crayon_1.5.3      \n[25] pillar_1.9.0       magick_2.8.5       commonmark_1.9.2   tidyselect_1.2.1  \n[29] digest_0.6.37      stringi_1.8.4      labeling_0.4.3     rsvg_2.6.1        \n[33] rprojroot_2.0.4    fastmap_1.2.0      grid_4.4.0         colorspace_2.1-1  \n[37] cli_3.6.3          magrittr_2.0.3     base64enc_0.1-3    utf8_1.2.4        \n[41] withr_3.0.2        bit64_4.5.2        timechange_0.3.0   rmarkdown_2.29    \n[45] bit_4.5.0          hms_1.1.3          evaluate_1.0.1     knitr_1.49        \n[49] markdown_1.13      gridGraphics_0.5-1 rlang_1.1.4        gridtext_0.1.5    \n[53] Rcpp_1.0.13-1      xml2_1.3.6         renv_1.0.3         vroom_1.6.5       \n[57] svglite_2.1.3      rstudioapi_0.17.1  jsonlite_1.8.9     R6_2.5.1          \n[61] fs_1.6.5           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n\n:::\n\n#### 9. GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`mm_2025_12.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/MakeoverMonday/2025/mm_2025_12.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n\n#### 10. References\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1. Data:\n\n  - Makeover Monday 2025 Week 12: [Precipitation anomalies](https://data.world/makeovermonday/2025w12-precipitation-anomalies)\n  \n2. Article\n\n- Precipitation anomalies: [Precipitation anomalies](https://ourworldindata.org/grapher/global-precipitation-anomaly)\n \n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}