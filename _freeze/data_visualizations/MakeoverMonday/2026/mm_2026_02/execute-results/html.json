{
  "hash": "e6d922860e3e55a6db9f6db59e71ee15",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The Global Housing Bubble is Losing Air\"\nsubtitle: \"While Miami and Tokyo continue to heat up, the primary global trend is a significant cooling of major hubs. Former 'Bubble Risk' leaders like Toronto, Frankfurt, and Hong Kong have seen their risk scores halved since 2020.\"\ndescription: \"A #MakeoverMonday redesign analyzing UBS Global Real Estate Bubble Index data (2020-2025). This dual-panel visualization reveals a surprising story: while Miami dominates headlines, the broader trend shows major financial hubs like Toronto, Frankfurt, and Hong Kong experiencing dramatic bubble deflation.\"\ndate: \"2026-01-12\"\nauthor:\n  - name: \"Steven Ponce\"\n    url: \"https://stevenponce.netlify.app\"\ncitation:\n  url: \"https://stevenponce.netlify.app/data_visualizations/MakeoverMonday/2026/mm_2026_02.html\"\ncategories: [\"MakeoverMonday\", \"Data Visualization\", \"R Programming\", \"2026\"]   \ntags: [\n  \"ggplot2\",\n  \"housing-market\",\n  \"real-estate\",\n  \"bubble-risk\",\n  \"slope-chart\",\n  \"scatter-plot\",\n  \"patchwork\",\n  \"UBS\",\n  \"global-markets\",\n  \"time-series\",\n]\nimage: \"thumbnails/mm_2026_02.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n    theme: \n      light: [flatly, assets/styling/custom_styles.scss]\n      dark: [darkly, assets/styling/custom_styles_dark.scss]\neditor_options: \n  chunk_output_type: inline\nexecute: \n  freeze: true                                      \n  cache: true                                       \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n### Original\n\nThe original visualization comes from [The Biggest Housing Bubble Risks Globally](https://data.world/makeovermonday/2026wk2-the-biggest-housing-bubble-risks-globally)\n\n![Original visualization](https://raw.githubusercontent.com/poncest/MakeoverMonday/refs/heads/master/2026/Week_02/original_chart.png)\n\n### Makeover\n\n![Two-panel visualization comparing housing bubble risk trajectories for 9 global cities from 2020 to 2025. Left panel: Slope chart showing dramatic divergenceâ€”Toronto, Hong Kong, and Munich fell from 1.8 to below 1.0 (teal lines), while Miami rose from 0.5 to 1.7 (grey lines). Right panel: Scatter plot of current risk score versus 5-year change, with point size reflecting magnitude of change. Cooling markets cluster in the lower-left quadrant; Hong Kong shows the most significant decline (-1.3 points).](mm_2026_02.png){#fig-1}\n\n### [**Steps to Create this Graphic**]{.mark}\n\n#### [1. Load Packages & Setup]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: load\n#| warning: false\n#| message: false\n#| results: \"hide\"\n\n## 1. LOAD PACKAGES & SETUP ----\nsuppressPackageStartupMessages({\n  if (!require(\"pacman\")) install.packages(\"pacman\")\n  pacman::p_load(\n    tidyverse, janitor, skimr, scales, ggtext, showtext, glue,\n    patchwork, ggrepel          # Interpreted String Literals\n)\n})\n\n### |- figure size ----\ncamcorder::gg_record(\n    dir    = here::here(\"temp_plots\"),\n    device = \"png\",\n    width  = 12,\n    height = 8,\n    units  = \"in\",\n    dpi    = 320\n)\n\n# Source utility functions\nsuppressMessages(source(here::here(\"R/utils/fonts.R\")))\nsource(here::here(\"R/utils/social_icons.R\"))\nsource(here::here(\"R/utils/image_utils.R\"))\nsource(here::here(\"R/themes/base_theme.R\"))\n```\n````\n:::\n\n\n#### [2. Read in the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: read\n#| include: true\n#| eval: true\n#| warning: false\n#|\n\n### |- Current data (2025) ----\nhousing_bubble_raw <- readxl::read_excel(\n   here::here(\"data/MakeoverMonday/2026/Housing bubbles.xlsx\")) |>\n  clean_names()\n\n### |- Historical data (2020-2025) from UBS reports ----\n\n# Source: UBS Global Real Estate Bubble Index reports 2020-2025\n# https://www.ubs.com/global/en/wealth-management/insights/2024/global-real-estate-bubble-index.html\n# Note: Historical data compiled from annual UBS reports\n\nhistorical_raw <- tribble(\n  ~city, ~year_2020, ~year_2021, ~year_2022, ~year_2023, ~year_2024, ~year_2025,\n  \"Miami\", 0.5, 0.8, 1.4, 1.8, 1.8, 1.7,\n  \"Tokyo\", 0.7, 0.7, 0.6, 0.9, 1.2, 1.6,\n  \"Zurich\", 1.5, 1.8, 1.7, 1.7, 1.5, 1.6,\n  \"Los Angeles\", 0.7, 1.0, 1.2, 1.2, 1.2, 1.1,\n  \"Toronto\", 1.8, 2.0, 2.2, 1.2, 0.9, 0.8,\n  \"Frankfurt\", 1.5, 2.2, 2.2, 1.1, 0.8, 0.8,\n  \"Munich\", 1.8, 2.3, 2.0, 1.1, 0.9, 0.6,\n  \"Hong Kong\", 1.8, 1.7, 1.7, 1.2, 0.7, 0.5,\n  \"Vancouver\", 1.0, 1.6, 1.7, 1.1, 0.9, 0.8\n)\n```\n````\n:::\n\n\n#### [3. Examine the Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: examine\n#| include: true\n#| eval: true\n#| results: 'hide'\n#| warning: false\n\nglimpse(housing_bubble_raw)\nglimpse(historical_raw)\n```\n````\n:::\n\n\n#### [4. Tidy Data]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: tidy\n#| warning: false\n\nslope_data <- historical_raw |>\n  mutate(\n    change     = year_2025 - year_2020,\n    direction  = if_else(change < 0, \"Cooling\", \"Rising\"),\n    label_2020 = sprintf(\"%s  %.1f\", city, year_2020),\n    label_2025 = sprintf(\"%s  %.1f\", city, year_2025)\n  ) |>\n  arrange(desc(year_2025)) |>\n  mutate(city = factor(city, levels = unique(city)))\n```\n````\n:::\n\n\n#### [5. Visualization Parameters]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: params\n#| include: true\n#| warning: false\n\n### |-  plot aesthetics ----\n# Get base colors with custom palette\ncolors <- get_theme_colors(\n  palette = list(\n    cooling    = \"#0D7377\",\n    rising     = \"#C4C4C4\"\n  )\n)\n\n### |-  Main titles ----\ntitle_text <- \"The Global Housing Bubble is Losing Air\"\n\nsubtitle_text <- str_glue(\n  \"While Miami and Tokyo continue to heat up, the primary global trend is a **significant cooling** of major hubs.<br>\",\n  \"Former 'Bubble Risk' leaders like \",\n  \"<span style='color:{colors$palette$cooling};'>**Toronto, Frankfurt, and Hong Kong**</span>\",\n  \" have seen their risk scores halved since 2020.\"\n)\n\ncaption_text <- create_mm_caption(\n  mm_year = 2026, mm_week = 02,\n  source_text = str_glue(\n    \"UBS Global Real Estate Bubble Index 2025\"\n  )\n)\n\n### |-  fonts ----\nsetup_fonts()\nfonts <- get_font_families()\n\n### |-  plot theme ----\n\n# Start with base theme\nbase_theme <- create_base_theme(colors)\n\n# Add weekly-specific theme elements\nweekly_theme <- extend_weekly_theme(\n  base_theme,\n  theme(\n    # # Text styling\n    plot.title = element_text(\n      size = rel(1.5), family = fonts$title, face = \"bold\",\n      color = colors$title, lineheight = 1.1, hjust = 0,\n      margin = margin(t = 5, b = 10)\n    ),\n    plot.subtitle = element_markdown(\n      size = rel(0.9), family = fonts$subtitle, face = \"italic\",\n      color = alpha(colors$subtitle, 0.9), lineheight = 1.1,\n      margin = margin(t = 0, b = 20)\n    ),\n\n    # Legend formatting\n    legend.position = \"plot\",\n    legend.justification = \"right\",\n    legend.margin = margin(l = 12, b = 5),\n    legend.key.size = unit(0.8, \"cm\"),\n    legend.box.margin = margin(b = 10),\n\n    # Axis formatting\n    axis.ticks.y = element_blank(),\n    axis.ticks.x = element_line(color = \"gray\", linewidth = 0.5),\n    axis.title.x = element_text(\n      face = \"bold\", size = rel(0.85),\n      margin = margin(t = 10), family = fonts$subtitle,\n      color = \"gray40\"\n    ),\n    axis.title.y = element_text(\n      face = \"bold\", size = rel(0.85),\n      margin = margin(r = 10), family = fonts$subtitle,\n      color = \"gray40\"\n    ),\n    axis.text.x = element_text(\n      size = rel(0.85), family = fonts$subtitle,\n      color = \"gray40\"\n    ),\n    axis.text.y = element_markdown(\n      size = rel(0.85), family = fonts$subtitle,\n      color = \"gray40\"\n    ),\n\n    # Grid lines\n    panel.grid.minor = element_line(color = \"#ecf0f1\", linewidth = 0.2),\n    panel.grid.major = element_line(color = \"#ecf0f1\", linewidth = 0.4),\n\n    # Margin\n    plot.margin = margin(20, 20, 20, 20)\n  )\n)\n\n# Set theme\ntheme_set(weekly_theme)\n```\n````\n:::\n\n\n#### [6. Plot]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: plot\n#| warning: false\n\n### |-  p1: slope chart ----\np1 <-\nggplot(slope_data) +\n  # Geoms\n  geom_segment(\n    aes(\n      x = 1, xend = 2,\n      y = year_2020, yend = year_2025,\n      color = direction, alpha = direction, linewidth = direction\n    )\n  ) +\n  geom_point(aes(x = 1, y = year_2020, color = direction, alpha = direction), size = 2) +\n  geom_point(aes(x = 2, y = year_2025, color = direction, alpha = direction), size = 3) +\n  geom_text_repel(\n    aes(x = 1, y = year_2020, label = label_2020),\n    direction = \"y\",\n    hjust = 1,\n    nudge_x = -0.15,\n    size = 3.5,\n    segment.color = NA,\n    family = fonts$text,\n    color = colors$text     \n  ) +\n  geom_text_repel(\n    aes(x = 2, y = year_2025, label = label_2025, color = direction),\n    direction = \"y\",\n    hjust = 0,\n    nudge_x = 0.15,\n    size = 3.8,\n    fontface = \"bold\",\n    segment.color = NA,\n    family = fonts$text,\n    seed = 123\n  ) +\n  # Scales\n  scale_color_manual(values = c(\"Cooling\" = colors$palette$cooling, \"Rising\" = colors$palette$rising)) +\n  scale_alpha_manual(values = c(\"Cooling\" = 1, \"Rising\" = 0.4)) +\n  scale_linewidth_manual(values = c(\"Cooling\" = 1.2, \"Rising\" = 0.5)) +\n  scale_x_continuous(\n    limits = c(0.4, 2.6),\n    breaks = c(1, 2),\n    labels = c(\"2020\", \"2025\")\n  ) +\n  # Labs\n  labs(subtitle = \"Bubble Risk Index: 5-Year Trajectory\", x = NULL, y = NULL) +\n  # Theme\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.y = element_blank(),\n    axis.text.y = element_blank(),\n    legend.position = \"none\"\n    )\n\n### |-  p2: quadrant chart ----\np2 <-\nggplot(slope_data, aes(x = year_2025, y = change)) +\n  # Geoms\n  geom_hline(yintercept = 0, color = \"grey80\", linetype = \"dashed\") +\n  geom_vline(xintercept = 1, color = \"grey80\", linetype = \"dashed\") +\n  geom_point(aes(color = direction, alpha = direction, size = abs(change))) +\n  geom_text_repel(\n    aes(label = city, color = direction),\n    size = 3.5,\n    fontface = \"bold\",\n    box.padding = 0.5, \n    seed = 123\n  ) +\n  # Scales\n  scale_color_manual(values = c(\"Cooling\" = colors$palette$cooling, \"Rising\" = colors$palette$rising)) +\n  scale_alpha_manual(values = c(\"Cooling\" = 1, \"Rising\" = 0.4)) +\n  scale_size(range = c(2.5, 8)) +\n  coord_cartesian(xlim = c(0, 2)) +\n  # Labs\n  labs(\n    subtitle = \"Current Risk vs. Velocity of Change\",\n    x = \"Risk Score in 2025\",\n    y = \"5-Year Net Change\"\n  ) +\n  # Theme\n  theme(\n    legend.position = \"none\",\n    panel.grid.major = element_line(color = \"grey95\")\n  )\n\n### |-  combined plot ----\ncombined_plot <- p1 + p2 +\n  plot_layout(widths = c(1.15, 1)) +\n  plot_annotation(\n    title = title_text,\n    subtitle = subtitle_text,\n    caption = caption_text,\n    theme = theme(\n      plot.title = element_text(\n        size = rel(2.4),\n        family = fonts$title,\n        face = \"bold\",\n        color = colors$title,\n        lineheight = 1.15,\n        margin = margin(t = 5, b = 10)\n      ),\n      plot.subtitle = element_markdown(\n        size = rel(0.8),\n        family = fonts$subtitle,\n        color = alpha(colors$subtitle, 0.88),\n        lineheight = 1.5,\n        margin = margin(t = 5, b = 10)\n      ),\n      plot.caption = element_markdown(\n        size = rel(0.55),\n        family = fonts$subtitle,\n        color = colors$caption,\n        hjust = 0,\n        lineheight = 1.4,\n        margin = margin(t = 20, b = 5)\n      ),\n    )\n  )\n```\n````\n:::\n\n\n#### [7. Save]{.smallcaps}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: save\n#| warning: false\n\n### |-  plot image ----  \nsave_plot_patchwork(\n  plot = combined_plot, \n  type = \"makeovermonday\", \n  year = current_year,\n  week = current_week,\n  width = 12, \n  height = 8\n  )\n```\n````\n:::\n\n\n#### [8. Session Info]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] here_1.0.1      ggrepel_0.9.6   patchwork_1.3.0 glue_1.8.0     \n [5] showtext_0.9-7  showtextdb_3.0  sysfonts_0.8.9  ggtext_0.1.2   \n [9] scales_1.3.0    skimr_2.1.5     janitor_2.2.0   lubridate_1.9.3\n[13] forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2    \n[17] readr_2.1.5     tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1  \n[21] tidyverse_2.0.0 pacman_0.5.1   \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6       xfun_0.49          htmlwidgets_1.6.4  tzdb_0.5.0        \n [5] yulab.utils_0.1.8  vctrs_0.6.5        tools_4.4.0        generics_0.1.3    \n [9] curl_6.0.0         gifski_1.32.0-1    fansi_1.0.6        pkgconfig_2.0.3   \n[13] ggplotify_0.1.2    readxl_1.4.3       lifecycle_1.0.4    compiler_4.4.0    \n[17] farver_2.1.2       munsell_0.5.1      repr_1.1.7         codetools_0.2-20  \n[21] snakecase_0.11.1   htmltools_0.5.8.1  yaml_2.3.10        pillar_1.9.0      \n[25] camcorder_0.1.0    magick_2.8.5       commonmark_1.9.2   tidyselect_1.2.1  \n[29] digest_0.6.37      stringi_1.8.4      labeling_0.4.3     rsvg_2.6.1        \n[33] rprojroot_2.0.4    fastmap_1.2.0      grid_4.4.0         colorspace_2.1-1  \n[37] cli_3.6.4          magrittr_2.0.3     base64enc_0.1-3    utf8_1.2.4        \n[41] withr_3.0.2        timechange_0.3.0   rmarkdown_2.29     cellranger_1.1.0  \n[45] hms_1.1.3          evaluate_1.0.1     knitr_1.49         markdown_1.13     \n[49] gridGraphics_0.5-1 rlang_1.1.6        gridtext_0.1.5     Rcpp_1.0.13-1     \n[53] xml2_1.3.6         renv_1.0.3         svglite_2.1.3      rstudioapi_0.17.1 \n[57] jsonlite_1.8.9     R6_2.5.1           fs_1.6.5           systemfonts_1.1.0 \n```\n\n\n:::\n:::\n\n:::\n\n#### [9. GitHub Repository]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [mm_2026_02.qmd](https://github.com/poncest/personal-website/blob/master/data_visualizations/MakeoverMonday/2026/mm_2026_02.qmd).\n\nFor the full repository, [click here](https://github.com/poncest/personal-website/).\n:::\n\n#### [10. References]{.smallcaps}\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for References\n\n1.  Data:\n\n    -   Makeover Monday 2026 Week 2: [The Biggest Housing Bubble Risks Globally](https://data.world/makeovermonday/2026wk2-the-biggest-housing-bubble-risks-globally)\n\n2.  Article\n\n    -   [The Biggest Housing Bubble Risks Globally](https://data.world/makeovermonday/2026wk2-the-biggest-housing-bubble-risks-globally)\n:::\n\n#### [11. Custom Functions Documentation]{.smallcaps}\n\n::: {.callout-note collapse=\"true\"}\n##### ðŸ“¦ Custom Helper Functions\n\nThis analysis uses custom functions from my personal module library for efficiency and consistency across projects.\n\n**Functions Used:**\n\n-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext\n-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions\n-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions\n-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes\n\n**Why custom functions?**\\\nThese utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.\n\n**Source Code:**\\\nView all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}