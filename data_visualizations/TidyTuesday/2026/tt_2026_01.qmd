---
title: "The Prescription Takeover"
subtitle: "U.S. Google searches show a dramatic shift: combined interest in GLP-1 drugs (Ozempic, Wegovy, Mounjaro) has overtaken fad diets (keto, Paleo) since late 2023." 
description: "placeholder"
date: "2026-01-08"
author:
  - name: "Steven Ponce"
    url: "https://stevenponce.netlify.app"
citation:
  url: "https://stevenponce.netlify.app/data_visualizations/TidyTuesday/2026/tt_2026_01.html" 
categories: ["TidyTuesday", "Data Visualization", "R Programming", "2026"]
tags: [
  "Lplaceholder",
  ]
image: "thumbnails/tt_2026_01.png"
format:
  html:
    toc: true
    toc-depth: 5
    code-link: true
    code-fold: true
    code-tools: true
    code-summary: "Show code"
    self-contained: true
    theme: 
      light: [flatly, assets/styling/custom_styles.scss]
      dark: [darkly, assets/styling/custom_styles_dark.scss]
editor_options: 
  chunk_output_type: inline
execute: 
  freeze: true                                    
  cache: true                                       
  error: false
  message: false
  warning: false
  eval: true
---

![Line chart showing U.S. Google search trends from 2016 to 2025 for diet-related terms. Combined searches for GLP-1 drugs (Ozempic, Wegovy, Mounjaro) rose from near zero in 2020 to surpass fad diets (keto, Paleo) in late 2023. Fad diets peaked around 2019 at 120 combined search interest and declined to about 25 by 2025. The generic term 'diet' remained relatively stable around 50-75 throughout. A shaded 'Prescription Era' highlights the post-2023 period where pharmaceutical solutions dominate over behavioral diets.](tt_2026_01.png){#fig-1}

### <mark> **Steps to Create this Graphic** </mark>

#### 1. Load Packages & Setup

```{r}
#| label: load
#| warning: false
#| message: false      
#| results: "hide"     

## 1. LOAD PACKAGES & SETUP ----
suppressPackageStartupMessages({
if (!require("pacman")) install.packages("pacman")
pacman::p_load(
    tidyverse,     # Easily Install and Load the 'Tidyverse'
    ggtext,        # Improved Text Rendering Support for 'ggplot2'
    showtext,      # Using Fonts More Easily in R Graphs
    ggrepel,       # Non-overlapping Text Labels
    janitor,       # Simple Tools for Examining and Cleaning Dirty Data
    scales,        # Scale Functions for Visualization
    glue           # Interpreted String Literals
)
})

### |- figure size ----
camcorder::gg_record(
  dir    = here::here("temp_plots"),
  device = "png",
  width  = 8,
  height = 6,
  units  = "in",
  dpi    = 320
)

# Source utility functions
suppressMessages(source(here::here("R/utils/fonts.R")))
source(here::here("R/utils/social_icons.R"))
source(here::here("R/utils/image_utils.R"))
source(here::here("R/themes/base_theme.R"))
```

#### 2. Read in the Data

```{r}
#| label: read
#| include: true
#| eval: true
#| warning: false

# pak::pkg_install('gtrendsR')
# library(gtrendsR)
# library(tidyverse)

# Pull first batch
# terms_diet <- c("diet", "keto", "intermittent fasting", "calorie counting", "Ozempic")
# trends_diet <- gtrends(
#     keyword = terms_diet,
#     geo = "US",
#     time = "2016-01-01 2025-01-07"
# )

# Pull second batch
# terms_expanded <- c("Wegovy", "Mounjaro", "Paleo")
# trends_expanded <- gtrends(
#     keyword = terms_expanded,
#     geo = "US",
#     time = "2016-01-01 2025-01-07"
# )

# Combine and clean
# diet_combined <- bind_rows(
#     trends_diet$interest_over_time,
#     trends_expanded$interest_over_time
# ) |>
#     mutate(
#         hits = case_when(
#             hits == "<1" ~ "0.5",
#             TRUE ~ hits
#         ),
#         hits = as.numeric(hits)
#     )

# Save combined data
# write_csv(diet_combined, "2026/Week_01/diet_trends_combined.csv")

raw_data <- read_csv(
  here::here("data/TidyTuesday/2026/diet_trends_combined.csv")) |> 
    clean_names()
```

#### 3. Examine the Data

```{r}
#| label: examine
#| include: true
#| eval: true
#| results: 'hide'
#| warning: false

glimpse(raw_data)
```

#### 4. Tidy Data

```{r}
#| label: tidy-fixed
#| warning: false

### |-  clean individual terms ----
diet_clean <- raw_data |>
    mutate(
        hits = case_when(
            hits == "<1" ~ 0.5,
            TRUE ~ as.numeric(hits)
        ),
        date = as.Date(date),
        year = year(date),
        month = month(date)
    ) |>
    select(date, year, month, keyword, hits)

### |-  create grouped categories ----
diet_grouped <- diet_clean |>
    mutate(
        category = case_when(
            keyword %in% c("keto", "Paleo") ~ "Fad Diets",
            keyword %in% c("Ozempic", "Wegovy", "Mounjaro") ~ "GLP-1 Drugs",
            keyword == "diet" ~ "diet",
            TRUE ~ "Other"
        )
    ) |>
    # Exclude minor terms
    filter(category != "Other") |>
    group_by(date, year, month, category) |>
    summarise(
        hits = sum(hits, na.rm = TRUE),
        .groups = "drop"
    )

### |-  find the crossover point ----
crossover_data <- diet_grouped |>
    filter(category %in% c("Fad Diets", "GLP-1 Drugs")) |>
    pivot_wider(names_from = category, values_from = hits) |>
    filter(`GLP-1 Drugs` > `Fad Diets`) |>
    slice_min(date, n = 1)

crossover_date <- crossover_data$date

# Get the intersection y-value for annotation
crossover_y <- crossover_data$`GLP-1 Drugs`

# Create label data for end of lines 
label_data <- diet_grouped |>
    filter(date == max(date)) |>
    mutate(
        label = case_when(
            category == "GLP-1 Drugs" ~ "GLP-1 Drugs\n(Ozempic, Wegovy, Mounjaro)",
            category == "Fad Diets" ~ "Fad Diets\n(keto, Paleo)",
            TRUE ~ category
        )
    )

# Define prescription era start
prescription_era_start <- as.Date("2023-10-01")
```

#### 5. Visualization Parameters

```{r}
#| label: params
#| include: true
#| warning: false

### |-  plot aesthetics ----
colors <- get_theme_colors(
  palette = list(
      "diet" = "gray50",
      "Fad Diets" = "#3498db",
      "GLP-1 Drugs" = "#e74c3c"
  )
)

### |- titles and caption ----
title_text <- str_glue("The Prescription Takeover")

subtitle_text <- str_glue(
    "U.S. Google searches show a dramatic shift: combined interest in <span style='color:#e74c3c;'>**GLP-1 drugs**</span><br>",
    "(Ozempic, Wegovy, Mounjaro) has overtaken <span style='color:#3498db;'>**fad diets**</span> (keto, Paleo) since late 2023."
)

caption_text <- create_social_caption(
    tt_year = 2026,
    tt_week = 01,
    source_text = "Google Trends (US), 2016-2025 via { gtrendsR }"
)

### |-  fonts ----
setup_fonts()
fonts <- get_font_families()

### |-  plot theme ----
# Start with base theme
base_theme <- create_base_theme(colors)

# Add weekly-specific theme elements
weekly_theme <- extend_weekly_theme(
  base_theme,
  theme(
    # Text styling
    plot.title = element_text(
      face = "bold", family = fonts$title, size = rel(1.4),
      color = colors$title, margin = margin(b = 10), hjust = 0
    ),
    plot.subtitle = element_markdown(
      face = "italic", family = fonts$subtitle, lineheight = 1.2,
      color = colors$subtitle, size = rel(0.9), margin = margin(b = 20), hjust = 0
    ),

    # Grid
    panel.grid.minor = element_blank(),
    panel.grid.major.x = element_blank(),
    panel.grid.major = element_line(color = "gray90", linewidth = 0.25),

    # Axes
    axis.title = element_text(size = rel(0.8), color = "gray30"),
    axis.text = element_text(color = "gray30"),
    axis.text.y = element_text(size = rel(0.85)),
    axis.ticks = element_blank(),

    # Facets
    strip.background = element_rect(fill = "gray95", color = NA),
    strip.text = element_text(
      face = "bold",
      color = "gray20",
      size = rel(0.9),
      margin = margin(t = 6, b = 4)
    ),
    panel.spacing = unit(1.5, "lines"),

    # Legend elements
    legend.position = "plot",
    legend.title = element_text(
      family = fonts$subtitle,
      color = colors$text, size = rel(0.8), face = "bold"
    ),
    legend.text = element_text(
      family = fonts$tsubtitle,
      color = colors$text, size = rel(0.7)
    ),
    legend.margin = margin(t = 15),

    # Plot margin
    plot.margin = margin(20, 20, 20, 20),
    
  )
)

# Set theme
theme_set(weekly_theme)
```

#### 6. Plot

```{r}
#| label: plot
#| warning: false

### |- Plot ----
p <- diet_grouped |>
    ggplot(aes(x = date, y = hits, color = category)) +
    
    # Geoms
    geom_line(linewidth = 0.4, alpha = 0.25) +
    geom_smooth(
        method = "loess",
        span = 0.2,
        se = FALSE,
        linewidth = 1.8
    ) +
    geom_text_repel(
        data = label_data |> 
            filter(category == "GLP-1 Drugs"),
        aes(label = label),
        hjust = 0,
        direction = "y",
        nudge_x = 50,
        nudge_y = 5,
        segment.color = NA,
        family = fonts$text,
        fontface = "bold",
        size = 3,
        lineheight = 0.85,
        box.padding = 0.5
    ) +
    geom_text_repel(
        data = label_data |> 
            filter(category != "GLP-1 Drugs"),
        aes(label = label),
        hjust = 0,
        direction = "y",
        nudge_x = 50,
        # nudge_y = 5,
        segment.color = NA,
        family = fonts$text,
        fontface = "bold",
        size = 3,
        lineheight = 0.85,
        box.padding = 0.5
    ) +
    
    # Annotate
    annotate(
        "rect",
        xmin = prescription_era_start,
        xmax = max(diet_grouped$date) + 60,
        ymin = -Inf,
        ymax = Inf,
        fill = "#e74c3c",
        alpha = 0.05
    ) +
    annotate(
        "text",
        x = prescription_era_start + 200,
        y = 130,
        label = "Prescription Era",
        family = fonts$text,
        size = 3,
        color = "gray30",
        fontface = "bold.italic"
    ) +
    annotate(
        "point",
        x = crossover_date,
        y = crossover_y,
        size = 3,
        color = "gray20"
    ) +
    annotate(
        "text",
        x = crossover_date - 90,
        y = crossover_y + 15,
        label = "GLP-1 surpasses\nfad diets",
        family = fonts$text,
        size = 2.8,
        color = "gray30",
        hjust = 1,
        lineheight = 0.9
    ) +
    annotate(
        "curve",
        x = crossover_date - 80,
        y = crossover_y + 10,
        xend = crossover_date - 10,
        yend = crossover_y + 2,
        curvature = 0.2,
        arrow = arrow(length = unit(0.15, "cm"), type = "closed"),
        color = "gray40",
        linewidth = 0.4
    ) +
    
    # Scales
    scale_color_manual(
        values = c(
            "diet" = "gray50",
            "Fad Diets" = "#3498db",
            "GLP-1 Drugs" = "#e74c3c"
        )
    ) +
    scale_x_date(
        date_breaks = "2 years",
        date_labels = "%Y",
        expand = expansion(mult = c(0.02, 0.18))
    ) +
    scale_y_continuous(
        breaks = seq(0, 100, 25),
        limits = c(0, 130),
        expand = expansion(mult = c(0, 0.02))
    ) +
    coord_cartesian(clip = "off") +
    
    # Labs
    labs(
        title = title_text,
        subtitle = subtitle_text,
        caption = caption_text,
        y = "Combined Search Interest"
    ) +
    
    # Theme
    theme(
    plot.title = element_markdown(
        size = rel(2.3),
        family = fonts$title,
        face = "bold",
        color = colors$title,
        lineheight = 1.15,
        margin = margin(t = 8, b = 5)
    ),
    plot.subtitle = element_markdown(
        size = rel(0.9),
        family = fonts$subtitle,
        color = alpha(colors$subtitle, 0.88),
        lineheight = 1.5,
        margin = margin(t = 5, b = 20)
    ),
    plot.caption = element_markdown(
        size = rel(0.65),
        family = fonts$subtitle,
        color = colors$caption,
        hjust = 0,
        lineheight = 1.4,
        margin = margin(t = 20, b = 5)
    )
)
```

#### 7. Save

```{r}
#| label: save
#| warning: false

### |-  plot image ----  
save_plot(
  plot = p, 
  type = "tidytuesday", 
  year = 2026, 
  week = 01, 
  width  = 8,
  height = 6,
  )
```

#### 8. Session Info

::: {.callout-tip collapse="true"}
##### Expand for Session Info

```{r, echo = FALSE}
#| eval: true
#| warning: false

sessionInfo()
```
:::

#### 9. GitHub Repository

::: {.callout-tip collapse="true"}
##### Expand for GitHub Repo

The complete code for this analysis is available in [`tt_2026_01.qmd`](https://github.com/poncest/personal-website/blob/master/data_visualizations/TidyTuesday/2025/tt_2026_01.qmd).

For the full repository, [click here](https://github.com/poncest/personal-website/).
:::

#### 10. References

::: {.callout-tip collapse="true"}
##### Expand for References

1.  **Data Source:**
    -   TidyTuesday 2026 Week 01: [Bring your own data](https://github.com/rfordatascience/tidytuesday/blob/main/data/2026/2026-01-06/readme.md)
    -   [Google Trends](https://trends.google.com/) - Search interest data for U.S., 2016-2025
    -   Search terms: "diet", "keto", "Paleo", "Ozempic", "Wegovy", "Mounjaro"
2.  **R Package:**
    -   Massicotte, P. and Eddelbuettel, D. (2024). gtrendsR: Perform and Display Google Trends Queries. R package. [CRAN](https://cran.r-project.org/package=gtrendsR) \| [GitHub](https://github.com/PMassicotte/gtrendsR)
:::

#### 11. Custom Functions Documentation

::: {.callout-note collapse="true"}
##### ðŸ“¦ Custom Helper Functions

This analysis uses custom functions from my personal module library for efficiency and consistency across projects.

**Functions Used:**

-   **`fonts.R`**: `setup_fonts()`, `get_font_families()` - Font management with showtext
-   **`social_icons.R`**: `create_social_caption()` - Generates formatted social media captions
-   **`image_utils.R`**: `save_plot()` - Consistent plot saving with naming conventions
-   **`base_theme.R`**: `create_base_theme()`, `extend_weekly_theme()`, `get_theme_colors()` - Custom ggplot2 themes

**Why custom functions?**\
These utilities standardize theming, fonts, and output across all my data visualizations. The core analysis (data tidying and visualization logic) uses only standard tidyverse packages.

**Source Code:**\
View all custom functions â†’ [GitHub: R/utils](https://github.com/poncest/personal-website/tree/master/R)
:::
